/*! For license information please see main.7505ff4c.js.LICENSE.txt */
(()=>{var e={730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Ee=null;function Ie(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function ke(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==Se||null!==Ee)&&(Ae(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Ne=!1}function Me(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Le=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,Et,It,kt=!1,Tt=[],Ct=null,At=null,Pt=null,Rt=new Map,Dt=new Map,Nt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Pt&&jt(Pt)&&(Pt=null),Rt.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var qt=_.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Kt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),_n=sn(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return En}var kn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Nn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!On||Mn&&8<Mn&&11>=Mn),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){jr(e,0)}function Yn(e){if(K(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Ir(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var kr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Rr.length;Nr++){var Or=Rr[Nr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=we(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Tr:case Cr:l=yn;break;case Ar:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=De(p,d))&&u.push(Hr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_i(l),f=null==c?a:_i(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,g=d;g;g=Kr(g))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Wn(a))if(Jn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Gr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var xi=[],Si=-1;function Ei(e){return{current:e}}function Ii(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function ki(e,t){Si++,xi[Si]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ai=Ei(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ii(Ai),Ii(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(s(168));ki(Ci,t),ki(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ci.current,ki(Ci,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),ki(Ci,e)):Ii(Ai),ki(Ai,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=bt;try{var n=ji;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ke(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Gi=0,Ki=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[Wi++]=Gi,qi[Wi++]=Hi,Hi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Gi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=_.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&vs(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),is&&$i(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&$i(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,g),c}function m(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),is&&$i(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return is&&$i(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),is&&$i(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ms(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(M(o))return m(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var _s=bs(!0),ws=bs(!1),xs=Ei(null),Ss=null,Es=null,Is=null;function ks(){Is=Es=Ss=null}function Ts(e){var t=xs.current;Ii(xs),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ss=e,Is=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Rs=null;function Ds(e){null===Rs?Rs=[e]:Rs.push(e)}function Ns(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Hs=Ei(Ws),Gs=Ei(Ws),Ks=Ei(Ws);function Qs(e){if(e===Ws)throw Error(s(174));return e}function Ys(e,t){switch(ki(Ks,t),ki(Gs,e),ki(Hs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Hs),ki(Hs,t)}function Xs(){Ii(Hs),Ii(Gs),Ii(Ks)}function Js(e){Qs(Ks.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(ki(Gs,e),ki(Hs,n))}function $s(e){Gs.current===e&&(Ii(Hs),Ii(Gs))}var Zs=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=_.ReactCurrentDispatcher,io=_.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=$o,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function _o(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Eo(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Lo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,ko.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Ao(e)}function To(e,t,n){return n((function(){Co(t)&&Ao(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Po(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return bo().memoizedState}function No(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Mo(e,t){return No(8390656,8,e,t)}function Lo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function jo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ho(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Go(){return bo().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Ns(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ns(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $o={readContext:Ps,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ps,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Po,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mo(To.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Al.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:wo,useRef:Do,useState:function(){return wo(_o)},useDebugValue:zo,useDeferredValue:function(e){return Wo(bo(),ao.memoizedState,e)},useTransition:function(){return[wo(_o)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:xo,useRef:Do,useState:function(){return xo(_o)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[xo(_o)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Di(t)?Pi:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Di(t)?Pi:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=_.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?ws(t,null,n,r):_s(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=mo(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Nc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Nl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Nl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Nl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Nl,Dl),Dl|=r;return _a(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Di(n)?Pi:Ci.current;return s=Ri(t,s),As(t,i),n=mo(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ta(e,t,n,r,i){if(Di(n)){var s=!0;Li(t)}else s=!1;if(As(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ri(t,c=Di(n)?Pi:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ms=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ms?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ms||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ri(t,l=Di(n)?Pi:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ms=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ms?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ms||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,s,i)}function Ca(e,t,n,r,i,s){Ia(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ys(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Da,Na,Oa,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&_s(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nc(r,e,i,-1))}return gc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Nc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Nc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),_s(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Di(t.type)&&Ni(),Ga(t),null;case 3:return r=t.stateNode,Xs(),Ii(Ai),Ii(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Da(e,t),Ga(t),null;case 5:$s(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=Qs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ii(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Xs(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Ts(t.type._context),Ga(t),null;case 19:if(Ii(Zs),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ii(Ai),Ii(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ii(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(Zs),null;case 4:return Xs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,dl(e,t,n),Xa=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Ec(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gl(t,e),Xa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,$a=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$a=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,$a=l):xl(i);for(;null!==s;)$a=s,bl(s,t,n),s=s.sibling;$a=i,Ya=a,Xa=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):_l(e)}}function _l(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function wl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function xl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ec(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,El=Math.ceil,Il=_.ReactCurrentDispatcher,kl=_.ReactCurrentOwner,Tl=_.ReactCurrentBatchConfig,Cl=0,Al=null,Pl=null,Rl=0,Dl=0,Nl=Ei(0),Ol=0,Ml=null,Ll=0,Fl=0,jl=0,Ul=null,Vl=null,zl=0,Bl=1/0,ql=null,Wl=!1,Hl=null,Gl=null,Kl=!1,Ql=null,Yl=0,Xl=0,Jl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Cl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Rl?Rl&-Rl:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Cl)&&e===Al||(e===Al&&(0===(2&Cl)&&(Fl|=n),4===Ol&&ac(e,Rl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Bl=Je()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&Cl)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cl;Cl|=2;var o=pc();for(Al===e&&Rl===t||(ql=null,Bl=Je()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}ks(),Il.current=o,Cl=i,null!==Pl?t=0:(Al=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,dc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ml,dc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vl,ql),t);break}wc(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vl,ql),r);break}wc(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,dc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,ql),rc(e,Je()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Bl=Je()+500,Ui&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&xc();var t=Cl;Cl|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Cl=t))&&Bi()}}function hc(){Dl=Nl.current,Ii(Nl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Xs(),Ii(Ai),Ii(Ci),no();break;case 5:$s(r);break;case 4:Xs();break;case 13:case 19:Ii(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Pl=e=Nc(e.current,null),Rl=Dl=t,Ol=0,Ml=null,jl=Fl=Ll=0,Vl=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(ks(),ro.current=$o,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Ol=1,Ml=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(_){t=_,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=Il.current;return Il.current=$o,null===e?$o:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Al||0===(268435455&Ll)&&0===(268435455&Fl)||ac(Al,Rl)}function mc(e,t){var n=Cl;Cl|=2;var r=pc();for(Al===e&&Rl===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(ks(),Cl=n,Il.current=r,null!==Pl)throw Error(s(261));return Al=null,Rl=0,Ol}function yc(){for(;null!==Pl;)bc(Pl)}function vc(){for(;null!==Pl&&!Ye();)bc(Pl)}function bc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_c(e):Pl=t,kl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Pl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=bt;bt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),Cl=l,bt=a,Tl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function xc(){if(null!==Ql){var e=_t(Yl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(sl(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var b=e.current;for($a=b;null!==$a;){var _=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,$a=_;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){$a=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$a=w;break e}$a=l.return}}if(Cl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>Je()-zl?dc(e,0):jl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ac(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Mc(n.children,i,o,t);case E:a=8,i|=8;break;case I:return(e=Rc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case N:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case T:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Mi(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=js(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:Js(t);break;case 1:Di(t.type)&&Li(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);As(t,n),i=mo(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ia(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(xs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ps(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,As(t,n),oa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Cl)&&(Bl=Je()+500,Bi()))}break;case 13:uc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Et=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[bi,_i,wi,ke,Te,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,_(e),!g)if(null!==r(c))g=!0,N(x);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,v(k),k=-1),p=!0;var s=f;try{for(_(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),_(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,I=null,k=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function P(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?S():(E=!1,I=null)}}else E=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,S=function(){D.postMessage(null)}}else S=function(){y(P,0)};function N(e){I=e,E||(E=!0,S())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(k),k=-1):m=!0,O(w,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,N(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>ii,SDK_VERSION:()=>Bs,_DEFAULT_ENTRY_NAME:()=>ks,_addComponent:()=>Rs,_addOrOverwriteComponent:()=>Ds,_apps:()=>Cs,_clearComponents:()=>js,_components:()=>Ps,_getProvider:()=>Os,_isFirebaseApp:()=>Ls,_isFirebaseServerApp:()=>Fs,_registerComponent:()=>Ns,_removeServiceInstance:()=>Ms,_serverApps:()=>As,deleteApp:()=>Ks,getApp:()=>Hs,getApps:()=>Gs,initializeApp:()=>qs,initializeServerApp:()=>Ws,onLog:()=>Ys,registerVersion:()=>Qs,setLogLevel:()=>Xs});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,g=null,m=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-m;m=e,g&&g({action:h,location:_.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let _={get action(){return h},get location(){return e(s,a)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),g=e,()=>{s.removeEventListener(c,v),g=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(_.location,e,n);r&&r(i,e),m=y()+1;let l=d(i,m),c=_.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&g&&g({action:h,location:_.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(_.location,e,n);r&&r(i,e),m=y();let s=d(i,m),l=_.createHref(i);a.replaceState(s,"",l),o&&g&&g({action:h,location:_.location,delta:0})},go:e=>a.go(e)};return _}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=R(r);s=A(i[o],e)}return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:C(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=_(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,x=3,S=2,E=1,I=10,k=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=k),t&&(r+=S),n.filter((e=>!T(e))).reduce(((e,t)=>e+(w.test(t)?x:""===t?E:I)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:F([i,c.pathname]),pathnameBase:j(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return s}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const H=r.createContext(null);const G=r.createContext(null);const K=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function J(){return null!=r.useContext(Q)}function $(){return J()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=he(le.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return i}():function(){J()||u(!1);let e=r.useContext(H),{basename:t,future:n,navigator:i}=r.useContext(K),{matches:s}=r.useContext(Y),{pathname:o}=$(),a=JSON.stringify(M(s,n.v7_relativeSplatPath)),l=r.useRef(!1);Z((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=L(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}function te(e,n,i,s){J()||u(!1);let{navigator:o}=r.useContext(K),{matches:a}=r.useContext(Y),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=$();if(n){var p;let e="string"===typeof n?g(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let m=d.pathname||"/",y=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let _=oe(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&_?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},_):_}function ne(){let e=function(){var e;let t=r.useContext(X),n=ue(le.UseRouteError),i=he(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||re,c&&(h<0&&0===s?(p="route-fallback",!1||de[p]||(de[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(H);return t||u(!1),t}function ue(e){let t=r.useContext(G);return t||u(!1),t}function he(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const de={};i.startTransition;function fe(e){u(!1)}function pe(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;J()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,b=r.useMemo((()=>{let e=D(f,h);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}}),[h,f,p,m,y,v,o]);return null==b?null:r.createElement(K.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:b}))}function ge(e){let{children:t,location:n}=e;return te(me(t),n)}new Promise((()=>{}));r.Component;function me(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,me(e.props.children,s));e.type!==fe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=me(e.props.children,s)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(zL){}new Map;const ye=i.startTransition;a.flushSync,i.useId;function ve(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&ye?ye((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(pe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var be,_e;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(be||(be={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(_e||(_e={}));function we(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xe.apply(this,arguments)};function Se(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Ee(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ie=n(324),ke=n.n(Ie),Te="-ms-",Ce="-moz-",Ae="-webkit-",Pe="comm",Re="rule",De="decl",Ne="@import",Oe="@keyframes",Me="@layer",Le=Math.abs,Fe=String.fromCharCode,je=Object.assign;function Ue(e){return e.trim()}function Ve(e,t){return(e=t.exec(e))?e[0]:e}function ze(e,t,n){return e.replace(t,n)}function Be(e,t,n){return e.indexOf(t,n)}function qe(e,t){return 0|e.charCodeAt(t)}function We(e,t,n){return e.slice(t,n)}function He(e){return e.length}function Ge(e){return e.length}function Ke(e,t){return t.push(e),e}function Qe(e,t){return e.filter((function(e){return!Ve(e,t)}))}var Ye=1,Xe=1,Je=0,$e=0,Ze=0,et="";function tt(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Ye,column:Xe,length:o,return:"",siblings:a}}function nt(e,t){return je(tt("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function rt(e){for(;e.root;)e=nt(e.root,{children:[e]});Ke(e,e.siblings)}function it(){return Ze=$e>0?qe(et,--$e):0,Xe--,10===Ze&&(Xe=1,Ye--),Ze}function st(){return Ze=$e<Je?qe(et,$e++):0,Xe++,10===Ze&&(Xe=1,Ye++),Ze}function ot(){return qe(et,$e)}function at(){return $e}function lt(e,t){return We(et,e,t)}function ct(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ut(e){return Ye=Xe=1,Je=He(et=e),$e=0,[]}function ht(e){return et="",e}function dt(e){return Ue(lt($e-1,gt(91===e?e+2:40===e?e+1:e)))}function ft(e){for(;(Ze=ot())&&Ze<33;)st();return ct(e)>2||ct(Ze)>3?"":" "}function pt(e,t){for(;--t&&st()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return lt(e,at()+(t<6&&32==ot()&&32==st()))}function gt(e){for(;st();)switch(Ze){case e:return $e;case 34:case 39:34!==e&&39!==e&&gt(Ze);break;case 40:41===e&&gt(e);break;case 92:st()}return $e}function mt(e,t){for(;st()&&e+Ze!==57&&(e+Ze!==84||47!==ot()););return"/*"+lt(t,$e-1)+"*"+Fe(47===e?e:st())}function yt(e){for(;!ct(ot());)st();return lt(e,$e)}function vt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function bt(e,t,n,r){switch(e.type){case Me:if(e.children.length)break;case Ne:case De:return e.return=e.return||e.value;case Pe:return"";case Oe:return e.return=e.value+"{"+vt(e.children,r)+"}";case Re:if(!He(e.value=e.props.join(",")))return""}return He(n=vt(e.children,r))?e.return=e.value+"{"+n+"}":""}function _t(e,t,n){switch(function(e,t){return 45^qe(e,0)?(((t<<2^qe(e,0))<<2^qe(e,1))<<2^qe(e,2))<<2^qe(e,3):0}(e,t)){case 5103:return Ae+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ae+e+e;case 4789:return Ce+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ae+e+Ce+e+Te+e+e;case 5936:switch(qe(e,t+11)){case 114:return Ae+e+Te+ze(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ae+e+Te+ze(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ae+e+Te+ze(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ae+e+Te+e+e;case 6165:return Ae+e+Te+"flex-"+e+e;case 5187:return Ae+e+ze(e,/(\w+).+(:[^]+)/,Ae+"box-$1$2"+Te+"flex-$1$2")+e;case 5443:return Ae+e+Te+"flex-item-"+ze(e,/flex-|-self/g,"")+(Ve(e,/flex-|baseline/)?"":Te+"grid-row-"+ze(e,/flex-|-self/g,""))+e;case 4675:return Ae+e+Te+"flex-line-pack"+ze(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ae+e+Te+ze(e,"shrink","negative")+e;case 5292:return Ae+e+Te+ze(e,"basis","preferred-size")+e;case 6060:return Ae+"box-"+ze(e,"-grow","")+Ae+e+Te+ze(e,"grow","positive")+e;case 4554:return Ae+ze(e,/([^-])(transform)/g,"$1"+Ae+"$2")+e;case 6187:return ze(ze(ze(e,/(zoom-|grab)/,Ae+"$1"),/(image-set)/,Ae+"$1"),e,"")+e;case 5495:case 3959:return ze(e,/(image-set\([^]*)/,Ae+"$1$`$1");case 4968:return ze(ze(e,/(.+:)(flex-)?(.*)/,Ae+"box-pack:$3"+Te+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ae+e+e;case 4200:if(!Ve(e,/flex-|baseline/))return Te+"grid-column-align"+We(e,t)+e;break;case 2592:case 3360:return Te+ze(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Ve(e.props,/grid-\w+-end/)}))?~Be(e+(n=n[t].value),"span",0)?e:Te+ze(e,"-start","")+e+Te+"grid-row-span:"+(~Be(n,"span",0)?Ve(n,/\d+/):+Ve(n,/\d+/)-+Ve(e,/\d+/))+";":Te+ze(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Ve(e.props,/grid-\w+-start/)}))?e:Te+ze(ze(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ze(e,/(.+)-inline(.+)/,Ae+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(He(e)-1-t>6)switch(qe(e,t+1)){case 109:if(45!==qe(e,t+4))break;case 102:return ze(e,/(.+:)(.+)-([^]+)/,"$1"+Ae+"$2-$3$1"+Ce+(108==qe(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Be(e,"stretch",0)?_t(ze(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ze(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return Te+n+":"+r+a+(i?Te+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===qe(e,t+6))return ze(e,":",":"+Ae)+e;break;case 6444:switch(qe(e,45===qe(e,14)?18:11)){case 120:return ze(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ae+(45===qe(e,14)?"inline-":"")+"box$3$1"+Ae+"$2$3$1"+Te+"$2box$3")+e;case 100:return ze(e,":",":"+Te)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ze(e,"scroll-","scroll-snap-")+e}return e}function wt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case De:return void(e.return=_t(e.value,e.length,n));case Oe:return vt([nt(e,{value:ze(e.value,"@","@"+Ae)})],r);case Re:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Ve(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":rt(nt(e,{props:[ze(t,/:(read-\w+)/,":"+Ce+"$1")]})),rt(nt(e,{props:[t]})),je(e,{props:Qe(n,r)});break;case"::placeholder":rt(nt(e,{props:[ze(t,/:(plac\w+)/,":"+Ae+"input-$1")]})),rt(nt(e,{props:[ze(t,/:(plac\w+)/,":"+Ce+"$1")]})),rt(nt(e,{props:[ze(t,/:(plac\w+)/,Te+"input-$1")]})),rt(nt(e,{props:[t]})),je(e,{props:Qe(n,r)})}return""}))}}function xt(e){return ht(St("",null,null,null,[""],e=ut(e),0,[0],e))}function St(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,m=1,y=1,v=0,b="",_=i,w=s,x=r,S=b;m;)switch(p=v,v=st()){case 40:if(108!=p&&58==qe(S,h-1)){-1!=Be(S+=ze(dt(v),"&","&\f"),"&\f",Le(c?a[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:S+=dt(v);break;case 9:case 10:case 13:case 32:S+=ft(p);break;case 92:S+=pt(at()-1,7);continue;case 47:switch(ot()){case 42:case 47:Ke(It(mt(st(),at()),t,n,l),l);break;default:S+="/"}break;case 123*g:a[c++]=He(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(S=ze(S,/\f/g,"")),f>0&&He(S)-h&&Ke(f>32?kt(S+";",r,n,h-1,l):kt(ze(S," ","")+";",r,n,h-2,l),l);break;case 59:S+=";";default:if(Ke(x=Et(S,t,n,c,u,i,a,b,_=[],w=[],h,s),s),123===v)if(0===u)St(S,t,x,x,_,s,h,a,w);else switch(99===d&&110===qe(S,3)?100:d){case 100:case 108:case 109:case 115:St(e,x,x,r&&Ke(Et(e,x,x,0,0,i,a,b,i,_=[],h,w),w),i,w,h,a,r?_:w);break;default:St(S,x,x,x,[""],w,0,a,w)}}c=u=f=0,g=y=1,b=S="",h=o;break;case 58:h=1+He(S),f=p;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==it())continue;switch(S+=Fe(v),v*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(He(S)-1)*y,y=1;break;case 64:45===ot()&&(S+=dt(st())),d=ot(),u=h=He(b=S+=yt(at())),v++;break;case 45:45===p&&2==He(S)&&(g=0)}}return s}function Et(e,t,n,r,i,s,o,a,l,c,u,h){for(var d=i-1,f=0===i?s:[""],p=Ge(f),g=0,m=0,y=0;g<r;++g)for(var v=0,b=We(e,d+1,d=Le(m=o[g])),_=e;v<p;++v)(_=Ue(m>0?f[v]+" "+b:ze(b,/&\f/g,f[v])))&&(l[y++]=_);return tt(e,t,n,0===i?Re:a,l,c,u,h)}function It(e,t,n,r){return tt(e,t,n,Pe,Fe(Ze),We(e,2,-2),0,r)}function kt(e,t,n,r,i){return tt(e,t,n,De,We(e,0,r),We(e,r+1,-1),r,i)}var Tt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ct="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.SC_ATTR)||"data-styled",At="active",Pt="data-styled-version",Rt="6.1.11",Dt="/*!sc*/\n",Nt="undefined"!=typeof window&&"HTMLElement"in window,Ot=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.SC_DISABLE_SPEEDY)),Mt=(new Set,Object.freeze([])),Lt=Object.freeze({});function Ft(e,t,n){return void 0===n&&(n=Lt),e.theme!==n.theme&&e.theme||t||n.theme}var jt=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ut=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Vt=/(^-|-$)/g;function zt(e){return e.replace(Ut,"-").replace(Vt,"")}var Bt=/(a)(d)/gi,qt=52,Wt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ht(e){var t,n="";for(t=Math.abs(e);t>qt;t=t/qt|0)n=Wt(t%qt)+n;return(Wt(t%qt)+n).replace(Bt,"$1-$2")}var Gt,Kt=5381,Qt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Yt=function(e){return Qt(Kt,e)};function Xt(e){return Ht(Yt(e)>>>0)}function Jt(e){return e.displayName||e.name||"Component"}function $t(e){return"string"==typeof e&&!0}var Zt="function"==typeof Symbol&&Symbol.for,en=Zt?Symbol.for("react.memo"):60115,tn=Zt?Symbol.for("react.forward_ref"):60112,nn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},rn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},on=((Gt={})[tn]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gt[en]=sn,Gt);function an(e){return("type"in(t=e)&&t.type.$$typeof)===en?sn:"$$typeof"in e?on[e.$$typeof]:nn;var t}var ln=Object.defineProperty,cn=Object.getOwnPropertyNames,un=Object.getOwnPropertySymbols,hn=Object.getOwnPropertyDescriptor,dn=Object.getPrototypeOf,fn=Object.prototype;function pn(e,t,n){if("string"!=typeof t){if(fn){var r=dn(t);r&&r!==fn&&pn(e,r,n)}var i=cn(t);un&&(i=i.concat(un(t)));for(var s=an(e),o=an(t),a=0;a<i.length;++a){var l=i[a];if(!(l in rn||n&&n[l]||o&&l in o||s&&l in s)){var c=hn(t,l);try{ln(e,l,c)}catch(e){}}}}return e}function gn(e){return"function"==typeof e}function mn(e){return"object"==typeof e&&"styledComponentId"in e}function yn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function vn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function bn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function _n(e,t,n){if(void 0===n&&(n=!1),!n&&!bn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=_n(e[r],t[r]);else if(bn(t))for(var r in t)e[r]=_n(e[r],t[r]);return e}function wn(e,t){Object.defineProperty(e,"toString",{value:t})}function xn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Sn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw xn(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Dt);return t},e}(),En=new Map,In=new Map,kn=1,Tn=function(e){if(En.has(e))return En.get(e);for(;In.has(kn);)kn++;var t=kn++;return En.set(e,t),In.set(t,e),t},Cn=function(e,t){kn=t+1,En.set(e,t),In.set(t,e)},An="style[".concat(Ct,"][").concat(Pt,'="').concat(Rt,'"]'),Pn=new RegExp("^".concat(Ct,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Rn=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},Dn=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Dt),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match(Pn);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Cn(u,c),Rn(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}};function Nn(){return n.nc}var On=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ct,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(Ct,At),r.setAttribute(Pt,Rt);var o=Nn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},Mn=function(){function e(e){this.element=On(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw xn(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ln=function(){function e(e){this.element=On(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Fn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),jn=Nt,Un={isServer:!Nt,useCSSOMInjection:!Ot},Vn=function(){function e(e,t,n){void 0===e&&(e=Lt),void 0===t&&(t={});var r=this;this.options=xe(xe({},Un),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Nt&&jn&&(jn=!1,function(e){for(var t=document.querySelectorAll(An),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Ct)!==At&&(Dn(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),wn(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return In.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(Ct,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==s&&s.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(l,'"}').concat(Dt)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return Tn(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(xe(xe({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Fn(n):t?new Mn(n):new Ln(n)}(this.options),new Sn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Tn(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Tn(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Tn(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),zn=/&/g,Bn=/^\s*\/\/.*$/gm;function qn(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=qn(e.children,t)),e}))}function Wn(e){var t,n,r,i=void 0===e?Lt:e,s=i.options,o=void 0===s?Lt:s,a=i.plugins,l=void 0===a?Mt:a,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===Re&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(zn,n).replace(r,c))})),o.prefix&&u.push(wt),u.push(bt);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Bn,""),c=xt(s||i?"".concat(s," ").concat(i," { ").concat(l," }"):l);o.namespace&&(c=qn(c,o.namespace));var h=[];return vt(c,function(e){var t=Ge(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat(function(e){return function(t){t.root||(t=t.return)&&e(t)}}((function(e){return h.push(e)}))))),h};return h.hash=l.length?l.reduce((function(e,t){return t.name||xn(15),Qt(e,t.name)}),Kt).toString():"",h}var Hn=new Vn,Gn=Wn(),Kn=r.createContext({shouldForwardProp:void 0,styleSheet:Hn,stylis:Gn}),Qn=(Kn.Consumer,r.createContext(void 0));function Yn(){return(0,r.useContext)(Kn)}function Xn(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],s=Yn().styleSheet,o=(0,r.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,r.useMemo)((function(){return Wn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)((function(){ke()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return r.createElement(Kn.Provider,{value:l},r.createElement(Qn.Provider,{value:a},e.children))}var Jn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Gn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,wn(this,(function(){throw xn(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Gn),this.name+e.hash},e}(),$n=function(e){return e>="A"&&e<="Z"};function Zn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;$n(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var er=function(e){return null==e||!1===e||""===e},tr=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!er(s)&&(Array.isArray(s)&&s.isCss||gn(s)?r.push("".concat(Zn(i),":"),s,";"):bn(s)?r.push.apply(r,Ee(Ee(["".concat(i," {")],tr(s),!1),["}"],!1)):r.push("".concat(Zn(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Tt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function nr(e,t,n,r){return er(e)?[]:mn(e)?[".".concat(e.styledComponentId)]:gn(e)?!gn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:nr(e(t),t,n,r):e instanceof Jn?n?(e.inject(n,r),[e.getName(r)]):[e]:bn(e)?tr(e):Array.isArray(e)?Array.prototype.concat.apply(Mt,e.map((function(e){return nr(e,t,n,r)}))):[e.toString()];var i}function rr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(gn(n)&&!mn(n))return!1}return!0}var ir=Yt(Rt),sr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&rr(e),this.componentId=t,this.baseHash=Qt(ir,t),this.baseStyle=n,Vn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=yn(r,this.staticRulesId);else{var i=vn(nr(this.rules,e,t,n)),s=Ht(Qt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=yn(r,s),this.staticRulesId=s}else{for(var a=Qt(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=vn(nr(u,e,t,n));a=Qt(a,h+c),l+=h}}if(l){var d=Ht(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(l,".".concat(d),void 0,this.componentId)),r=yn(r,d)}}return r},e}(),or=r.createContext(void 0);or.Consumer;var ar={};new Set;function lr(e,t,n){var i=mn(e),s=e,o=!$t(e),a=t.attrs,l=void 0===a?Mt:a,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":zt(e);ar[n]=(ar[n]||0)+1;var r="".concat(n,"-").concat(Xt(Rt+n+ar[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):c,h=t.displayName,d=void 0===h?function(e){return $t(e)?"styled.".concat(e):"Styled(".concat(Jt(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(zt(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&s.attrs?s.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(i&&s.shouldForwardProp){var m=s.shouldForwardProp;if(t.shouldForwardProp){var y=t.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var v=new sr(n,f,i?s.componentStyle:void 0);function b(e,t){return function(e,t,n){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=r.useContext(or),h=Yn(),d=e.shouldForwardProp||h.shouldForwardProp,f=Ft(t,u,o)||Lt,p=function(e,t,n){for(var r,i=xe(xe({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=gn(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?yn(i[a],o[a]):"style"===a?xe(xe({},i[a]),o[a]):o[a]}return t.className&&(i.className=yn(i.className,t.className)),i}(i,t,f),g=p.as||c,m={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?m.as=p.forwardedAs:d&&!d(y,g)||(m[y]=p[y]));var v=function(e,t){var n=Yn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),b=yn(a,l);return v&&(b+=" "+v),p.className&&(b+=" "+p.className),m[$t(g)&&!jt.has(g)?"class":"className"]=b,m.ref=n,(0,r.createElement)(g,m)}(_,e,t)}b.displayName=d;var _=r.forwardRef(b);return _.attrs=p,_.componentStyle=v,_.displayName=d,_.shouldForwardProp=g,_.foldedComponentIds=i?yn(s.foldedComponentIds,s.styledComponentId):"",_.styledComponentId=f,_.target=i?s.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)_n(e,i[r],!0);return e}({},s.defaultProps,e):e}}),wn(_,(function(){return".".concat(_.styledComponentId)})),o&&pn(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function cr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var ur=function(e){return Object.assign(e,{isCss:!0})};function hr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(gn(e)||bn(e))return ur(nr(cr(Mt,Ee([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?nr(r):ur(nr(cr(r,t)))}function dr(e,t,n){if(void 0===n&&(n=Lt),!t)throw xn(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,hr.apply(void 0,Ee([r],i,!1)))};return r.attrs=function(r){return dr(e,t,xe(xe({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return dr(e,t,xe(xe({},n),r))},r}var fr=function(e){return dr(lr,e)},pr=fr;jt.forEach((function(e){pr[e]=fr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=rr(e),Vn.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(vn(nr(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Vn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function gr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=vn(hr.apply(void 0,Ee([e],t,!1))),i=Xt(r);return new Jn(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=Nn(),r=vn([n&&'nonce="'.concat(n,'"'),"".concat(Ct,'="true"'),"".concat(Pt,'="').concat(Rt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw xn(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw xn(2);var n=((t={})[Ct]="",t[Pt]=Rt,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=Nn();return i&&(n.nonce=i),[r.createElement("style",xe({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Vn({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw xn(2);return r.createElement(Xn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw xn(3)}})(),"__sc-".concat(Ct,"__");var mr,yr=n(579);const vr=pr.p(mr||(mr=we(["\n    font-size: 32px;\n    font-weight:600;\n    color:white;\n"])));const br=function(e){const{text:t}=e;return(0,yr.jsx)(vr,{children:t})};var _r;const wr=pr.p(_r||(_r=we(["\n    font-size: 20px;\n    font-weight:400;\n    line-height:1.4;\n    color:white;\n\n    margin-top:",";\n    margin-bottom:",";\n"])),(e=>e.mt),(e=>e.mb));const xr=function(e){const{text:t,mt:n,mb:r}=e;return(0,yr.jsx)(wr,{mt:n,mb:r,children:t})};var Sr,Er,Ir;const kr=pr.div(Sr||(Sr=we(["\n    width: 300px;\n    height: 300px;\n    background-color:",";\n    border-radius:36px;\n    box-shadow: 4px 4px 16px rgba(0, 0, 0, 0.15);\n    transition: .3s;\n    margin-right:100px;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n\n    cursor: pointer;\n\n    &:hover {\n        transform:scale(1.03);\n    }\n\n    &:last-child {\n        margin-right:0px;\n    }\n"])),(e=>e.bc||"white")),Tr=pr.p(Er||(Er=we(["\n    font-size:32px;\n    font-weight: 700;\n    color:",";\n\n    margin-bottom:48px;\n"])),(e=>e.color||"#333")),Cr=pr.img(Ir||(Ir=we(["\n    width:120px;\n    height:120px;\n"])));const Ar=function(e){const{serviceName:t,serviceIcon:n,navigateLink:r,bc:i,color:s}=e,o=ee();return(0,yr.jsxs)(kr,{bc:i,onClick:()=>{o("/".concat(r))},children:[(0,yr.jsx)(Tr,{color:s,children:t}),(0,yr.jsx)(Cr,{src:n})]})},Pr=n.p+"static/media/_DailyWrite.97134e0ce7a47ddd5aea.png",Rr=n.p+"static/media/_DailyManage.f4a01efc8eb0fdf26eb6.png";var Dr,Nr;const Or=pr.div(Dr||(Dr=we(["\n    width:100%;\n    height:100vh;\n    padding:0px 11.54%;\n    background-color:var(--main-bcColor);\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n"]))),Mr=pr.div(Nr||(Nr=we(["\n    display:flex;\n    justify-content:space-between;\n    margin-bottom:80px;\n"])));const Lr=function(){return(0,yr.jsxs)(Or,{children:[(0,yr.jsx)(br,{text:"\uc624\ub298 \ud558\ub8e8\ub294 \uc5b4\ub560\ub098\uc694? \ud558\ub8e8\ub97c \uae30\ub85d\ud574\ubcf4\uc138\uc694."}),(0,yr.jsx)(xr,{text:"\ud574\ub2f9 \ud504\ub85c\ud1a0\ud0c0\uc785\uc740 \uc804\uc2dc\ud68c \uccb4\ud5d8\uc744 \uc704\ud574 \uad6c\ud604\ub410\uc2b5\ub2c8\ub2e4.",mt:"8px",mb:"80px"}),(0,yr.jsxs)(Mr,{children:[(0,yr.jsx)(Ar,{serviceName:"\uc77c\uae30\uc791\uc131",serviceIcon:Pr,navigateLink:"write"}),(0,yr.jsx)(Ar,{color:"white",bc:"#2B3034",serviceName:"\uc77c\uae30\uad00\ub9ac",serviceIcon:Rr,navigateLink:"viewDaily"})]})]})},Fr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},jr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ur;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ur extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vr=function(e){return function(e){const t=Fr(e);return jr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},zr=function(e){try{return jr.decodeString(e,!0)}catch(zL){console.error("base64Decode failed: ",zL)}return null};function Br(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Br(e[n],t[n]));return e}const qr=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Wr=()=>{try{return qr()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:878480848725:web:5fe52003678ec98794e1dc",REACT_APP_FB_API_KEY:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",REACT_APP_FB_AUTH_DOMAIN:"seniorproject-1d18b.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"878480848725",REACT_APP_FB_PROJECT_ID:"seniorproject-1d18b",REACT_APP_FB_STORAGE_BUCKET:"seniorproject-1d18b.appspot.com",REACT_APP_OPENAI_API_KEY:"sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(zL){return}const t=e&&zr(e[1]);return t&&JSON.parse(t)})()}catch(zL){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(zL))}},Hr=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Wr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Gr=()=>{var e;return null===(e=Wr())||void 0===e?void 0:e.config};class Kr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Qr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vr(JSON.stringify({alg:"none",type:"JWT"})),Vr(JSON.stringify(s)),""].join(".")}function Yr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xr(){var e;const t=null===(e=Wr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(zL){return!1}}function Jr(){return"undefined"!==typeof window||$r()}function $r(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Zr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ei(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ti(){const e=Yr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ni(){return!Xr()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ri(){try{return"object"===typeof indexedDB}catch(zL){return!1}}class ii extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,si.prototype.create)}}class si{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(oi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ii(n,s,t)}}const oi=/\{\$([^}]+)}/g;function ai(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function li(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ci(n)&&ci(s)){if(!li(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ci(e){return null!==e&&"object"===typeof e}function ui(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function hi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function di(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function fi(e,t){const n=new pi(e,t);return n.subscribe.bind(n)}class pi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=gi),void 0===r.error&&(r.error=gi),void 0===r.complete&&(r.complete=gi);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(zL){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(zL){"undefined"!==typeof console&&console.error&&console.error(zL)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function gi(){}function mi(e){return e&&e._delegate?e._delegate:e}class yi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vi="[DEFAULT]";class bi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Kr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(zL){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(zL){if(r)return null;throw zL}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch(zL){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(zL){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_i(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function _i(e){return e===vi?void 0:e}class wi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const xi=[];var Si;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Si||(Si={}));const Ei={debug:Si.DEBUG,verbose:Si.VERBOSE,info:Si.INFO,warn:Si.WARN,error:Si.ERROR,silent:Si.SILENT},Ii=Si.INFO,ki={[Si.DEBUG]:"log",[Si.VERBOSE]:"log",[Si.INFO]:"info",[Si.WARN]:"warn",[Si.ERROR]:"error"},Ti=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ki[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Ci{constructor(e){this.name=e,this._logLevel=Ii,this._logHandler=Ti,this._userLogHandler=null,xi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Si))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ei[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.DEBUG,...t),this._logHandler(this,Si.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.VERBOSE,...t),this._logHandler(this,Si.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.INFO,...t),this._logHandler(this,Si.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.WARN,...t),this._logHandler(this,Si.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.ERROR,...t),this._logHandler(this,Si.ERROR,...t)}}function Ai(e){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(e)}function Pi(e){var t=function(e,t){if("object"!=Ai(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ai(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ai(t)?t:t+""}function Ri(e,t,n){return(t=Pi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Ri(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oi=(e,t)=>t.some((t=>e instanceof t));let Mi,Li;const Fi=new WeakMap,ji=new WeakMap,Ui=new WeakMap,Vi=new WeakMap,zi=new WeakMap;let Bi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ji.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ui.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function qi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Li||(Li=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Gi(this),n),Hi(Fi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hi(e.apply(Gi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Gi(this),t,...r);return Ui.set(s,t.sort?t.sort():[t]),Hi(s)}}function Wi(e){return"function"===typeof e?qi(e):(e instanceof IDBTransaction&&function(e){if(ji.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ji.set(e,t)}(e),Oi(e,Mi||(Mi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Bi):e)}function Hi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Hi(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Fi.set(t,e)})).catch((()=>{})),zi.set(t,e),t}(e);if(Vi.has(e))return Vi.get(e);const t=Wi(e);return t!==e&&(Vi.set(e,t),zi.set(t,e)),t}const Gi=e=>zi.get(e);const Ki=["get","getKey","getAll","getAllKeys","count"],Qi=["put","add","delete","clear"],Yi=new Map;function Xi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Yi.get(t))return Yi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Qi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ki.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Yi.set(t,s),s}!function(e){Bi=e(Bi)}((e=>Ni(Ni({},e),{},{get:(t,n,r)=>Xi(t,n)||e.get(t,n,r),has:(t,n)=>!!Xi(t,n)||e.has(t,n)})));class Ji{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const $i="@firebase/app",Zi="0.10.7",es=new Ci("@firebase/app"),ts="@firebase/app-compat",ns="@firebase/analytics-compat",rs="@firebase/analytics",is="@firebase/app-check-compat",ss="@firebase/app-check",os="@firebase/auth",as="@firebase/auth-compat",ls="@firebase/database",cs="@firebase/database-compat",us="@firebase/functions",hs="@firebase/functions-compat",ds="@firebase/installations",fs="@firebase/installations-compat",ps="@firebase/messaging",gs="@firebase/messaging-compat",ms="@firebase/performance",ys="@firebase/performance-compat",vs="@firebase/remote-config",bs="@firebase/remote-config-compat",_s="@firebase/storage",ws="@firebase/storage-compat",xs="@firebase/firestore",Ss="@firebase/vertexai-preview",Es="@firebase/firestore-compat",Is="firebase",ks="[DEFAULT]",Ts={[$i]:"fire-core",[ts]:"fire-core-compat",[rs]:"fire-analytics",[ns]:"fire-analytics-compat",[ss]:"fire-app-check",[is]:"fire-app-check-compat",[os]:"fire-auth",[as]:"fire-auth-compat",[ls]:"fire-rtdb",[cs]:"fire-rtdb-compat",[us]:"fire-fn",[hs]:"fire-fn-compat",[ds]:"fire-iid",[fs]:"fire-iid-compat",[ps]:"fire-fcm",[gs]:"fire-fcm-compat",[ms]:"fire-perf",[ys]:"fire-perf-compat",[vs]:"fire-rc",[bs]:"fire-rc-compat",[_s]:"fire-gcs",[ws]:"fire-gcs-compat",[xs]:"fire-fst",[Es]:"fire-fst-compat",[Ss]:"fire-vertex","fire-js":"fire-js",[Is]:"fire-js-all"},Cs=new Map,As=new Map,Ps=new Map;function Rs(e,t){try{e.container.addComponent(t)}catch(zL){es.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),zL)}}function Ds(e,t){e.container.addOrOverwriteComponent(t)}function Ns(e){const t=e.name;if(Ps.has(t))return es.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ps.set(t,e);for(const n of Cs.values())Rs(n,e);for(const n of As.values())Rs(n,e);return!0}function Os(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ks;Os(e,t).clearInstance(n)}function Ls(e){return void 0!==e.options}function Fs(e){return void 0!==e.settings}function js(){Ps.clear()}const Us=new si("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Vs{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}class zs extends Vs{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Qs($i,Zi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ks(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Us.create("server-app-deleted")}}const Bs="10.12.4";function qs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ks,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Us.create("bad-app-name",{appName:String(i)});if(n||(n=Gr()),!n)throw Us.create("no-options");const s=Cs.get(i);if(s){if(li(n,s.options)&&li(r,s.config))return s;throw Us.create("duplicate-app",{appName:i})}const o=new wi(i);for(const l of Ps.values())o.addComponent(l);const a=new Vs(n,r,o);return Cs.set(i,a),a}function Ws(e,t){if(Jr()&&!$r())throw Us.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Ls(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Us.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=As.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new wi(i);for(const c of Ps.values())a.addComponent(c);const l=new zs(n,t,i,a);return As.set(i,l),l}function Hs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ks;const t=Cs.get(e);if(!t&&e===ks&&Gr())return qs();if(!t)throw Us.create("no-app",{appName:e});return t}function Gs(){return Array.from(Cs.values())}async function Ks(e){let t=!1;const n=e.name;if(Cs.has(n))t=!0,Cs.delete(n);else if(As.has(n)){e.decRefCount()<=0&&(As.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Qs(e,t,n){var r;let i=null!==(r=Ts[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void es.warn(e.join(" "))}Ns(new yi("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ys(e,t){if(null!==e&&"function"!==typeof e)throw Us.create("invalid-log-argument");!function(e,t){for(const n of xi){let r=null;t&&t.level&&(r=Ei[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Si[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Xs(e){var t;t=e,xi.forEach((e=>{e.setLogLevel(t)}))}const Js="firebase-heartbeat-database",$s=1,Zs="firebase-heartbeat-store";let eo=null;function to(){return eo||(eo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Hi(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Hi(o.result),e.oldVersion,e.newVersion,Hi(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Js,$s,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zs)}catch(zL){console.warn(zL)}}}).catch((e=>{throw Us.create("idb-open",{originalErrorMessage:e.message})}))),eo}async function no(e,t){try{const n=(await to()).transaction(Zs,"readwrite"),r=n.objectStore(Zs);await r.put(t,ro(e)),await n.done}catch(zL){if(zL instanceof ii)es.warn(zL.message);else{const t=Us.create("idb-set",{originalErrorMessage:null===zL||void 0===zL?void 0:zL.message});es.warn(t.message)}}}function ro(e){return"".concat(e.name,"!").concat(e.options.appId)}class io{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=so();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=so(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ao(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ao(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Vr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function so(){return(new Date).toISOString().substring(0,10)}class oo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ri()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await to()).transaction(Zs),n=await t.objectStore(Zs).get(ro(e));return await t.done,n}catch(zL){if(zL instanceof ii)es.warn(zL.message);else{const t=Us.create("idb-get",{originalErrorMessage:null===zL||void 0===zL?void 0:zL.message});es.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return no(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return no(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ao(e){return Vr(JSON.stringify({version:2,heartbeats:e})).length}var lo;lo="",Ns(new yi("platform-logger",(e=>new Ji(e)),"PRIVATE")),Ns(new yi("heartbeat",(e=>new io(e)),"PRIVATE")),Qs($i,Zi,lo),Qs($i,Zi,"esm2017"),Qs("fire-js","");class co{constructor(e,t){this._delegate=e,this.firebase=t,Rs(e,new yi("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ks(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ks;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ks;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Rs(this._delegate,e)}_addOrOverwriteComponent(e){Ds(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const uo=new si("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ho=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=qs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ai(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Qs,setLogLevel:Xs,onLog:Ys,apps:null,SDK_VERSION:Bs,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ns(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw uo.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Br(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ai(n,e=e||ks))throw uo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(co);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Br(n,e)},createSubscribe:fi,ErrorFactory:si,deepExtend:Br}),n}(),fo=new Ci("@firebase/app-compat");if(Jr()&&void 0!==self.firebase){fo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const po=ho;!function(e){Qs("@firebase/app-compat","0.2.37",e)}();po.registerVersion("firebase","10.12.4","app-compat");const go={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},mo="EMAIL_SIGNIN",yo="PASSWORD_RESET",vo="RECOVER_EMAIL",bo="REVERT_SECOND_FACTOR_ADDITION",_o="VERIFY_AND_CHANGE_EMAIL",wo="VERIFY_EMAIL";function xo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const So=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Eo=xo,Io=new si("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ko=new Ci("@firebase/auth");function To(e){if(ko.logLevel<=Si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ko.error("Auth (".concat(Bs,"): ").concat(e),...n)}}function Co(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw No(e,...n)}function Ao(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return No(e,...n)}function Po(e,t,n){const r=Object.assign(Object.assign({},Eo()),{[t]:n});return new si("auth","Firebase",r).create(t,{appName:e.name})}function Ro(e){return Po(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Do(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Co(e,"argument-error"),Po(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function No(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Io.create(e,...n)}function Oo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw No(t,...r)}}function Mo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw To(t),new Error(t)}function Lo(e,t){e||Mo(t)}function Fo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function jo(){return"http:"===Uo()||"https:"===Uo()}function Uo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Vo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lo(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())||ei()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(jo()||Zr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function zo(e,t){Lo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Bo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Mo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Mo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Mo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wo=new Vo(3e4,6e4);function Ho(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Go(e,t,n,r){return Ko(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ui(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Bo.fetch()(Yo(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ko(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},qo),t);try{const t=new Jo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw $o(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw $o(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw $o(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw $o(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Po(e,a,o);Co(e,a)}}catch(zL){if(zL instanceof ii)throw zL;Co(e,"network-request-failed",{message:String(zL)})}}async function Qo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Go(e,t,n,r,i);return"mfaPendingCredential"in s&&Co(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Yo(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?zo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Xo(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ao(this.auth,"network-request-failed"))),Wo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function $o(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ao(e,t,r);return i.customData._tokenResponse=n,i}function Zo(e){return void 0!==e&&void 0!==e.getResponse}function ea(e){return void 0!==e&&void 0!==e.enterprise}class ta{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Xo(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function na(e,t){return Go(e,"GET","/v2/recaptchaConfig",Ho(e,t))}async function ra(e,t){return Go(e,"POST","/v1/accounts:lookup",t)}function ia(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(zL){}}function sa(e){return 1e3*Number(e)}function oa(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return To("JWT malformed, contained fewer than 3 sections"),null;try{const e=zr(n);return e?JSON.parse(e):(To("Failed to decode base64 JWT payload"),null)}catch(zL){return To("Caught error parsing JWT payload as JSON",null===zL||void 0===zL?void 0:zL.toString()),null}}function aa(e){const t=oa(e);return Oo(t,"internal-error"),Oo("undefined"!==typeof t.exp,"internal-error"),Oo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function la(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(zL){throw zL instanceof ii&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(zL)&&e.auth.currentUser===e&&await e.auth.signOut(),zL}}class ca{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(zL){return void((null===zL||void 0===zL?void 0:zL.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ua{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ha(e){var t;const n=e.auth,r=await e.getIdToken(),i=await la(e,ra(n,{idToken:r}));Oo(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?da(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ua(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function da(e){return e.map((e=>{var{providerId:t}=e,n=Se(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oo(e.idToken,"internal-error"),Oo("undefined"!==typeof e.idToken,"internal-error"),Oo("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):aa(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oo(0!==e.length,"internal-error");const t=aa(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Oo(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ko(e,{},(async()=>{const n=ui({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Yo(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Bo.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new fa;return n&&(Oo("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Oo("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Oo("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return Mo("not implemented")}}function pa(e,t){Oo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ga{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Se(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ua(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await la(this,this.stsTokenManager.getToken(this.auth,e));return Oo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=mi(e),r=await n.getIdToken(t),i=oa(r);Oo(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ia(sa(i.auth_time)),issuedAtTime:ia(sa(i.iat)),expirationTime:ia(sa(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=mi(e);await ha(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Oo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ga(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ha(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fs(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await la(this,async function(e,t){return Go(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:x}=t;Oo(v&&x,e,"internal-error");const S=fa.fromJSON(this.name,x);Oo("string"===typeof v,e,"internal-error"),pa(u,e.name),pa(h,e.name),Oo("boolean"===typeof b,e,"internal-error"),Oo("boolean"===typeof _,e,"internal-error"),pa(d,e.name),pa(f,e.name),pa(p,e.name),pa(g,e.name),pa(m,e.name),pa(y,e.name);const E=new ga({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fa;r.updateFromServerResponse(t);const i=new ga({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ha(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Oo(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?da(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new fa;o.updateFromIdToken(n);const a=new ga({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ua(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ma=new Map;function ya(e){Lo(e instanceof Function,"Expected a class definition");let t=ma.get(e);return t?(Lo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ma.set(e,t),t)}class va{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}va.type="NONE";const ba=va;function _a(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class wa{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=_a(this.userKey,r.apiKey,i),this.fullPersistenceKey=_a("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ga._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new wa(ya(ba),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ya(ba);const s=_a(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ga._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new wa(i,e,n)):new wa(i,e,n)}}function xa(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ka(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ca(t))return"Blackberry";if(Aa(t))return"Webos";if(Ea(t))return"Safari";if((t.includes("chrome/")||Ia(t))&&!t.includes("edge/"))return"Chrome";if(Ta(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/firefox\//i.test(e)}function Ea(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/crios\//i.test(e)}function ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/iemobile/i.test(e)}function Ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/android/i.test(e)}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/blackberry/i.test(e)}function Aa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/webos/i.test(e)}function Pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ra(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return Pa(e)||Ta(e)||Aa(e)||Ca(e)||/windows phone/i.test(e)||ka(e)}function Da(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xa(Yr());break;case"Worker":t="".concat(xa(Yr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Bs,"/").concat(r)}class Na{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(zL){r(zL)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(zL){t.reverse();for(const n of t)try{n()}catch(Mt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===zL||void 0===zL?void 0:zL.message})}}}class Oa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ma{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fa(this),this.idTokenSubscription=new Fa(this),this.beforeStateQueue=new Na(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Io,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(zL){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ra(this,{idToken:e}),n=await ga._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fs(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(zL){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(zL)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(zL){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ha(e)}catch(zL){if((null===zL||void 0===zL?void 0:zL.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fs(this.app))return Promise.reject(Ro(this));const t=e?mi(e):null;return t&&Oo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Oo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Fs(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fs(this.app)?Promise.reject(Ro(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ya(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Go(e,"GET","/v2/passwordPolicy",Ho(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Oa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new si("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Go(e,"POST","/v2/accounts:revokeToken",Ho(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;Oo(t,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oo(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Da(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ko.logLevel<=Si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ko.warn("Auth (".concat(Bs,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function La(e){return mi(e)}class Fa{constructor(e){this.auth=e,this.observer=null,this.addObserver=fi((e=>this.observer=e))}get next(){return Oo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ja={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ua(e){return ja.loadJS(e)}function Va(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class za{constructor(e){this.type="recaptcha-enterprise",this.auth=La(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ea(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{na(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ta(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ea(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ja.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ua(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ba(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new za(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qa(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ba(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ba(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Wa(e,t,n){const r=La(e);Oo(r._canInitEmulator,r,"emulator-config-failed"),Oo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ha(t),{host:o,port:a}=function(e){const t=Ha(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ga(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ga(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ha(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ga(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ka{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mo("not implemented")}_getIdTokenResponse(e){return Mo("not implemented")}_linkToIdToken(e,t){return Mo("not implemented")}_getReauthenticationResolver(e){return Mo("not implemented")}}async function Qa(e,t){return Go(e,"POST","/v1/accounts:resetPassword",Ho(e,t))}async function Ya(e,t){return Go(e,"POST","/v1/accounts:signUp",t)}async function Xa(e,t){return Qo(e,"POST","/v1/accounts:signInWithPassword",Ho(e,t))}async function Ja(e,t){return Go(e,"POST","/v1/accounts:sendOobCode",Ho(e,t))}async function $a(e,t){return Ja(e,t)}async function Za(e,t){return Ja(e,t)}class el extends Ka{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new el(e,t,"password")}static _fromEmailAndCode(e,t){return new el(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return qa(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xa);case"emailLink":return async function(e,t){return Qo(e,"POST","/v1/accounts:signInWithEmailLink",Ho(e,t))}(e,{email:this._email,oobCode:this._password});default:Co(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return qa(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ya);case"emailLink":return async function(e,t){return Qo(e,"POST","/v1/accounts:signInWithEmailLink",Ho(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Co(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tl(e,t){return Qo(e,"POST","/v1/accounts:signInWithIdp",Ho(e,t))}class nl extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Co("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Se(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new nl(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tl(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ui(t)}return e}}const rl={USER_NOT_FOUND:"user-not-found"};class il extends Ka{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new il({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new il({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Ho(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Ho(e,t));if(n.temporaryProof)throw $o(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Qo(e,"POST","/v1/accounts:signInWithPhoneNumber",Ho(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),rl)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new il({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class sl{constructor(e){var t,n,r,i,s,o;const a=hi(di(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Oo(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=hi(di(e)).link,n=t?hi(di(t)).deep_link_id:null,r=hi(di(e)).deep_link_id;return(r?hi(di(r)).link:null)||r||n||t||e}(e);try{return new sl(t)}catch(n){return null}}}class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,t){return el._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=sl.parseLink(t);return Oo(n,"argument-error"),el._fromEmailAndCode(e,n.code,n.tenantId)}}ol.PROVIDER_ID="password",ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class al{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ll extends al{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cl extends ll{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Oo("providerId"in t&&"signInMethod"in t,"argument-error"),nl._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Oo(e.idToken||e.accessToken,"argument-error"),nl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new cl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(zL){return null}}}class ul extends ll{constructor(){super("facebook.com")}static credential(e){return nl._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ul.credential(t.oauthAccessToken)}catch(n){return null}}}ul.FACEBOOK_SIGN_IN_METHOD="facebook.com",ul.PROVIDER_ID="facebook.com";class hl extends ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return nl._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return hl.credential(n,r)}catch(i){return null}}}hl.GOOGLE_SIGN_IN_METHOD="google.com",hl.PROVIDER_ID="google.com";class dl extends ll{constructor(){super("github.com")}static credential(e){return nl._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return dl.credential(t.oauthAccessToken)}catch(n){return null}}}dl.GITHUB_SIGN_IN_METHOD="github.com",dl.PROVIDER_ID="github.com";class fl extends Ka{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return tl(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new fl(n,i):null}static _create(e,t){return new fl(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pl extends al{constructor(e){Oo(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return pl.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return pl.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=fl.fromJSON(e);return Oo(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return fl._create(r,n)}catch(zL){return null}}}class gl extends ll{constructor(){super("twitter.com")}static credential(e,t){return nl._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gl.credential(n,r)}catch(i){return null}}}async function ml(e,t){return Qo(e,"POST","/v1/accounts:signUp",Ho(e,t))}gl.TWITTER_SIGN_IN_METHOD="twitter.com",gl.PROVIDER_ID="twitter.com";class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ga._fromIdTokenResponse(e,n,r),s=vl(n);return new yl({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vl(n);return new yl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bl extends ii{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bl(e,t,n,r)}}function _l(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bl._fromErrorAndOperation(e,n,t,r);throw n}))}function wl(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function xl(e,t){const n=mi(e);await El(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Go(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=wl(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Sl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await la(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yl._forOperation(e,"link",r)}async function El(e,t,n){await ha(t);const r=!1===e?"provider-already-linked":"no-such-provider";Oo(wl(t.providerData).has(n)===e,t.auth,r)}async function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Fs(r.app))return Promise.reject(Ro(r));const i="reauthenticate";try{const s=await la(e,_l(r,i,t,e),n);Oo(s.idToken,r,"internal-error");const o=oa(s.idToken);Oo(o,r,"internal-error");const{sub:a}=o;return Oo(e.uid===a,r,"user-mismatch"),yl._forOperation(e,i,s)}catch(zL){throw(null===zL||void 0===zL?void 0:zL.code)==="auth/".concat("user-not-found")&&Co(r,"user-mismatch"),zL}}async function kl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Fs(e.app))return Promise.reject(Ro(e));const r="signIn",i=await _l(e,r,t),s=await yl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Tl(e,t){return kl(La(e),t)}async function Cl(e,t){const n=mi(e);return await El(!1,n,t.providerId),Sl(n,t)}async function Al(e,t){return Il(mi(e),t)}async function Pl(e,t){if(Fs(e.app))return Promise.reject(Ro(e));const n=La(e),r=await async function(e,t){return Qo(e,"POST","/v1/accounts:signInWithCustomToken",Ho(e,t))}(n,{token:t,returnSecureToken:!0}),i=await yl._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Rl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Dl._fromServerResponse(e,t):"totpInfo"in t?Nl._fromServerResponse(e,t):Co(e,"internal-error")}}class Dl extends Rl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Dl(t)}}class Nl extends Rl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Nl(t)}}function Ol(e,t,n){var r;Oo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Oo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Oo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Oo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ml(e){const t=La(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ll(e,t){await async function(e,t){return Go(e,"POST","/v1/accounts:update",Ho(e,t))}(mi(e),{oobCode:t})}async function Fl(e,t){const n=mi(e),r=await Qa(n,{oobCode:t}),i=r.requestType;switch(Oo(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oo(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oo(r.mfaInfo,n,"internal-error");default:Oo(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Rl._fromServerResponse(La(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function jl(e,t){const n={identifier:t,continueUri:jo()?Fo():"http://localhost"},{signinMethods:r}=await async function(e,t){return Go(e,"POST","/v1/accounts:createAuthUri",Ho(e,t))}(mi(e),n);return r||[]}async function Ul(e,t){const n=mi(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ol(n.auth,r,t);const{email:i}=await async function(e,t){return Ja(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Vl(e,t,n){const r=mi(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ol(r.auth,i,n);const{email:s}=await async function(e,t){return Ja(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function zl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=mi(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await la(i,async function(e,t){return Go(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Bl(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await la(e,async function(e,t){return Go(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class ql{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Wl extends ql{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Hl extends ql{constructor(e,t){super(e,"facebook.com",t)}}class Gl extends Wl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Kl extends ql{constructor(e,t){super(e,"google.com",t)}}class Ql extends Wl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Yl(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=oa(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ql(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Hl(s,i);case"github.com":return new Gl(s,i);case"google.com":return new Kl(s,i);case"twitter.com":return new Ql(s,i,e.screenName||null);case"custom":case"anonymous":return new ql(s,null);default:return new ql(s,r,i)}}(n)}class Xl{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Xl("enroll",e,t)}static _fromMfaPendingCredential(e){return new Xl("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Xl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Xl._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Jl{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=La(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Rl._fromServerResponse(n,e)));Oo(r.mfaPendingCredential,n,"internal-error");const s=Xl._fromMfaPendingCredential(r.mfaPendingCredential);return new Jl(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await yl._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Oo(t.user,n,"internal-error"),yl._forOperation(t.user,t.operationType,o);default:Co(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class $l{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Rl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new $l(e)}async getSession(){return Xl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await la(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await la(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Go(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Ho(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(zL){throw zL}var r,i}}const Zl=new WeakMap;const ec="__sak";class tc{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class nc extends tc{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Yr();return Ea(e)||Pa(e)}()&&function(){try{return!(!window||window===window.top)}catch(zL){return!1}}(),this.fallbackToPolling=Ra(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ti()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nc.type="LOCAL";const rc=nc;class ic extends tc{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ic.type="SESSION";const sc=ic;class oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new oc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ac(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}oc.receivers=[];class lc{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=ac("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function cc(){return window}function uc(){return"undefined"!==typeof cc().WorkerGlobalScope&&"function"===typeof cc().importScripts}const hc="firebaseLocalStorageDb",dc="firebaseLocalStorage",fc="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function gc(e,t){return e.transaction([dc],t?"readwrite":"readonly").objectStore(dc)}function mc(){const e=indexedDB.open(hc,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(dc,{keyPath:fc})}catch(zL){n(zL)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(dc)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hc);return new pc(e).toPromise()}(),t(await mc()))}))}))}async function yc(e,t,n){const r=gc(e,!0).put({[fc]:t,value:n});return new pc(r).toPromise()}function vc(e,t){const n=gc(e,!0).delete(t);return new pc(n).toPromise()}class bc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await mc()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(zL){if(t++>3)throw zL;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oc._getInstance(uc()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new lc(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mc();return await yc(e,ec,"1"),await vc(e,ec),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>yc(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=gc(e,!1).get(t),r=await new pc(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>vc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=gc(e,!1).getAll();return new pc(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bc.type="LOCAL";const _c=bc;const wc=1e12;class xc{constructor(e){this.auth=e,this.counter=wc,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Sc(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||wc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||wc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||wc;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Sc{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Oo(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(zL){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(zL){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ec=Va("rcb"),Ic=new Vo(3e4,6e4);class kc{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=cc().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Oo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Zo(cc().grecaptcha)?Promise.resolve(cc().grecaptcha):new Promise(((n,r)=>{const i=cc().setTimeout((()=>{r(Ao(e,"network-request-failed"))}),Ic.get());cc()[Ec]=()=>{cc().clearTimeout(i),delete cc()[Ec];const s=cc().grecaptcha;if(!s||!Zo(s))return void r(Ao(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ua("".concat(ja.recaptchaV2Script,"?").concat(ui({onload:Ec,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ao(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=cc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Tc{async load(e){return new xc(e)}clearedOneInstance(){}}const Cc="recaptcha",Ac={theme:"light",type:"image"};class Pc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Ac);this.parameters=n,this.type=Cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=La(e),this.isInvisible="invisible"===this.parameters.size,Oo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Oo(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tc:new kc,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(zL){return Promise.reject(zL)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Oo(!this.parameters.sitekey,this.auth,"argument-error"),Oo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=cc()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Oo(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Oo(jo()&&!uc(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Go(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Oo(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Oo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rc{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=il._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Dc(e,t,n){var r;const i=await n.verify();try{let s;if(Oo("string"===typeof i,e,"argument-error"),Oo(n.type===Cc,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Oo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Go(e,"POST","/v2/accounts/mfaEnrollment:start",Ho(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Oo("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Oo(n,e,"missing-multi-factor-info");const o=await function(e,t){return Go(e,"POST","/v2/accounts/mfaSignIn:start",Ho(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Go(e,"POST","/v1/accounts:sendVerificationCode",Ho(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Nc{constructor(e){this.providerId=Nc.PROVIDER_ID,this.auth=La(e)}verifyPhoneNumber(e,t){return Dc(this.auth,e,mi(t))}static credential(e,t){return il._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Nc.credentialFromTaggedObject(t)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?il._fromTokenResponse(n,r):null}}function Oc(e,t){return t?ya(t):(Oo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Nc.PROVIDER_ID="phone",Nc.PHONE_SIGN_IN_METHOD="phone";class Mc extends Ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Lc(e){return kl(e.auth,new Mc(e),e.bypassAuthState)}function Fc(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),Il(n,new Mc(e),e.bypassAuthState)}async function jc(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),Sl(n,new Mc(e),e.bypassAuthState)}class Uc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(zL){this.reject(zL)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(zL){this.reject(zL)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lc;case"linkViaPopup":case"linkViaRedirect":return jc;case"reauthViaPopup":case"reauthViaRedirect":return Fc;default:Co(this.auth,"internal-error")}}resolve(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vc=new Vo(2e3,1e4);class zc extends Uc{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,zc.currentPopupAction&&zc.currentPopupAction.cancel(),zc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oo(e,this.auth,"internal-error"),e}async onExecution(){Lo(1===this.filter.length,"Popup operations only handle one event");const e=ac();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ao(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ao(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ao(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Vc.get())};e()}}zc.currentPopupAction=null;const Bc="pendingRedirect",qc=new Map;class Wc extends Uc{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Qc(t),r=Kc(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(zL){e=()=>Promise.reject(zL)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Hc(e,t){return Kc(e)._set(Qc(t),"true")}function Gc(e,t){qc.set(e._key(),t)}function Kc(e){return ya(e._redirectPersistence)}function Qc(e){return _a(Bc,e.config.apiKey,e.name)}function Yc(e,t,n){return async function(e,t,n){if(Fs(e.app))return Promise.reject(Ro(e));const r=La(e);Do(e,t,al),await r._initializationPromise;const i=Oc(r,n);return await Hc(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Xc(e,t,n){return async function(e,t,n){const r=mi(e);if(Do(r.auth,t,al),Fs(r.auth.app))return Promise.reject(Ro(r.auth));await r.auth._initializationPromise;const i=Oc(r.auth,n);await Hc(i,r.auth);const s=await Zc(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Jc(e,t,n){return async function(e,t,n){const r=mi(e);Do(r.auth,t,al),await r.auth._initializationPromise;const i=Oc(r.auth,n);await El(!1,r,t.providerId),await Hc(i,r.auth);const s=await Zc(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function $c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Fs(e.app))return Promise.reject(Ro(e));const r=La(e),i=Oc(r,t),s=new Wc(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Zc(e){const t=ac("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class eu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nu(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ao(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tu(e))}saveEventToCache(e){this.cachedEventUids.add(tu(e)),this.lastProcessedEventTime=Date.now()}}function tu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function nu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ru(e){return Go(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const iu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,su=/^https?/;function ou(e){const t=Fo(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!su.test(n))return!1;if(iu.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const au=new Vo(3e4,6e4);function lu(){const e=cc().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function cu(e){return new Promise(((t,n)=>{var r,i,s;function o(){lu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lu(),n(Ao(e,"network-request-failed"))},timeout:au.get()})}if(null===(i=null===(r=cc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=cc().gapi)||void 0===s?void 0:s.load)){const t=Va("iframefcb");return cc()[t]=()=>{gapi.load?o():n(Ao(e,"network-request-failed"))},Ua("".concat(ja.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw uu=null,e}))}let uu=null;const hu=new Vo(5e3,15e3),du="__/auth/iframe",fu="emulator/auth/iframe",pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mu(e){const t=e.config;Oo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zo(t,fu):"https://".concat(e.config.authDomain,"/").concat(du),r={apiKey:t.apiKey,appName:e.name,v:Bs},i=gu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ui(r).slice(1))}async function yu(e){const t=await function(e){return uu=uu||cu(e),uu}(e),n=cc().gapi;return Oo(n,e,"internal-error"),t.open({where:document.body,url:mu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pu,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ao(e,"network-request-failed"),s=cc().setTimeout((()=>{r(i)}),hu.get());function o(){cc().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const vu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(zL){}}}function _u(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vu),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Yr().toLowerCase();n&&(a=Ia(c)?"_blank":n),Sa(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Pa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new bu(null);const h=window.open(t||"",a,u);Oo(h,e,"popup-blocked");try{h.focus()}catch(zL){}return new bu(h)}const wu="__/auth/handler",xu="emulator/auth/handler",Su=encodeURIComponent("fac");async function Eu(e,t,n,r,i,s){Oo(e.config.authDomain,e,"auth-domain-config-required"),Oo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bs,eventId:i};if(t instanceof al){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ll){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Su,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(wu);return zo(t,xu)}(e),"?").concat(ui(a).slice(1)).concat(c)}const Iu="webStorageSupport";const ku=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sc,this._completeRedirectFn=$c,this._overrideRedirectResult=Gc}async _openPopup(e,t,n,r){var i;Lo(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return _u(e,await Eu(e,t,n,Fo(),r),ac())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){cc().location.href=e}(await Eu(e,t,n,Fo(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Lo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await yu(e),n=new eu(e);return t.register("authEvent",(t=>{Oo(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Iu,{type:Iu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Iu];void 0!==i&&t(!!i),Co(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ru(e);for(const r of t)try{if(ou(r))return}catch(n){}Co(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ra()||Ea()||Pa()}};class Tu{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Mo("unexpected MultiFactorSessionType")}}}class Cu extends Tu{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Cu(e)}_finalizeEnroll(e,t,n){return function(e,t){return Go(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ho(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Go(e,"POST","/v2/accounts/mfaSignIn:finalize",Ho(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Au{constructor(){}static assertion(e){return Cu._fromCredential(e)}}Au.FACTOR_ID="phone";var Pu="@firebase/auth",Ru="1.7.5";class Du{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Wr())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Nu,Ou;function Mu(){return window}Nu={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ao("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ja=Nu,Ou="Browser",Ns(new yi("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Oo(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ou,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Da(Ou)},c=new Ma(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ya);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ns(new yi("auth-internal",(e=>(e=>new Du(e))(La(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(Pu,Ru,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ou)),Qs(Pu,Ru,"esm2017");async function Lu(e,t,n){var r;const{BuildInfo:i}=Mu();Lo(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Lo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Pa()?o.ibi=i.packageName:Ta()?o.apn=i.packageName:Co(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Eu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Fu(e){const{cordova:t}=Mu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const ju=20;class Uu extends eu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Vu(e){const t=await qu()._get(Wu(e));return t&&await qu()._remove(Wu(e)),t}function zu(e,t){var n,r;const i=function(e){const t=Hu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Hu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Hu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Hu(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(zL){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ao(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Bu(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ju;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function qu(){return ya(rc)}function Wu(e){return _a("authEvent",e.config.apiKey,e.name)}function Hu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return hi(n.join("?"))}const Gu=class{constructor(){this._redirectPersistence=sc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$c,this._overrideRedirectResult=Gc}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Uu(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Co(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Mu();Oo("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oo("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oo("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oo("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oo("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),qc.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Bu(),postBody:null,tenantId:e.tenantId,error:Ao(e,"no-auth-event")}}(e,n,r);await function(e,t){return qu()._set(Wu(e),t)}(e,s);const o=await Lu(e,s,t);return async function(e,t,n){const{cordova:r}=Mu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Ao(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ta()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Fu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Mu(),n={};Pa()?n.iosBundleId=t.packageName:Ta()?n.androidPackageName=t.packageName:Co(e,"operation-not-supported-in-this-environment"),await ru(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Mu(),s=setTimeout((async()=>{await Vu(e),t.onEvent(Ku())}),500),o=async n=>{clearTimeout(s);const r=await Vu(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=zu(r,n.url)),t.onEvent(i||Ku())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Mu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(zL){console.error(zL)}}}};function Ku(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ao("no-auth-event")}}function Qu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Yu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return!("file:"!==Qu()&&"ionic:"!==Qu()&&"capacitor:"!==Qu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return ti()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr();return/Edge\/\d+/.test(e)}(e)}function Ju(){try{const e=self.localStorage,t=ac();if(e)return e.setItem(t,"1"),e.removeItem(t),!Xu()||ri()}catch(zL){return $u()&&ri()}return!1}function $u(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Zu(){return("http:"===Qu()||"https:"===Qu()||Zr()||Yu())&&!(ei()||Xr())&&Ju()&&!$u()}function eh(){return Yu()&&"undefined"!==typeof document}const th={LOCAL:"local",NONE:"none",SESSION:"session"},nh=Oo,rh="persistence";async function ih(e){await e._initializationPromise;const t=sh(),n=_a(rh,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function sh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(zL){return null}}const oh=Oo;class ah{constructor(){this.browserResolver=ya(ku),this.cordovaResolver=ya(Gu),this.underlyingResolver=null,this._redirectPersistence=sc,this._completeRedirectFn=$c,this._overrideRedirectResult=Gc}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return eh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oh(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!eh()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function lh(e){return e.unwrap()}function ch(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new fh(e,function(e,t){var n;const r=mi(e),i=t;return Oo(t.customData.operationType,r,"argument-error"),Oo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Jl._fromError(r,i)}(e,t))}else if(r){const e=uh(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function uh(e){const{_tokenResponse:t}=e instanceof ii?e.customData:e;if(!t)return null;if(!(e instanceof ii)&&"temporaryProof"in t&&"phoneNumber"in t)return Nc.credentialFromResult(e);const n=t.providerId;if(!n||n===go.PASSWORD)return null;let r;switch(n){case go.GOOGLE:r=hl;break;case go.FACEBOOK:r=ul;break;case go.GITHUB:r=dl;break;case go.TWITTER:r=gl;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?fl._create(n,o):nl._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new cl(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ii?r.credentialFromError(e):r.credentialFromResult(e)}function hh(e,t){return t.catch((t=>{throw t instanceof ii&&ch(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,uh(r)),additionalUserInfo:Yl(e),user:ph.getOrCreate(n)};var r}))}async function dh(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>hh(e,n.confirm(t))}}class fh{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return hh(lh(this.auth),this.resolver.resolveSignIn(e))}}class ph{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=mi(e);return Zl.has(t)||Zl.set(t,$l._fromUser(t)),Zl.get(t)}(e)}static getOrCreate(e){return ph.USER_MAP.has(e)||ph.USER_MAP.set(e,new ph(e)),ph.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return hh(this.auth,Cl(this._delegate,e))}async linkWithPhoneNumber(e,t){return dh(this.auth,async function(e,t,n){const r=mi(e);await El(!1,r,"phone");const i=await Dc(r.auth,t,mi(n));return new Rc(i,(e=>Cl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return hh(this.auth,async function(e,t,n){const r=mi(e);Do(r.auth,t,al);const i=Oc(r.auth,n);return new zc(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ah))}async linkWithRedirect(e){return await ih(La(this.auth)),Jc(this._delegate,e,ah)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return hh(this.auth,Al(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return dh(this.auth,async function(e,t,n){const r=mi(e);if(Fs(r.auth.app))return Promise.reject(Ro(r.auth));const i=await Dc(r.auth,t,mi(n));return new Rc(i,(e=>Al(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return hh(this.auth,async function(e,t,n){const r=mi(e);if(Fs(r.auth.app))return Promise.reject(Ao(r.auth,"operation-not-supported-in-this-environment"));Do(r.auth,t,al);const i=Oc(r.auth,n);return new zc(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ah))}async reauthenticateWithRedirect(e){return await ih(La(this.auth)),Xc(this._delegate,e,ah)}sendEmailVerification(e){return Ul(this._delegate,e)}async unlink(e){return await xl(this._delegate,e),this}updateEmail(e){return function(e,t){const n=mi(e);return Fs(n.auth.app)?Promise.reject(Ro(n.auth)):Bl(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Bl(mi(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=mi(e);if(Fs(n.auth.app))return Promise.reject(Ro(n.auth));await Sl(n,t)}(this._delegate,e)}updateProfile(e){return zl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Vl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ph.USER_MAP=new WeakMap;const gh=Oo;class mh{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;gh(n,"invalid-api-key",{appName:e.name}),gh(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?ah:void 0;this._delegate=t.initialize({options:{persistence:vh(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(So),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ph.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Wa(this._delegate,e,t)}applyActionCode(e){return Ll(this._delegate,e)}checkActionCode(e){return Fl(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Qa(mi(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ml(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return hh(this._delegate,async function(e,t,n){if(Fs(e.app))return Promise.reject(Ro(e));const r=La(e),i=qa(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ml),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ml(e),t})),o=await yl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return jl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=sl.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){gh(Zu(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await La(e)._initializationPromise,$c(e,t,!1)}(this._delegate,ah);return e?hh(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){La(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=yh(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=yh(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=La(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Oo(t.handleCodeInApp,r,"argument-error"),t&&Ol(r,e,t)}(i,n),await qa(r,i,"getOobCode",Za)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=La(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ol(r,i,n),await qa(r,i,"getOobCode",$a)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){nh(Object.values(th).includes(t),e,"invalid-persistence-type"),ei()?nh(t!==th.SESSION,e,"unsupported-persistence-type"):Xr()?nh(t===th.NONE,e,"unsupported-persistence-type"):$u()?nh(t===th.NONE||t===th.LOCAL&&ri(),e,"unsupported-persistence-type"):nh(t===th.NONE||Ju(),e,"unsupported-persistence-type")}(this._delegate,e),e){case th.SESSION:t=sc;break;case th.LOCAL:t=await ya(_c)._isAvailable()?_c:rc;break;case th.NONE:t=ba;break;default:return Co("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return hh(this._delegate,async function(e){var t;if(Fs(e.app))return Promise.reject(Ro(e));const n=La(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new yl({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ml(n,{returnSecureToken:!0}),i=await yl._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return hh(this._delegate,Tl(this._delegate,e))}signInWithCustomToken(e){return hh(this._delegate,Pl(this._delegate,e))}signInWithEmailAndPassword(e,t){return hh(this._delegate,function(e,t,n){return Fs(e.app)?Promise.reject(Ro(e)):Tl(mi(e),ol.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ml(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return hh(this._delegate,async function(e,t,n){if(Fs(e.app))return Promise.reject(Ro(e));const r=mi(e),i=ol.credentialWithLink(t,n||Fo());return Oo(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Tl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return dh(this._delegate,async function(e,t,n){if(Fs(e.app))return Promise.reject(Ro(e));const r=La(e),i=await Dc(r,t,mi(n));return new Rc(i,(e=>Tl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return gh(Zu(),this._delegate,"operation-not-supported-in-this-environment"),hh(this._delegate,async function(e,t,n){if(Fs(e.app))return Promise.reject(Ao(e,"operation-not-supported-in-this-environment"));const r=La(e);Do(e,t,al);const i=Oc(r,n);return new zc(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,ah))}async signInWithRedirect(e){return gh(Zu(),this._delegate,"operation-not-supported-in-this-environment"),await ih(this._delegate),Yc(this._delegate,e,ah)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Fl(mi(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function yh(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ph.getOrCreate(e)),error:t,complete:n}}function vh(e,t){const n=function(e,t){const n=sh();if(!n)return[];const r=_a(rh,e,t);switch(n.getItem(r)){case th.NONE:return[ba];case th.LOCAL:return[_c,sc];case th.SESSION:return[sc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(_c)||n.push(_c),"undefined"!==typeof window)for(const r of[rc,sc])n.includes(r)||n.push(r);return n.includes(ba)||n.push(ba),n}mh.Persistence=th;class bh{constructor(){this.providerId="phone",this._delegate=new Nc(lh(po.auth()))}static credential(e,t){return Nc.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}bh.PHONE_SIGN_IN_METHOD=Nc.PHONE_SIGN_IN_METHOD,bh.PROVIDER_ID=Nc.PROVIDER_ID;const _h=Oo;class wh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:po.app();var r;_h(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Pc(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var xh;(xh=po).INTERNAL.registerComponent(new yi("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new mh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:mo,PASSWORD_RESET:yo,RECOVER_EMAIL:vo,REVERT_SECOND_FACTOR_ADDITION:bo,VERIFY_AND_CHANGE_EMAIL:_o,VERIFY_EMAIL:wo}},EmailAuthProvider:ol,FacebookAuthProvider:ul,GithubAuthProvider:dl,GoogleAuthProvider:hl,OAuthProvider:cl,SAMLAuthProvider:pl,PhoneAuthProvider:bh,PhoneMultiFactorGenerator:Au,RecaptchaVerifier:wh,TwitterAuthProvider:gl,Auth:mh,AuthCredential:Ka,Error:ii}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xh.registerVersion("@firebase/auth-compat","0.5.10");var Sh,Eh,Ih="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kh={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Eh=kh.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Sh=kh.Integer=r}).apply("undefined"!==typeof Ih?Ih:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Th,Ch,Ah,Ph,Rh,Dh,Nh,Oh,Mh,Lh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Fh={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Lh&&Lh];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function D(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(Ct){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,N);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;w(t=new N(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){N.call(this,"d")}function be(){N.call(this,"c")}h(ve,N),h(be,N);var _e={},we=null;function xe(){return we=we||new ne}function Se(e){N.call(this,_e.La,e)}function Ee(e){const t=xe();re(t,new Se(t))}function Ie(e,t){N.call(this,_e.STAT_EVENT,e),this.stat=t}function ke(e){const t=xe();re(t,new Ie(t,e))}function Te(e,t){N.call(this,_e.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(At){return t}}(e,n)+(r?" "+r:"")}))}_e.La="serverreachability",h(Se,N),_e.STAT_EVENT="statevent",h(Ie,N),_e.Ma="timingevent",h(Te,N),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Fe={},je={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=mn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||hn(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;un(n),Zt(n)}an(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else fn(n,11)}else if((e.K||n.g==e)&&un(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=gn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else on(r);0<n.i.length&&tn(n)}else"stop"!=c[0]&&"close"!=c[0]||fn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fn(n,7):$t(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Qt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Yt(this.g)))){this.J||4!=d||7==t||Ee(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Yt(this.g);e="";var s=r.length,o=4==Qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),Ge(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ke(this),Ge(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==je){4==d&&(this.s=4,ke(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),ln(h),h.M=!0,ke(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else Pe(this.i,this.l,a,null),Qe(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?hn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ke(this),Ge(this)}}}catch(Ot){}},Me.prototype.cancel=function(){this.J=!0,Ke(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),Ke(this),this.s=2,Ge(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),It(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){xt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return xt(e),t=kt(e,t),e.g.has(t)}function It(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Ct){}}function Pt(){this.g=new fe}function Rt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(zL){throw t.push(r+"type="+encodeURIComponent("_badmap")),zL}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ft(e)}function Ft(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ut(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Vt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Et(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Dt,pe),Dt.prototype.g=function(){return new Nt(this.l,this.j)},Dt.prototype.i=(gt={},function(){return gt}),h(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ft(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ft(this)),this.g&&(this.readyState=3,Ft(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Ft(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Vt,ne);var zt=/^https?$/i,Bt=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Wt(e),Gt(e)}function Wt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ht(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Qt(e)||2!=e.Z()))if(e.u&&4==Qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!zt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Qt(e)?e.g.statusText:""}catch(At){a=""}e.l=a+" ["+e.Z()+"]",Wt(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){Kt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(zL){}}}function Kt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Qt(e){return e.g?e.g.readyState:0}function Yt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,e),this.cb=Xt("retryDelaySeedMs",1e4,e),this.Wa=Xt("forwardChannelMaxRetries",2,e),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Pt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function $t(e){if(en(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),rn(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=mn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}pn(e)}function Zt(e){e.g&&(ln(e),e.g.cancel(),e.g=null)}function en(e){Zt(e),e.u&&(i.clearTimeout(e.u),e.u=null),un(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function tn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),C||(T(),C=!0),A.add(t,e),e.B=0}}function nn(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),rn(e,r),e.m&&e.o&&Ut(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=sn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function rn(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function sn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Rt(a,e,"req"+n+"_")}catch(Ot){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function on(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),C||(T(),C=!0),A.add(t,e),e.v=0}}function an(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),dn(e,e.v)),e.v++,!0)}function ln(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function cn(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),rn(e,t),e.m&&e.o&&Ut(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function un(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function hn(e,t){var n=null;if(e.g==t){un(e),ln(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Te(r,n)),tn(e)}else on(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),dn(e,e.B)),e.B++,!0))}(e,t)||2==r&&an(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fn(e,5);break;case 4:fn(e,10);break;case 3:fn(e,6);break;default:fn(e,2)}}function dn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function fn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),pn(e),en(e)}function pn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function gn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),rn(e,r),r}function mn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Vt(new Dt({eb:n})):new Vt(e.pa)).Ha(e.J),t}function yn(){}function vn(){}function bn(e,t){ne.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function _n(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wn(){be.call(this),this.status=1}function xn(e){this.g=e}(e=Vt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Ct){return void qt(this,Ct)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Ct){qt(this,Ct)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),Vt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},e.bb=function(){Ht(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=gn(this,null,this.W),tn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),rn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(jt(s)))+"&"+t:this.m&&Ut(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?nn(this,e):0==this.i.length||Je(this.h)||nn(this))},e.Fa=function(){if(this.u=null,cn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Zt(this),cn(this))},e.Za=function(){null!=this.C&&(this.C=null,Zt(this),an(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=yn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},vn.prototype.g=function(e,t){return new bn(e,t)},h(bn,ne),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){$t(this.g)},bn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&tn(t)},bn.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,bn.aa.N.call(this)},h(_n,ve),h(wn,be),h(xn,yn),xn.prototype.ua=function(){re(this.g,"a")},xn.prototype.ta=function(e){re(this.g,new _n(e))},xn.prototype.sa=function(e){re(this.g,new wn)},xn.prototype.ra=function(){re(this.g,"b")},vn.prototype.createWebChannel=vn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,Mh=Fh.createWebChannelTransport=function(){return new vn},Oh=Fh.getStatEventTarget=function(){return xe()},Nh=Fh.Event=_e,Dh=Fh.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Rh=Fh.ErrorCode=De,Ne.COMPLETE="complete",Ph=Fh.EventType=Ne,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ah=Fh.WebChannel=me,Ch=Fh.FetchXmlHttpFactory=Dt,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,Th=Fh.XhrIo=Vt}).apply("undefined"!==typeof Lh?Lh:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const jh="@firebase/firestore";class Uh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Uh.UNAUTHENTICATED=new Uh(null),Uh.GOOGLE_CREDENTIALS=new Uh("google-credentials-uid"),Uh.FIRST_PARTY=new Uh("first-party-uid"),Uh.MOCK_USER=new Uh("mock-user");let Vh="10.12.3";const zh=new Ci("@firebase/firestore");function Bh(){return zh.logLevel}function qh(e){if(zh.logLevel<=Si.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gh);zh.debug("Firestore (".concat(Vh,"): ").concat(e),...i)}}function Wh(e){if(zh.logLevel<=Si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gh);zh.error("Firestore (".concat(Vh,"): ").concat(e),...i)}}function Hh(e){if(zh.logLevel<=Si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gh);zh.warn("Firestore (".concat(Vh,"): ").concat(e),...i)}}function Gh(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Vh,") INTERNAL ASSERTION FAILED: ")+e;throw Wh(t),new Error(t)}function Qh(e,t){e||Kh()}function Yh(e,t){return e}const Xh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jh extends ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class $h{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Zh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ed{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Uh.UNAUTHENTICATED)))}shutdown(){}}class td{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nd{constructor(e){this.t=e,this.currentUser=Uh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new $h;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $h,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{qh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(qh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $h)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(qh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qh("string"==typeof t.accessToken),new Zh(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qh(null===e||"string"==typeof e),new Uh(e)}}class rd{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Uh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class id{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Uh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class od{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&qh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,qh("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{qh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):qh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qh("string"==typeof e.token),this.R=e.token,new sd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ad(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ld{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ad(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function cd(e,t){return e<t?-1:e>t?1:0}function ud(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function hd(e){return e+"\0"}class dd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jh(Xh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jh(Xh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jh(Xh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jh(Xh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dd.fromMillis(Date.now())}static fromDate(e){return dd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new dd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cd(this.nanoseconds,e.nanoseconds):cd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fd(e)}static min(){return new fd(new dd(0,0))}static max(){return new fd(new dd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Kh(),void 0===n?n=e.length-t:n>e.length-t&&Kh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pd?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gd extends pd{construct(e,t,n){return new gd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new gd(e)}static emptyPath(){return new gd([])}}const md=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yd extends pd{construct(e,t,n){return new yd(e,t,n)}static isValidIdentifier(e){return md.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Jh(Xh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Jh(Xh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Jh(Xh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yd(t)}static emptyPath(){return new yd([])}}class vd{constructor(e){this.path=e}static fromPath(e){return new vd(gd.fromString(e))}static fromName(e){return new vd(gd.fromString(e).popFirst(5))}static empty(){return new vd(gd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vd(new gd(e.slice()))}}class bd{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function _d(e){return e.fields.find((e=>2===e.kind))}function wd(e){return e.fields.filter((e=>2!==e.kind))}bd.UNKNOWN_ID=-1;class xd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sd(0,kd.min())}}function Ed(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fd.fromTimestamp(1e9===r?new dd(n+1,0):new dd(n,r));return new kd(i,vd.empty(),t)}function Id(e){return new kd(e.readTime,e.key,-1)}class kd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new kd(fd.min(),vd.empty(),-1)}static max(){return new kd(fd.max(),vd.empty(),-1)}}function Td(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vd.comparator(e.documentKey,t.documentKey),0!==n?n:cd(e.largestBatchId,t.largestBatchId))}const Cd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ad{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Pd(e){if(e.code!==Xh.FAILED_PRECONDITION||e.message!==Cd)throw e;qh("LocalStore","Unexpectedly lost primary lease")}class Rd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Rd?t:Rd.resolve(t)}catch(e){return Rd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Rd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Rd.reject(t)}static resolve(e){return new Rd(((t,n)=>{t(e)}))}static reject(e){return new Rd(((t,n)=>{n(e)}))}static waitFor(e){return new Rd(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Rd.resolve(!1);for(const n of e)t=t.next((e=>e?Rd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Rd(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Rd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new $h,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ld(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=zd(t.target.error);this.V.reject(new Ld(e,n))}}static open(e,t,n,r){try{return new Dd(t,e.transaction(r,n))}catch(e){throw new Ld(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(qh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jd(t)}}class Nd{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Nd.S(Yr())&&Wh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qh("SimpleDb","Removing database:",e),Ud(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ri())return!1;if(Nd.C())return!0;const e=Yr(),t=Nd.S(e),n=0<t&&t<10,r=Od(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(qh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ld(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Jh(Xh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Jh(Xh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ld(e,r))},r.onupgradeneeded=e=>{qh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{qh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Dd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Rd.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(qh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Od(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Md{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ud(this.B.delete())}}class Ld extends Jh{constructor(e,t){super(Xh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Fd(e){return"IndexedDbTransactionError"===e.name}class jd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(qh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(qh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ud(n)}add(e){return qh("SimpleDb","ADD",this.store.name,e,e),Ud(this.store.add(e))}get(e){return Ud(this.store.get(e)).next((t=>(void 0===t&&(t=null),qh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return qh("SimpleDb","DELETE",this.store.name,e),Ud(this.store.delete(e))}count(){return qh("SimpleDb","COUNT",this.store.name),Ud(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Rd(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Rd(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){qh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Rd(((n,r)=>{t.onerror=e=>{const t=zd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Rd(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Md(i),o=t(i.primaryKey,i.value,s);if(o instanceof Rd){const e=o.catch((e=>(s.done(),Rd.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Rd.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ud(e){return new Rd(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=zd(e.target.error);n(t)}}))}let Vd=!1;function zd(e){const t=Nd.S(Yr());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Jh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Vd||(Vd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Bd{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){qh("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{qh("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Fd(e)?qh("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Pd(e)}await this.X(6e4)}))}}class qd{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Rd.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return qh("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(qh("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Id(t);Td(r,n)>0&&(n=r)})),new kd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Wd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Hd(e){return null==e}function Gd(e){return 0===e&&1/e==-1/0}function Kd(e){return"number"==typeof e&&Number.isInteger(e)&&!Gd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Qd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Xd(t)),t=Yd(e.get(n),t);return Xd(t)}function Yd(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Xd(e){return e+"\x01\x01"}function Jd(e){const t=e.length;if(Qh(t>=2),2===t)return Qh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),gd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Kh(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Kh()}s=t+2}return new gd(r)}Wd.oe=-1;const $d=["userId","batchId"];function Zd(e,t){return[e,Qd(t)]}function ef(e,t,n){return[e,Qd(t),n]}const tf={},nf=["prefixPath","collectionGroup","readTime","documentId"],rf=["prefixPath","collectionGroup","documentId"],sf=["collectionGroup","readTime","prefixPath","documentId"],of=["canonicalId","targetId"],af=["targetId","path"],lf=["path","targetId"],cf=["collectionId","parent"],uf=["indexId","uid"],hf=["uid","sequenceNumber"],df=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ff=["indexId","uid","orderedDocumentKey"],pf=["userId","collectionPath","documentId"],gf=["userId","collectionPath","largestBatchId"],mf=["userId","collectionGroup","largestBatchId"],yf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vf=[...yf,"documentOverlays"],bf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_f=bf,wf=[..._f,"indexConfiguration","indexState","indexEntries"],xf=wf;class Sf extends Ad{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ef(e,t){const n=Yh(e);return Nd.F(n._e,t)}function If(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Cf{constructor(e,t){this.comparator=e,this.root=t||Pf.EMPTY}insert(e,t){return new Cf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pf.BLACK,null,null))}remove(e){return new Cf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Af(this.root,e,this.comparator,!1)}getReverseIterator(){return new Af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Af(this.root,e,this.comparator,!0)}}class Af{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Pf.RED,this.left=null!=r?r:Pf.EMPTY,this.right=null!=i?i:Pf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Pf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Pf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kh();if(this.right.isRed())throw Kh();const e=this.left.check();if(e!==this.right.check())throw Kh();return e+(this.isRed()?0:1)}}Pf.EMPTY=null,Pf.RED=!0,Pf.BLACK=!1,Pf.EMPTY=new class{constructor(){this.size=0}get key(){throw Kh()}get value(){throw Kh()}get color(){throw Kh()}get left(){throw Kh()}get right(){throw Kh()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Pf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rf{constructor(e){this.comparator=e,this.data=new Cf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Df(this.data.getIterator())}getIteratorFrom(e){return new Df(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Rf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rf(this.comparator);return t.data=e,t}}class Df{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nf(e){return e.hasNext()?e.getNext():void 0}class Of{constructor(e){this.fields=e,e.sort(yd.comparator)}static empty(){return new Of([])}unionWith(e){let t=new Rf(yd.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Of(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Mf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Mf("Invalid base64 string: "+e):e}}(e);return new Lf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Lf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lf.EMPTY_BYTE_STRING=new Lf("");const Ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jf(e){if(Qh(!!e),"string"==typeof e){let t=0;const n=Ff.exec(e);if(Qh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Uf(e.seconds),nanos:Uf(e.nanos)}}function Uf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vf(e){return"string"==typeof e?Lf.fromBase64String(e):Lf.fromUint8Array(e)}function zf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bf(e){const t=e.mapValue.fields.__previous_value__;return zf(t)?Bf(t):t}function qf(e){const t=jf(e.mapValue.fields.__local_write_time__.timestampValue);return new dd(t.seconds,t.nanos)}class Wf{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Hf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hf&&e.projectId===this.projectId&&e.database===this.database}}const Gf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kf={nullValue:"NULL_VALUE"};function Qf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zf(e)?4:lp(e)?9007199254740991:10:Kh()}function Yf(e,t){if(e===t)return!0;const n=Qf(e);if(n!==Qf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qf(e).isEqual(qf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=jf(e.timestampValue),r=jf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Vf(e.bytesValue).isEqual(Vf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Uf(e.geoPointValue.latitude)===Uf(t.geoPointValue.latitude)&&Uf(e.geoPointValue.longitude)===Uf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Uf(e.integerValue)===Uf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Uf(e.doubleValue),r=Uf(t.doubleValue);return n===r?Gd(n)===Gd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ud(e.arrayValue.values||[],t.arrayValue.values||[],Yf);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(If(n)!==If(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yf(n[i],r[i])))return!1;return!0}(e,t);default:return Kh()}}function Xf(e,t){return void 0!==(e.values||[]).find((e=>Yf(e,t)))}function Jf(e,t){if(e===t)return 0;const n=Qf(e),r=Qf(t);if(n!==r)return cd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Uf(e.integerValue||e.doubleValue),r=Uf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $f(e.timestampValue,t.timestampValue);case 4:return $f(qf(e),qf(t));case 5:return cd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Vf(e),r=Vf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=cd(n[i],r[i]);if(0!==e)return e}return cd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cd(Uf(e.latitude),Uf(t.latitude));return 0!==n?n:cd(Uf(e.longitude),Uf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Jf(n[i],r[i]);if(e)return e}return cd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gf.mapValue&&t===Gf.mapValue)return 0;if(e===Gf.mapValue)return 1;if(t===Gf.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=cd(r[o],s[o]);if(0!==e)return e;const t=Jf(n[r[o]],i[s[o]]);if(0!==t)return t}return cd(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Kh()}}function $f(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cd(e,t);const n=jf(e),r=jf(t),i=cd(n.seconds,r.seconds);return 0!==i?i:cd(n.nanos,r.nanos)}function Zf(e){return ep(e)}function ep(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=jf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Vf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vd.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ep(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ep(e.fields[i]));return n+"}"}(e.mapValue):Kh()}function tp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function np(e){return!!e&&"integerValue"in e}function rp(e){return!!e&&"arrayValue"in e}function ip(e){return!!e&&"nullValue"in e}function sp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function op(e){return!!e&&"mapValue"in e}function ap(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return kf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ap(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ap(e.arrayValue.values[n]);return t}return Object.assign({},e)}function lp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cp(e){return"nullValue"in e?Kf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tp(Hf.empty(),vd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Kh()}function up(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tp(Hf.empty(),vd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gf:Kh()}function hp(e,t){const n=Jf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function dp(e,t){const n=Jf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class fp{constructor(e){this.value=e}static empty(){return new fp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}setAll(e){let t=yd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ap(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];op(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){kf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new fp(ap(this.value))}}function pp(e){const t=[];return kf(e.fields,((e,n)=>{const r=new yd([e]);if(op(n)){const e=pp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Of(t)}class gp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new gp(e,0,fd.min(),fd.min(),fd.min(),fp.empty(),0)}static newFoundDocument(e,t,n,r){return new gp(e,1,t,fd.min(),n,r,0)}static newNoDocument(e,t){return new gp(e,2,t,fd.min(),fd.min(),fp.empty(),0)}static newUnknownDocument(e,t){return new gp(e,3,t,fd.min(),fd.min(),fp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mp{constructor(e,t){this.position=e,this.inclusive=t}}function yp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?vd.comparator(vd.fromName(o.referenceValue),n.key):Jf(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yf(e.position[n],t.position[n]))return!1;return!0}class bp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function _p(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wp{}class xp extends wp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Dp(e,t,n):"array-contains"===t?new Lp(e,n):"in"===t?new Fp(e,n):"not-in"===t?new jp(e,n):"array-contains-any"===t?new Up(e,n):new xp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Np(e,n):new Op(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jf(t,this.value)):null!==t&&Qf(this.value)===Qf(t)&&this.matchesComparison(Jf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sp extends wp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Sp(e,t)}matches(e){return Ep(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ep(e){return"and"===e.op}function Ip(e){return"or"===e.op}function kp(e){return Tp(e)&&Ep(e)}function Tp(e){for(const t of e.filters)if(t instanceof Sp)return!1;return!0}function Cp(e){if(e instanceof xp)return e.field.canonicalString()+e.op.toString()+Zf(e.value);if(kp(e))return e.filters.map((e=>Cp(e))).join(",");{const t=e.filters.map((e=>Cp(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ap(e,t){return e instanceof xp?function(e,t){return t instanceof xp&&e.op===t.op&&e.field.isEqual(t.field)&&Yf(e.value,t.value)}(e,t):e instanceof Sp?function(e,t){return t instanceof Sp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ap(n,t.filters[r])),!0)}(e,t):void Kh()}function Pp(e,t){const n=e.filters.concat(t);return Sp.create(n,e.op)}function Rp(e){return e instanceof xp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zf(e.value))}(e):e instanceof Sp?function(e){return e.op.toString()+" {"+e.getFilters().map(Rp).join(" ,")+"}"}(e):"Filter"}class Dp extends xp{constructor(e,t,n){super(e,t,n),this.key=vd.fromName(n.referenceValue)}matches(e){const t=vd.comparator(e.key,this.key);return this.matchesComparison(t)}}class Np extends xp{constructor(e,t){super(e,"in",t),this.keys=Mp("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Op extends xp{constructor(e,t){super(e,"not-in",t),this.keys=Mp("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>vd.fromName(e.referenceValue)))}class Lp extends xp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rp(t)&&Xf(t.arrayValue,this.value)}}class Fp extends xp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xf(this.value.arrayValue,t)}}class jp extends xp{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xf(this.value.arrayValue,t)}}class Up extends xp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Xf(this.value.arrayValue,e)))}}class Vp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function zp(e){return new Vp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bp(e){const t=Yh(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Cp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Hd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Zf(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Zf(e))).join(",")),t.ue=e}return t.ue}function qp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_p(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ap(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vp(e.startAt,t.startAt)&&vp(e.endAt,t.endAt)}function Wp(e){return vd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hp(e,t){return e.filters.filter((e=>e instanceof xp&&e.field.isEqual(t)))}function Gp(e,t,n){let r=Kf,i=!0;for(const s of Hp(e,t)){let e=Kf,t=!0;switch(s.op){case"<":case"<=":e=cp(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Kf}hp({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];hp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Kp(e,t,n){let r=Gf,i=!0;for(const s of Hp(e,t)){let e=Gf,t=!0;switch(s.op){case">=":case">":e=up(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Gf}dp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];dp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Qp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Yp(e,t,n,r,i,s,o,a){return new Qp(e,t,n,r,i,s,o,a)}function Xp(e){return new Qp(e)}function Jp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $p(e){return null!==e.collectionGroup}function Zp(e){const t=Yh(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Rf(yd.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new bp(r,n))})),e.has(yd.keyField().canonicalString())||t.ce.push(new bp(yd.keyField(),n))}return t.ce}function eg(e){const t=Yh(e);return t.le||(t.le=tg(t,Zp(e))),t.le}function tg(e,t){if("F"===e.limitType)return zp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new bp(e.field,t)}));const n=e.endAt?new mp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mp(e.startAt.position,e.startAt.inclusive):null;return zp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ng(e,t){const n=e.filters.concat([t]);return new Qp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rg(e,t,n){return new Qp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ig(e,t){return qp(eg(e),eg(t))&&e.limitType===t.limitType}function sg(e){return"".concat(Bp(eg(e)),"|lt:").concat(e.limitType)}function og(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Rp(e))).join(", "),"]")),Hd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Zf(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Zf(e))).join(",")),"Target(".concat(t,")")}(eg(e)),"; limitType=").concat(e.limitType,")")}function ag(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zp(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zp(e),t))&&!(e.endAt&&!function(e,t,n){const r=yp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zp(e),t))}(e,t)}function lg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cg(e){return(t,n)=>{let r=!1;for(const i of Zp(e)){const e=ug(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ug(e,t,n){const r=e.field.isKeyField()?vd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jf(r,i):Kh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kh()}}class hg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){kf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Tf(this.inner)}size(){return this.innerSize}}const dg=new Cf(vd.comparator);function fg(){return dg}const pg=new Cf(vd.comparator);function gg(){let e=pg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function mg(e){let t=pg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function yg(){return bg()}function vg(){return bg()}function bg(){return new hg((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _g=new Cf(vd.comparator),wg=new Rf(vd.comparator);function xg(){let e=wg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Sg=new Rf(cd);function Eg(){return Sg}function Ig(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(t)?"-0":t}}function kg(e){return{integerValue:""+e}}function Tg(e,t){return Kd(t)?kg(t):Ig(e,t)}class Cg{constructor(){this._=void 0}}function Ag(e,t,n){return e instanceof Dg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zf(t)&&(t=Bf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ng?Og(e,t):e instanceof Mg?Lg(e,t):function(e,t){const n=Rg(e,t),r=jg(n)+jg(e.Pe);return np(n)&&np(e.Pe)?kg(r):Ig(e.serializer,r)}(e,t)}function Pg(e,t,n){return e instanceof Ng?Og(e,t):e instanceof Mg?Lg(e,t):n}function Rg(e,t){return e instanceof Fg?function(e){return np(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Dg extends Cg{}class Ng extends Cg{constructor(e){super(),this.elements=e}}function Og(e,t){const n=Ug(t);for(const r of e.elements)n.some((e=>Yf(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Mg extends Cg{constructor(e){super(),this.elements=e}}function Lg(e,t){let n=Ug(t);for(const r of e.elements)n=n.filter((e=>!Yf(e,r)));return{arrayValue:{values:n}}}class Fg extends Cg{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jg(e){return Uf(e.integerValue||e.doubleValue)}function Ug(e){return rp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Vg{constructor(e,t){this.field=e,this.transform=t}}class zg{constructor(e,t){this.version=e,this.transformResults=t}}class Bg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bg}static exists(e){return new Bg(void 0,e)}static updateTime(e){return new Bg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wg{}function Hg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tm(e.key,Bg.none()):new Xg(e.key,e.data,Bg.none());{const n=e.data,r=fp.empty();let i=new Rf(yd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Jg(e.key,r,new Of(i.toArray()),Bg.none())}}function Gg(e,t,n){e instanceof Xg?function(e,t,n){const r=e.value.clone(),i=Zg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jg?function(e,t,n){if(!qg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Zg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($g(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kg(e,t,n,r){return e instanceof Xg?function(e,t,n,r){if(!qg(e.precondition,t))return n;const i=e.value.clone(),s=em(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jg?function(e,t,n,r){if(!qg(e.precondition,t))return n;const i=em(e.fieldTransforms,r,t),s=t.data;return s.setAll($g(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return qg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Qg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rg(r.transform,e||null);null!=i&&(null===n&&(n=fp.empty()),n.set(r.field,i))}return n||null}function Yg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ud(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ng&&t instanceof Ng||e instanceof Mg&&t instanceof Mg?ud(e.elements,t.elements,Yf):e instanceof Fg&&t instanceof Fg?Yf(e.Pe,t.Pe):e instanceof Dg&&t instanceof Dg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xg extends Wg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Jg extends Wg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $g(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Zg(e,t,n){const r=new Map;Qh(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Pg(o,a,n[i]))}return r}function em(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ag(e,s,t))}return r}class tm extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nm extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rm{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vg();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hg(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(fd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xg())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,((e,t)=>Yg(e,t)))&&ud(this.baseMutations,e.baseMutations,((e,t)=>Yg(e,t)))}}class im{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qh(e.mutations.length===n.length);let r=_g;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new im(e,t,n,r)}}class sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class om{constructor(e,t){this.count=e,this.unchangedNames=t}}var am,lm;function cm(e){switch(e){default:return Kh();case Xh.CANCELLED:case Xh.UNKNOWN:case Xh.DEADLINE_EXCEEDED:case Xh.RESOURCE_EXHAUSTED:case Xh.INTERNAL:case Xh.UNAVAILABLE:case Xh.UNAUTHENTICATED:return!1;case Xh.INVALID_ARGUMENT:case Xh.NOT_FOUND:case Xh.ALREADY_EXISTS:case Xh.PERMISSION_DENIED:case Xh.FAILED_PRECONDITION:case Xh.ABORTED:case Xh.OUT_OF_RANGE:case Xh.UNIMPLEMENTED:case Xh.DATA_LOSS:return!0}}function um(e){if(void 0===e)return Wh("GRPC error has no .code"),Xh.UNKNOWN;switch(e){case am.OK:return Xh.OK;case am.CANCELLED:return Xh.CANCELLED;case am.UNKNOWN:return Xh.UNKNOWN;case am.DEADLINE_EXCEEDED:return Xh.DEADLINE_EXCEEDED;case am.RESOURCE_EXHAUSTED:return Xh.RESOURCE_EXHAUSTED;case am.INTERNAL:return Xh.INTERNAL;case am.UNAVAILABLE:return Xh.UNAVAILABLE;case am.UNAUTHENTICATED:return Xh.UNAUTHENTICATED;case am.INVALID_ARGUMENT:return Xh.INVALID_ARGUMENT;case am.NOT_FOUND:return Xh.NOT_FOUND;case am.ALREADY_EXISTS:return Xh.ALREADY_EXISTS;case am.PERMISSION_DENIED:return Xh.PERMISSION_DENIED;case am.FAILED_PRECONDITION:return Xh.FAILED_PRECONDITION;case am.ABORTED:return Xh.ABORTED;case am.OUT_OF_RANGE:return Xh.OUT_OF_RANGE;case am.UNIMPLEMENTED:return Xh.UNIMPLEMENTED;case am.DATA_LOSS:return Xh.DATA_LOSS;default:return Kh()}}(lm=am||(am={}))[lm.OK=0]="OK",lm[lm.CANCELLED=1]="CANCELLED",lm[lm.UNKNOWN=2]="UNKNOWN",lm[lm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lm[lm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lm[lm.NOT_FOUND=5]="NOT_FOUND",lm[lm.ALREADY_EXISTS=6]="ALREADY_EXISTS",lm[lm.PERMISSION_DENIED=7]="PERMISSION_DENIED",lm[lm.UNAUTHENTICATED=16]="UNAUTHENTICATED",lm[lm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lm[lm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lm[lm.ABORTED=10]="ABORTED",lm[lm.OUT_OF_RANGE=11]="OUT_OF_RANGE",lm[lm.UNIMPLEMENTED=12]="UNIMPLEMENTED",lm[lm.INTERNAL=13]="INTERNAL",lm[lm.UNAVAILABLE=14]="UNAVAILABLE",lm[lm.DATA_LOSS=15]="DATA_LOSS";let hm=null;function dm(){return new TextEncoder}const fm=new Sh([4294967295,4294967295],0);function pm(e){const t=dm().encode(e),n=new Eh;return n.update(t),new Uint8Array(n.digest())}function gm(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Sh([n,r],0),new Sh([i,s],0)]}class mm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ym("Invalid padding: ".concat(t));if(n<0)throw new ym("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ym("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ym("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Sh.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Sh.fromNumber(n)));return 1===r.compare(fm)&&(r=new Sh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=pm(e),[n,r]=gm(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new mm(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=pm(e),[n,r]=gm(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vm{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,bm.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vm(fd.min(),r,new Cf(cd),fg(),xg())}}class bm{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new bm(n,t,xg(),xg(),xg())}}class _m{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class wm{constructor(e,t){this.targetId=e,this.me=t}}class xm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sm{constructor(){this.fe=0,this.ge=km(),this.pe=Lf.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=xg(),t=xg(),n=xg();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kh()}})),new bm(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=km()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qh(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Em{constructor(e){this.Le=e,this.Be=new Map,this.ke=fg(),this.qe=Im(),this.Qe=new Cf(cd)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Kh()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Wp(i))if(0===n){const e=new vd(i.path);this.Ue(t,e,gp.newNoDocument(e,fd.min()))}else Qh(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==hm||hm.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Vf(n).toUint8Array()}catch(e){if(e instanceof Mf)return Hh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new mm(s,r,i)}catch(e){return Hh(e instanceof ym?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Wp(i.target)){const t=new vd(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,gp.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=xg();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new vm(e,t,this.Qe,this.ke,n);return this.ke=fg(),this.qe=Im(),this.Qe=new Cf(cd),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Sm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rf(cd),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||qh("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sm),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Im(){return new Cf(vd.comparator)}function km(){return new Cf(vd.comparator)}const Tm={asc:"ASCENDING",desc:"DESCENDING"},Cm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Am={and:"AND",or:"OR"};class Pm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rm(e,t){return e.useProto3Json||Hd(t)?t:{value:t}}function Dm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Om(e,t){return Dm(e,t.toTimestamp())}function Mm(e){return Qh(!!e),fd.fromTimestamp(function(e){const t=jf(e);return new dd(t.seconds,t.nanos)}(e))}function Lm(e,t){return Fm(e,t).canonicalString()}function Fm(e,t){const n=function(e){return new gd(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function jm(e){const t=gd.fromString(e);return Qh(oy(t)),t}function Um(e,t){return Lm(e.databaseId,t.path)}function Vm(e,t){const n=jm(t);if(n.get(1)!==e.databaseId.projectId)throw new Jh(Xh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jh(Xh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vd(Wm(n))}function zm(e,t){return Lm(e.databaseId,t)}function Bm(e){const t=jm(e);return 4===t.length?gd.emptyPath():Wm(t)}function qm(e){return new gd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wm(e){return Qh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hm(e,t,n){return{name:Um(e,t),fields:n.value.mapValue.fields}}function Gm(e,t,n){const r=Vm(e,t.name),i=Mm(t.updateTime),s=t.createTime?Mm(t.createTime):fd.min(),o=new fp({mapValue:{fields:t.fields}}),a=gp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Km(e,t){let n;if(t instanceof Xg)n={update:Hm(e,t.key,t.value)};else if(t instanceof tm)n={delete:Um(e,t.key)};else if(t instanceof Jg)n={update:Hm(e,t.key,t.data),updateMask:sy(t.fieldMask)};else{if(!(t instanceof nm))return Kh();n={verify:Um(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Dg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ng)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Kh()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Om(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kh()}(e,t.precondition)),n}function Qm(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Bg.updateTime(Mm(e.updateTime)):void 0!==e.exists?Bg.exists(e.exists):Bg.none()}(t.currentDocument):Bg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Qh("REQUEST_TIME"===t.setToServerValue),n=new Dg;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ng(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Mg(e)}else"increment"in t?n=new Fg(e,t.increment):Kh();const r=yd.fromServerFormat(t.fieldPath);return new Vg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Vm(e,t.update.name),s=new fp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Of(t.map((e=>yd.fromServerFormat(e))))}(t.updateMask);return new Jg(i,s,e,n,r)}return new Xg(i,s,n,r)}if(t.delete){const r=Vm(e,t.delete);return new tm(r,n)}if(t.verify){const r=Vm(e,t.verify);return new nm(r,n)}return Kh()}function Ym(e,t){return{documents:[zm(e,t.path)]}}function Xm(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zm(e,i);const s=function(e){if(0!==e.length)return iy(Sp.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ny(e.field),direction:Zm(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rm(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Jm(e){let t=Bm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=$m(e);return t instanceof Sp&&kp(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new bp(ry(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Hd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mp(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mp(n,t)}(n.endAt)),Yp(t,i,o,s,a,"F",l,c)}function $m(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ry(e.unaryFilter.field);return xp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ry(e.unaryFilter.field);return xp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ry(e.unaryFilter.field);return xp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ry(e.unaryFilter.field);return xp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kh()}}(e):void 0!==e.fieldFilter?function(e){return xp.create(ry(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Sp.create(e.compositeFilter.filters.map((e=>$m(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Kh()}}(e.compositeFilter.op))}(e):Kh()}function Zm(e){return Tm[e]}function ey(e){return Cm[e]}function ty(e){return Am[e]}function ny(e){return{fieldPath:e.canonicalString()}}function ry(e){return yd.fromServerFormat(e.fieldPath)}function iy(e){return e instanceof xp?function(e){if("=="===e.op){if(sp(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NAN"}};if(ip(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sp(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NOT_NAN"}};if(ip(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ny(e.field),op:ey(e.op),value:e.value}}}(e):e instanceof Sp?function(e){const t=e.getFilters().map((e=>iy(e)));return 1===t.length?t[0]:{compositeFilter:{op:ty(e.op),filters:t}}}(e):Kh()}function sy(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function oy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ay{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fd.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ay(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ly{constructor(e){this.ct=e}}function cy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Um(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dm(e,t.version.toTimestamp()),createTime:Dm(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hy(t.version)};else{if(!t.isUnknownDocument())return Kh();r.unknownDocument={path:n.path.toArray(),version:hy(t.version)}}return r}function uy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hy(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dy(e){const t=new dd(e.seconds,e.nanoseconds);return fd.fromTimestamp(t)}function fy(e,t){const n=(t.baseMutations||[]).map((t=>Qm(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Qm(e.ct,t))),i=dd.fromMillis(t.localWriteTimeMs);return new rm(t.batchId,i,n,r)}function py(e){const t=dy(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?dy(e.lastLimboFreeSnapshotVersion):fd.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Qh(1===e.documents.length),eg(Xp(Bm(e.documents[0])))}(e.query):function(e){return eg(Jm(e))}(e.query),new ay(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Lf.fromBase64String(e.resumeToken))}function gy(e,t){const n=hy(t.snapshotVersion),r=hy(t.lastLimboFreeSnapshotVersion);let i;i=Wp(t.target)?Ym(e.ct,t.target):Xm(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bp(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function my(e){const t=Jm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rg(t,t.limit,"L"):t}function yy(e,t){return new sm(t.largestBatchId,Qm(e.ct,t.overlayMutation))}function vy(e,t){const n=t.path.lastSegment();return[e,Qd(t.path.popLast()),n]}function by(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:hy(r.readTime),documentKey:Qd(r.documentKey.path),largestBatchId:r.largestBatchId}}class _y{getBundleMetadata(e,t){return wy(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:dy(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return wy(e).put(function(e){return{bundleId:e.id,createTime:hy(Mm(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return xy(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:my(e.bundledQuery),readTime:dy(e.readTime)}}(e)}))}saveNamedQuery(e,t){return xy(e).put(function(e){return{name:e.name,readTime:hy(Mm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function wy(e){return Ef(e,"bundles")}function xy(e){return Ef(e,"namedQueries")}class Sy{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Sy(e,n)}getOverlay(e,t){return Ey(e).get(vy(this.userId,t)).next((e=>e?yy(this.serializer,e):null))}getOverlays(e,t){const n=yg();return Rd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new sm(t,i);r.push(this.ht(e,s))})),Rd.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Qd(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Ey(e).j("collectionPathOverlayIndex",r))})),Rd.waitFor(i)}getOverlaysForCollection(e,t,n){const r=yg(),i=Qd(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ey(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=yy(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=yg();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ey(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=yy(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Ey(e).put(function(e,t,n){const[r,i,s]=vy(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Km(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Ey(e){return Ef(e,"documentOverlays")}class Iy{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Uf(e.integerValue));else if("doubleValue"in e){const n=Uf(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Gd(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=jf(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Vf(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?lp(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Kh()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),vd.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function ky(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ty(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ky(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Iy.bt=new Iy;class Cy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=Ty(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=Ty(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ay{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Py{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Ry{constructor(){this.Gt=new Cy,this.zt=new Ay(this.Gt),this.jt=new Py(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Dy{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Dy(this.indexId,this.documentKey,this.arrayValue,n)}}function Ny(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Oy(e.arrayValue,t.arrayValue),0!==n?n:(n=Oy(e.directionalValue,t.directionalValue),0!==n?n:vd.comparator(e.documentKey,t.documentKey)))}function Oy(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class My{constructor(e){this.Yt=new Rf(((e,t)=>yd.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Qh(e.collectionGroup===this.collectionId),this.en)return!1;const t=_d(e);if(void 0!==t&&!this.nn(t))return!1;const n=wd(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Rf(yd.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new xd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new xd(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new xd(n.field,"asc"===n.dir?0:1)));return new bd(bd.UNKNOWN_ID,this.collectionId,t,Sd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ly(e){var t,n;if(Qh(e instanceof xp||e instanceof Sp),e instanceof xp){if(e instanceof Fp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>xp.create(e.field,"==",t))))||[];return Sp.create(r,"or")}return e}const r=e.filters.map((e=>Ly(e)));return Sp.create(r,e.op)}function Fy(e){if(0===e.getFilters().length)return[];const t=zy(Ly(e));return Qh(Vy(t)),jy(t)||Uy(t)?[t]:t.getFilters()}function jy(e){return e instanceof xp}function Uy(e){return e instanceof Sp&&kp(e)}function Vy(e){return jy(e)||Uy(e)||function(e){if(e instanceof Sp&&Ip(e)){for(const t of e.getFilters())if(!jy(t)&&!Uy(t))return!1;return!0}return!1}(e)}function zy(e){if(Qh(e instanceof xp||e instanceof Sp),e instanceof xp)return e;if(1===e.filters.length)return zy(e.filters[0]);const t=e.filters.map((e=>zy(e)));let n=Sp.create(t,e.op);return n=Wy(n),Vy(n)?n:(Qh(n instanceof Sp),Qh(Ep(n)),Qh(n.filters.length>1),n.filters.reduce(((e,t)=>By(e,t))))}function By(e,t){let n;return Qh(e instanceof xp||e instanceof Sp),Qh(t instanceof xp||t instanceof Sp),n=e instanceof xp?t instanceof xp?function(e,t){return Sp.create([e,t],"and")}(e,t):qy(e,t):t instanceof xp?qy(t,e):function(e,t){if(Qh(e.filters.length>0&&t.filters.length>0),Ep(e)&&Ep(t))return Pp(e,t.getFilters());const n=Ip(e)?e:t,r=Ip(e)?t:e,i=n.filters.map((e=>By(e,r)));return Sp.create(i,"or")}(e,t),Wy(n)}function qy(e,t){if(Ep(t))return Pp(t,e.getFilters());{const n=t.filters.map((t=>By(e,t)));return Sp.create(n,"or")}}function Wy(e){if(Qh(e instanceof xp||e instanceof Sp),e instanceof xp)return e;const t=e.getFilters();if(1===t.length)return Wy(t[0]);if(Tp(e))return e;const n=t.map((e=>Wy(e))),r=[];return n.forEach((t=>{t instanceof xp?r.push(t):t instanceof Sp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Sp.create(r,e.op)}class Hy{constructor(){this._n=new Gy}addToCollectionParentIndex(e,t){return this._n.add(t),Rd.resolve()}getCollectionParents(e,t){return Rd.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Rd.resolve()}deleteFieldIndex(e,t){return Rd.resolve()}deleteAllFieldIndexes(e){return Rd.resolve()}createTargetIndexes(e,t){return Rd.resolve()}getDocumentsMatchingTarget(e,t){return Rd.resolve(null)}getIndexType(e,t){return Rd.resolve(0)}getFieldIndexes(e,t){return Rd.resolve([])}getNextCollectionGroupToUpdate(e){return Rd.resolve(null)}getMinOffset(e,t){return Rd.resolve(kd.min())}getMinOffsetFromCollectionGroup(e,t){return Rd.resolve(kd.min())}updateCollectionGroup(e,t,n){return Rd.resolve()}updateIndexEntries(e,t){return Rd.resolve()}}class Gy{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rf(gd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Rf(gd.comparator)).toArray()}}const Ky=new Uint8Array(0);class Qy{constructor(e,t){this.databaseId=t,this.an=new Gy,this.un=new hg((e=>Bp(e)),((e,t)=>qp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Qd(r)};return Yy(e).put(i)}return Rd.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[hd(t),""],!1,!0);return Yy(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Jd(r.parent))}return n}))}addFieldIndex(e,t){const n=Jy(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=$y(e);return i.next((e=>{n.put(by(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Jy(e),r=$y(e),i=Xy(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jy(e),n=Xy(e),r=$y(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Rd.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new My(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Xy(e);let r=!0;const i=new Map;return Rd.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=xg();const r=[];return Rd.forEach(i,((i,s)=>{qh("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Bp(t)));const o=function(e,t){const n=_d(t);if(void 0===n)return null;for(const r of Hp(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of wd(t))for(const t of Hp(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of wd(t)){const t=0===i.kind?Gp(e,i.fieldPath,e.startAt):Kp(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new mp(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of wd(t)){const t=0===i.kind?Kp(e,i.fieldPath,e.endAt):Gp(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new mp(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Rd.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=vd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Rd.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Fy(Sp.create(e.filters,"and")).map((t=>zp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Ky,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new Dy(e,vd.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Dy(e,vd.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new My(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Rd.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Rf(yd.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Ry;for(const r of wd(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Iy.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Ry;return Iy.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Ry;return Iy.bt.Pt(tp(this.databaseId,t),n.Ht(function(e){const t=wd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Ry);let i=0;for(const s of wd(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&rp(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Iy.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Ry;n.seed(e.Wt()),Iy.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof xp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Jy(e),r=$y(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Rd.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Sd(t.sequenceNumber,new kd(dy(t.readTime),new vd(Jd(t.documentKey)),t.largestBatchId)):Sd.empty(),r=e.fields.map((e=>{let[t,n]=e;return new xd(yd.fromServerFormat(t),n)}));return new bd(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:cd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Jy(e),i=$y(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Rd.forEach(t,(t=>i.put(by(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Rd.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Rd.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Rd.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Rd.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Xy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Xy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Xy(e);let i=new Rf(Ny);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Dy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Rf(Ny);const r=this.An(t,e);if(null==r)return n;const i=_d(t);if(null!=i){const s=e.data.field(i.fieldPath);if(rp(s))for(const i of s.arrayValue.values||[])n=n.add(new Dy(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Dy(t.indexId,e.key,Ky,r));return n}wn(e,t,n,r,i){qh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Nf(s),l=Nf(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Nf(o)):t?(i(a),a=Nf(s)):(a=Nf(s),l=Nf(o))}}(r,i,Ny,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Rd.waitFor(s)}gn(e){let t=1;return $y(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ny(e,t))).filter(((e,t,n)=>!t||0!==Ny(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Ny(s,e),i=Ny(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ky,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ky,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Ny(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zy)}getMinOffset(e,t){return Rd.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Kh())))).next(Zy)}}function Yy(e){return Ef(e,"collectionParents")}function Xy(e){return Ef(e,"indexEntries")}function Jy(e){return Ef(e,"indexConfiguration")}function $y(e){return Ef(e,"indexState")}function Zy(e){Qh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Td(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kd(t.readTime,t.documentKey,n)}const ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tv(e,tv.DEFAULT_COLLECTION_PERCENTILE,tv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nv(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Qh(1===a)})));const c=[];for(const u of n.mutations){const e=ef(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Rd.waitFor(s).next((()=>c))}function rv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Kh();t=e.noDocument}return JSON.stringify(t).length}tv.DEFAULT_COLLECTION_PERCENTILE=10,tv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tv.DEFAULT=new tv(41943040,tv.DEFAULT_COLLECTION_PERCENTILE,tv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tv.DISABLED=new tv(-1,0,0);class iv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Qh(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new iv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ov(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=av(e),s=ov(e);return s.add({}).next((o=>{Qh("number"==typeof o);const a=new rm(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Km(e.ct,t))),i=n.mutations.map((t=>Km(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Rf(((e,t)=>cd(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ef(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,tf))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Rd.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return ov(e).get(t).next((e=>e?(Qh(e.userId===this.userId),fy(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Rd.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ov(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Qh(t.batchId>=n),i=fy(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ov(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ov(e).U("userMutationsIndex",t).next((e=>e.map((e=>fy(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Zd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return av(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Jd(a);if(o===this.userId&&t.path.isEqual(c))return ov(e).get(l).next((e=>{if(!e)throw Kh();Qh(e.userId===this.userId),i.push(fy(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rf(cd);const r=[];return t.forEach((t=>{const i=Zd(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=av(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Jd(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Rd.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Zd(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Rf(cd);return av(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Jd(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(ov(e).get(t).next((e=>{if(null===e)throw Kh();Qh(e.userId===this.userId),n.push(fy(this.serializer,e))})))})),Rd.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return nv(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Rd.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Rd.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return av(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Jd(e[1]);r.push(t)}else n.done()})).next((()=>{Qh(0===r.length)}))}))}containsKey(e,t){return sv(e,this.userId,t)}xn(e){return lv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function sv(e,t,n){const r=Zd(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return av(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function ov(e){return Ef(e,"mutations")}function av(e){return Ef(e,"documentMutations")}function lv(e){return Ef(e,"mutationQueues")}class cv{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new cv(0)}static Ln(){return new cv(-1)}}class uv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new cv(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>fd.fromTimestamp(new dd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>hv(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Qh(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return hv(e).J(((s,o)=>{const a=py(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Rd.waitFor(i))).next((()=>r))}forEachTarget(e,t){return hv(e).J(((e,n)=>{const r=py(n);t(r)}))}Bn(e){return dv(e).get("targetGlobalKey").next((e=>(Qh(null!==e),e)))}kn(e,t){return dv(e).put("targetGlobalKey",t)}qn(e,t){return hv(e).put(gy(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Bp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hv(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=py(n);qp(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=fv(e);return t.forEach((t=>{const s=Qd(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Rd.waitFor(r)}removeMatchingKeys(e,t,n){const r=fv(e);return Rd.forEach(t,(t=>{const i=Qd(t.path);return Rd.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=fv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fv(e);let i=xg();return r.J({range:n,H:!0},((e,t,n)=>{const r=Jd(e[1]),s=new vd(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Qd(t.path),r=IDBKeyRange.bound([n],[hd(n)],!1,!0);let i=0;return fv(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return hv(e).get(t).next((e=>e?py(e):null))}}function hv(e){return Ef(e,"targets")}function dv(e){return Ef(e,"targetGlobal")}function fv(e){return Ef(e,"targetDocuments")}function pv(e,t){let[n,r]=e,[i,s]=t;const o=cd(n,i);return 0===o?cd(r,s):o}class gv{constructor(e){this.Kn=e,this.buffer=new Rf(pv),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){qh("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fd(e)?qh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Pd(e)}await this.zn(3e5)}))}}class yv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Rd.resolve(Wd.oe);const n=new gv(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qh("LruGarbageCollector","Garbage collection skipped; disabled"),Rd.resolve(ev)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(qh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ev):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(qh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Bh()<=Si.DEBUG&&qh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Rd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function vv(e,t){return new yv(e,t)}class bv{constructor(e,t){this.db=e,this.garbageCollector=vv(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return _v(e,n)}removeReference(e,t,n){return _v(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return _v(e,t)}er(e,t){return function(e,t){let n=!1;return lv(e).Y((r=>sv(e,r,t).next((e=>(e&&(n=!0),Rd.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,fd.min()),fv(e).delete(function(e){return[0,Qd(e.path)]}(s)))))}));r.push(t)}})).next((()=>Rd.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return _v(e,t)}Xn(e,t){const n=fv(e);let r,i=Wd.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Wd.oe&&t(new vd(Jd(r)),i),i=l,r=a):i=Wd.oe})).next((()=>{i!==Wd.oe&&t(new vd(Jd(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _v(e,t){return fv(e).put(function(e,t){return{targetId:0,path:Qd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class wv{constructor(){this.changes=new hg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Rd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return kv(e).put(n)}removeEntry(e,t,n){return kv(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=gp.newInvalidDocument(t);return kv(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tv(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:gp.newInvalidDocument(t)};return kv(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tv(t))},((e,r)=>{n={document:this.nr(t,r),size:rv(r)}})).next((()=>n))}getEntries(e,t){let n=fg();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=fg(),r=new Cf(vd.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,rv(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Rd.resolve();let r=new Rf(Av);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Tv(r.first()),Tv(r.last())),s=r.getIterator();let o=s.getNext();return kv(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=vd.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Av(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(Tv(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),uy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kv(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=fg();for(const i of e){const e=this.nr(vd.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ag(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=fg();const s=Cv(t,n),o=Cv(t,kd.max());return kv(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(vd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Ev(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Iv(e).get("remoteDocumentGlobalKey").next((e=>(Qh(!!e),e)))}tr(e,t){return Iv(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gm(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=vd.fromSegments(t.noDocument.path),r=dy(t.noDocument.readTime);n=gp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Kh();{const e=vd.fromSegments(t.unknownDocument.path),r=dy(t.unknownDocument.version);n=gp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new dd(e[0],e[1]);return fd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(fd.min()))return e}return gp.newInvalidDocument(e)}}function Sv(e){return new xv(e)}class Ev extends wv{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new hg((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Rf(((e,t)=>cd(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=cy(this.ar.serializer,s);r=r.add(i.path.popLast());const l=rv(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=cy(this.ar.serializer,s.convertToNoDocument(fd.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Rd.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Iv(e){return Ef(e,"remoteDocumentGlobal")}function kv(e){return Ef(e,"remoteDocumentsV14")}function Tv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Cv(e,t){const n=t.documentKey.path.toArray();return[e,uy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Av(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=cd(n[s],r[s]),i)return i;return i=cd(n.length,r.length),i||(i=cd(n[n.length-2],r[r.length-2]),i||cd(n[n.length-1],r[r.length-1]))}class Pv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Kg(n.mutation,e,Of.empty(),dd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,xg()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xg();const r=yg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=gg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=yg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,xg())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=fg();const s=bg(),o=bg();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Jg)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Kg(o.mutation,t,o.mutation.getFieldMask(),dd.now())):s.set(t.key,Of.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Pv(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=bg();let r=new Cf(((e,t)=>e-t)),i=xg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Of.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||xg()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=vg();l.forEach((e=>{if(!i.has(e)){const r=Hg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Rd.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$p(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Rd.resolve(yg());let o=-1,a=i;return s.next((t=>Rd.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Rd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,xg()))).next((e=>({batchId:o,changes:mg(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vd(t)).next((e=>{let t=gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=gg();return this.indexManager.getCollectionParents(e,i).next((o=>Rd.forEach(o,(o=>{const a=function(e,t){return new Qp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gp.newInvalidDocument(r)))}));let n=gg();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Kg(s.mutation,r,Of.empty(),dd.now()),ag(t,r)&&(n=n.insert(e,r))})),n}))}}class Dv{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Rd.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Mm(e.createTime)}}(t)),Rd.resolve()}getNamedQuery(e,t){return Rd.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:my(e.bundledQuery),readTime:Mm(e.readTime)}}(t)),Rd.resolve()}}class Nv{constructor(){this.overlays=new Cf(vd.comparator),this.hr=new Map}getOverlay(e,t){return Rd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=yg();return Rd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Rd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Rd.resolve()}getOverlaysForCollection(e,t,n){const r=yg(),i=t.length+1,s=new vd(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Rd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Cf(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=yg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=yg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Rd.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sm(t,n));let i=this.hr.get(t);void 0===i&&(i=xg(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Ov{constructor(){this.Pr=new Rf(Mv.Ir),this.Tr=new Rf(Mv.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Mv(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Mv(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new vd(new gd([])),n=new Mv(t,e),r=new Mv(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new vd(new gd([])),n=new Mv(t,e),r=new Mv(t,e+1);let i=xg();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Mv(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mv{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return vd.comparator(e.key,t.key)||cd(e.pr,t.pr)}static Er(e,t){return cd(e.pr,t.pr)||vd.comparator(e.key,t.key)}}class Lv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Rf(Mv.Ir)}checkEmpty(e){return Rd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rm(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Mv(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Rd.resolve(s)}lookupMutationBatch(e,t){return Rd.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Rd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Rd.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Rd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mv(t,0),r=new Mv(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Rd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rf(cd);return t.forEach((e=>{const t=new Mv(e,0),r=new Mv(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Rd.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;vd.isDocumentKey(i)||(i=i.child(""));const s=new Mv(new vd(i),0);let o=new Rf(cd);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Rd.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qh(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Rd.forEach(t.mutations,(r=>{const i=new Mv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Mv(t,0),r=this.wr.firstAfterOrEqual(n);return Rd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Rd.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fv{constructor(e){this.vr=e,this.docs=new Cf(vd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Rd.resolve(n?n.document.mutableCopy():gp.newInvalidDocument(t))}getEntries(e,t){let n=fg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gp.newInvalidDocument(e))})),Rd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fg();const s=t.path,o=new vd(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Td(Id(o),n)<=0||(r.has(o.key)||ag(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Rd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Kh()}Fr(e,t){return Rd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new jv(this)}getSize(e){return Rd.resolve(this.size)}}class jv extends wv{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Rd.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Uv{constructor(e){this.persistence=e,this.Mr=new hg((e=>Bp(e)),qp),this.lastRemoteSnapshotVersion=fd.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ov,this.targetCount=0,this.Lr=cv.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Rd.resolve()}getLastRemoteSnapshotVersion(e){return Rd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rd.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Rd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Rd.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new cv(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Rd.resolve()}updateTargetData(e,t){return this.qn(t),Rd.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Rd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Rd.waitFor(i).next((()=>r))}getTargetCount(e){return Rd.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Rd.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Rd.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Rd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Rd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Rd.resolve(n)}containsKey(e,t){return Rd.resolve(this.Nr.containsKey(t))}}class Vv{constructor(e,t){this.Br={},this.overlays={},this.kr=new Wd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Uv(this),this.indexManager=new Hy,this.remoteDocumentCache=function(e){return new Fv(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new ly(t),this.$r=new Dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Lv(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){qh("MemoryPersistence","Starting transaction:",e);const r=new zv(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Rd.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class zv extends Ad{constructor(e){super(),this.currentSequenceNumber=e}}class Bv{constructor(e){this.persistence=e,this.zr=new Ov,this.jr=null}static Hr(e){return new Bv(e)}get Jr(){if(this.jr)return this.jr;throw Kh()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Rd.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Rd.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Rd.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rd.forEach(this.Jr,(n=>{const r=vd.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,fd.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Rd.or([()=>Rd.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class qv{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Dd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wv(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Rd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wv(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Rd.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:pf});t.createIndex("collectionPathOverlayIndex",gf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",mf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:nf});t.createIndex("documentKeyIndex",rf),t.createIndex("collectionGroupIndex",sf)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:uf}).createIndex("sequenceNumberIndex",hf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:df}).createIndex("documentKeyIndex",ff,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=rv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Rd.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Rd.forEach(n,(n=>{Qh(n.userId===t.userId);const r=fy(this.serializer,n);return nv(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new gd(n),o=function(e){return[0,Qd(e)]}(s);r.push(t.get(o).next((n=>n?Rd.resolve():(n=>t.put({targetId:0,path:Qd(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Rd.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:cf});const n=t.store("collectionParents"),r=new Gy,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Qd(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new gd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Jd(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=py(n),i=gy(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new vd(gd.fromString(e.document.name).popFirst(5)):e.noDocument?vd.fromSegments(e.noDocument.path):e.unknownDocument?vd.fromSegments(e.unknownDocument.path):Kh()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Rd.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Sv(this.serializer),i=new Vv(Bv.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:xg();fy(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Rd.forEach(n,((e,n)=>{const s=new Uh(n),o=Sy.lt(this.serializer,s),a=i.getIndexManager(s),l=iv.lt(s,this.serializer,a,i.referenceDelegate);return new Rv(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Sf(t,Wd.oe),e).next()}))}))}}function Wv(e){e.createObjectStore("targetDocuments",{keyPath:af}).createIndex("documentTargetsIndex",lf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",of,{unique:!0}),e.createObjectStore("targetGlobal")}const Hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gv{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Gv.D())throw new Jh(Xh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bv(this,r),this.Ti=t+"main",this.serializer=new ly(a),this.Ei=new Nd(this.Ti,this.ui,new qv(this.serializer)),this.Qr=new uv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sv(this.serializer),this.$r=new _y,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Wh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jh(Xh.FAILED_PRECONDITION,Hv);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Wd(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Fd(e))return qh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Kv(e).get("owner").next((e=>Rd.resolve(this.Si(e))))}bi(e){return Qv(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ef(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Rd.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Rd.resolve(!0):Kv(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Jh(Xh.FAILED_PRECONDITION,Hv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qv(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&qh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Sf(e,Wd.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Qv(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return iv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sy.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){qh("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?xf:15===e?wf:14===e?_f:13===e?bf:12===e?vf:11===e?yf:void Kh()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Sf(r,this.kr?this.kr.next():Wd.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Wh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Jh(Xh.FAILED_PRECONDITION,Cd);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Kv(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Jh(Xh.FAILED_PRECONDITION,Hv)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kv(e).put("owner",t)}static D(){return Nd.D()}yi(e){const t=Kv(e);return t.get("owner").next((e=>this.Si(e)?(qh("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rd.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Wh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ni()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return qh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(zL){Wh("Failed to set zombie client id.",zL)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(zL){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Kv(e){return Ef(e,"owner")}function Qv(e){return Ef(e,"clientMetadata")}function Yv(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Xv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=xg(),r=xg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xv(e,t.fromCache,n,r)}}class Jv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $v{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ni()?8:Od(Yr())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Jv;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Bh()<=Si.DEBUG&&qh("QueryEngine","SDK will not create cache indexes for query:",og(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Rd.resolve()):(Bh()<=Si.DEBUG&&qh("QueryEngine","Query:",og(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Bh()<=Si.DEBUG&&qh("QueryEngine","The SDK decides to create cache indexes for query:",og(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eg(t))):Rd.resolve())}ji(e,t){if(Jp(t))return Rd.resolve(null);let n=eg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=rg(t,null,"F"),n=eg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=xg(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,rg(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Jp(t)||r.isEqual(fd.min())?Rd.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Rd.resolve(null):(Bh()<=Si.DEBUG&&qh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),og(t)),this.es(e,s,t,Ed(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Rf(cg(e));return t.forEach(((t,r)=>{ag(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Bh()<=Si.DEBUG&&qh("QueryEngine","Using full collection scan to execute query:",og(t)),this.zi.getDocumentsMatchingQuery(e,t,kd.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Zv{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Cf(cd),this.rs=new hg((e=>Bp(e)),qp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rv(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function eb(e,t,n,r){return new Zv(e,t,n,r)}async function tb(e,t){const n=Yh(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=xg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function nb(e){const t=Yh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function rb(e,t,n){let r=xg(),i=xg();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=fg();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(fd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):qh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function ib(e,t){const n=Yh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function sb(e,t){const n=Yh(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Rd.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new ay(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function ob(e,t,n){const r=Yh(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Fd(e))throw e;qh("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function ab(e,t,n){const r=Yh(e);let i=fd.min(),s=xg();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Yh(e),i=r.rs.get(n);return void 0!==i?Rd.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,eg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:fd.min(),n?s:xg()))).next((e=>(ub(r,lg(t),e),{documents:e,hs:s})))))}function lb(e,t){const n=Yh(e),r=Yh(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function cb(e,t){const n=Yh(e),r=n.ss.get(t)||fd.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Ed(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ub(n,t,e),e)))}function ub(e,t,n){let r=e.ss.get(t)||fd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function hb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xg();const r=await sb(e,eg(my(t.bundledQuery))),i=Yh(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Mm(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Lf.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function db(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function fb(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function pb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class gb{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Jh(r.error.code,r.error.message))),s?new gb(e,t,r.state,i):(Wh("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mb{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Jh(n.error.code,n.error.message))),i?new mb(e,n.state,r):(Wh("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Eg();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Kd(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new yb(e,i):(Wh("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class vb{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vb(t.clientId,t.onlineState):(Wh("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class bb{constructor(){this.activeTargetIds=Eg()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _b{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Cf(cd),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=db(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new bb),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(db(this.persistenceKey,n));if(e){const t=yb.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(pb(this.persistenceKey,e));if(n){const r=mb.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pb(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qh("SharedClientState","READ",e,t),t}setItem(e,t){qh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(qh("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Wh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Wd.oe;if(null!=e)try{const n=JSON.parse(e);Qh("number"==typeof n),t=n}catch(e){Wh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Wd.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new gb(this.currentUser,e,t,n),i=fb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=fb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=pb(this.persistenceKey,e),i=new mb(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return yb.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gb.Es(new Uh(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return mb.Es(r,t)}xs(e){return vb.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);qh("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Eg();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class wb{constructor(){this.no=new bb,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new bb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xb{io(e){}shutdown(){}}class Sb{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){qh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){qh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eb=null;function Ib(){return null===Eb?Eb=268435456+Math.round(2147483648*Math.random()):Eb++,"0x"+Eb.toString(16)}const kb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tb{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Cb="WebChannelConnection";class Ab extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=Ib(),o=this.vo(e,t.toUriEncodedString());qh("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(qh("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Hh("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=kb[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=Ib();return new Promise(((s,o)=>{const a=new Th;a.setWithCredentials(!0),a.listenOnce(Ph.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Rh.NO_ERROR:const t=a.getResponseJson();qh(Cb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Rh.TIMEOUT:qh(Cb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Jh(Xh.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const n=a.getStatus();if(qh(Cb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xh).indexOf(t)>=0?t:Xh.UNKNOWN}(t.status);o(new Jh(e,t.message))}else o(new Jh(Xh.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Jh(Xh.UNAVAILABLE,"Connection failed."));break;default:Kh()}}finally{qh(Cb,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);qh(Cb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=Ib(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mh(),o=Oh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Ch({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");qh(Cb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Tb({lo:t=>{d?qh(Cb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(qh(Cb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),qh(Cb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ah.EventType.OPEN,(()=>{d||(qh(Cb,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,Ah.EventType.CLOSE,(()=>{d||(d=!0,qh(Cb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,Ah.EventType.ERROR,(t=>{d||(d=!0,Hh(Cb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new Jh(Xh.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ah.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Qh(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){qh(Cb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=am[e];if(void 0!==t)return um(t)}(t),i=o.message;void 0===n&&(n=Xh.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new Jh(n,i)),u.close()}else qh(Cb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(o,Nh.STAT_EVENT,(t=>{t.stat===Dh.PROXY?qh(Cb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Dh.NOPROXY&&qh(Cb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Pb(){return"undefined"!=typeof window?window:null}function Rb(){return"undefined"!=typeof document?document:null}function Db(e){return new Pm(e,!0)}class Nb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&qh("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Ob{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Nb(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Xh.RESOURCE_EXHAUSTED?(Wh(t.toString()),Wh("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Xh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new Jh(Xh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return qh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(qh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mb extends Ob{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qh(void 0===t||"string"==typeof t),Lf.fromBase64String(t||"")):(Qh(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Lf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Xh.UNKNOWN:um(e.code);return new Jh(t,e.message||"")}(o);n=new xm(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vm(e,r.document.name),s=Mm(r.document.updateTime),o=r.document.createTime?Mm(r.document.createTime):fd.min(),a=new fp({mapValue:{fields:r.document.fields}}),l=gp.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new _m(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Vm(e,r.document),s=r.readTime?Mm(r.readTime):fd.min(),o=gp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _m([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Vm(e,r.document),s=r.removedTargetIds||[];n=new _m([],s,i,null)}else{if(!("filter"in t))return Kh();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new om(r,i),o=e.targetId;n=new wm(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fd.min():t.readTime?Mm(t.readTime):fd.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=qm(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wp(r)?{documents:Ym(e,r)}:{query:Xm(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Nm(e,t.resumeToken);const r=Rm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(fd.min())>0){n.readTime=Dm(e,t.snapshotVersion.toTimestamp());const r=Rm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kh()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=qm(this.serializer),t.removeTarget=e,this.i_(t)}}class Lb extends Ob{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Qh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Qh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Mm(e.updateTime):Mm(t);return n.isEqual(fd.min())&&(n=Mm(t)),new zg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Mm(e.commitTime);return this.listener.A_(n,t)}return Qh(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=qm(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Km(this.serializer,e)))};this.i_(t)}}class Fb extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Jh(Xh.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,Fm(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jh(Xh.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,Fm(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jh(Xh.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class jb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Wh(t),this.y_=!1):qh("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Ub{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Qb(this)&&(qh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yh(e);t.M_.add(4),await zb(t),t.N_.set("Unknown"),t.M_.delete(4),await Vb(t)}(this))}))})),this.N_=new jb(n,r)}}async function Vb(e){if(Qb(e))for(const t of e.x_)await t(!0)}async function zb(e){for(const t of e.x_)await t(!1)}function Bb(e,t){const n=Yh(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Kb(n)?Gb(n):f_(n).Xo()&&Wb(n,t))}function qb(e,t){const n=Yh(e),r=f_(n);n.F_.delete(t),r.Xo()&&Hb(n,t),0===n.F_.size&&(r.Xo()?r.n_():Qb(n)&&n.N_.set("Unknown"))}function Wb(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}f_(e).P_(t)}function Hb(e,t){e.L_.xe(t),f_(e).I_(t)}function Gb(e){e.L_=new Em({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),f_(e).start(),e.N_.w_()}function Kb(e){return Qb(e)&&!f_(e).Zo()&&e.F_.size>0}function Qb(e){return 0===Yh(e).M_.size}function Yb(e){e.L_=void 0}async function Xb(e){e.N_.set("Online")}async function Jb(e){e.F_.forEach(((t,n)=>{Wb(e,t)}))}async function $b(e,t){Yb(e),Kb(e)?(e.N_.D_(t),Gb(e)):e.N_.set("Unknown")}async function Zb(e,t,n){if(e.N_.set("Online"),t instanceof xm&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){qh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await e_(e,n)}else if(t instanceof _m?e.L_.Ke(t):t instanceof wm?e.L_.He(t):e.L_.We(t),!n.isEqual(fd.min()))try{const t=await nb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Lf.EMPTY_BYTE_STRING,r.snapshotVersion)),Hb(e,t);const i=new ay(r.target,t,n,r.sequenceNumber);Wb(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){qh("RemoteStore","Failed to raise snapshot:",t),await e_(e,t)}}async function e_(e,t,n){if(!Fd(t))throw t;e.M_.add(1),await zb(e),e.N_.set("Offline"),n||(n=()=>nb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{qh("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Vb(e)}))}function t_(e,t){return t().catch((n=>e_(e,n,t)))}async function n_(e){const t=Yh(e),n=p_(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;r_(t);)try{const e=await ib(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,i_(t,e)}catch(e){await e_(t,e)}s_(t)&&o_(t)}function r_(e){return Qb(e)&&e.v_.length<10}function i_(e,t){e.v_.push(t);const n=p_(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function s_(e){return Qb(e)&&!p_(e).Zo()&&e.v_.length>0}function o_(e){p_(e).start()}async function a_(e){p_(e).V_()}async function l_(e){const t=p_(e);for(const n of e.v_)t.d_(n.mutations)}async function c_(e,t,n){const r=e.v_.shift(),i=im.from(r,t,n);await t_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await n_(e)}async function u_(e,t){t&&p_(e).E_&&await async function(e,t){if(function(e){return cm(e)&&e!==Xh.ABORTED}(t.code)){const n=e.v_.shift();p_(e).t_(),await t_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await n_(e)}}(e,t),s_(e)&&o_(e)}async function h_(e,t){const n=Yh(e);n.asyncQueue.verifyOperationInProgress(),qh("RemoteStore","RemoteStore received new credentials");const r=Qb(n);n.M_.add(3),await zb(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Vb(n)}async function d_(e,t){const n=Yh(e);t?(n.M_.delete(2),await Vb(n)):t||(n.M_.add(2),await zb(n),n.N_.set("Unknown"))}function f_(e){return e.B_||(e.B_=function(e,t,n){const r=Yh(e);return r.f_(),new Mb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Xb.bind(null,e),To:Jb.bind(null,e),Ao:$b.bind(null,e),h_:Zb.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Kb(e)?Gb(e):e.N_.set("Unknown")):(await e.B_.stop(),Yb(e))}))),e.B_}function p_(e){return e.k_||(e.k_=function(e,t,n){const r=Yh(e);return r.f_(),new Lb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:a_.bind(null,e),Ao:u_.bind(null,e),R_:l_.bind(null,e),A_:c_.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await n_(e)):(await e.k_.stop(),e.v_.length>0&&(qh("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class g_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $h,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new g_(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jh(Xh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m_(e,t){if(Wh("AsyncQueue","".concat(t,": ").concat(e)),Fd(e))return new Jh(Xh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class y_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||vd.comparator(t.key,n.key):(e,t)=>vd.comparator(e.key,t.key),this.keyedMap=gg(),this.sortedSet=new Cf(this.comparator)}static emptySet(e){return new y_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof y_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new y_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class v_{constructor(){this.q_=new Cf(vd.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Kh():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class b_{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new b_(e,t,y_.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class __{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class w_{constructor(){this.queries=new hg((e=>sg(e)),ig),this.onlineState="Unknown",this.z_=new Set}}async function x_(e,t){const n=Yh(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new __,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=m_(e,"Initialization of query '".concat(og(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&k_(n)}async function S_(e,t){const n=Yh(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E_(e,t){const n=Yh(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&k_(n)}function I_(e,t,n){const r=Yh(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function k_(e){e.z_.forEach((e=>{e.next()}))}var T_,C_;(C_=T_||(T_={})).J_="default",C_.Cache="cache";class A_{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new b_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=b_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==T_.Cache}}class P_{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class R_{constructor(e){this.serializer=e}Ps(e){return Vm(this.serializer,e)}Is(e){return e.metadata.exists?Gm(this.serializer,e.document,!1):gp.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Mm(e)}}class D_{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=N_(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=gd.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new R_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||xg()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Yh(e);let s=xg(),o=fg();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await sb(i,function(e){return eg(Xp(gd.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>rb(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new R_(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await hb(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function N_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class O_{constructor(e){this.key=e}}class M_{constructor(e){this.key=e}}class L_{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=xg(),this.mutatedKeys=xg(),this.Ia=cg(e),this.Ta=new y_(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new v_,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ag(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kh()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new b_(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new v_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=xg(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new M_(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new O_(n))})),t}pa(e){this.la=e.hs,this.Pa=xg();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return b_.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class F_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class j_{constructor(e){this.key=e,this.wa=!1}}class U_{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new hg((e=>sg(e)),ig),this.Da=new Map,this.Ca=new Set,this.va=new Cf(vd.comparator),this.Fa=new Map,this.Ma=new Ov,this.xa={},this.Oa=new Map,this.Na=cv.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function V_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=gw(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await B_(r,t,n,!0),i}async function z_(e,t){const n=gw(e);await B_(n,t,!0,!1)}async function B_(e,t,n,r){const i=await sb(e.localStore,eg(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await q_(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Bb(e.remoteStore,i),a}async function q_(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await ab(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return tw(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await ab(e.localStore,t,!0),o=new L_(t,s.hs),a=o.da(s.documents),l=bm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);tw(e,n,c.fa);const u=new F_(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function W_(e,t,n){const r=Yh(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!ig(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ob(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qb(r.remoteStore,i.targetId),Z_(r,i.targetId)})).catch(Pd)):(Z_(r,i.targetId),await ob(r.localStore,i.targetId,!0))}async function H_(e,t){const n=Yh(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qb(n.remoteStore,r.targetId))}async function G_(e,t){const n=Yh(e);try{const e=await function(e,t){const n=Yh(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Lf.EMPTY_BYTE_STRING,fd.min()).withLastLimboFreeSnapshotVersion(fd.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=fg(),l=xg();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rb(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(fd.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Rd.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Qh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Qh(r.wa):e.removedDocuments.size>0&&(Qh(r.wa),r.wa=!1))})),await iw(n,e,t)}catch(e){await Pd(e)}}function K_(e,t,n){const r=Yh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Yh(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&k_(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Q_(e,t,n){const r=Yh(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Cf(vd.comparator);e=e.insert(s,gp.newNoDocument(s,fd.min()));const n=xg().add(s),i=new vm(fd.min(),new Map,new Cf(cd),e,n);await G_(r,i),r.va=r.va.remove(s),r.Fa.delete(t),rw(r)}else await ob(r.localStore,t,!1).then((()=>Z_(r,t,n))).catch(Pd)}async function Y_(e,t){const n=Yh(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Rd.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qh(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=xg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);$_(n,r,null),J_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await iw(n,e)}catch(e){await Pd(e)}}async function X_(e,t,n){const r=Yh(e);try{const e=await function(e,t){const n=Yh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);$_(r,t,n),J_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await iw(r,e)}catch(n){await Pd(n)}}function J_(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function $_(e,t,n){const r=Yh(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Z_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||ew(e,t)}))}function ew(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(qb(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),rw(e))}function tw(e,t,n){for(const r of n)r instanceof O_?(e.Ma.addReference(r.key,t),nw(e,r)):r instanceof M_?(qh("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||ew(e,r.key)):Kh()}function nw(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(qh("SyncEngine","New document in limbo: "+n),e.Ca.add(r),rw(e))}function rw(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new vd(gd.fromString(t)),r=e.Na.next();e.Fa.set(r,new j_(n)),e.va=e.va.insert(n,r),Bb(e.remoteStore,new ay(eg(Xp(n.path)),r,"TargetPurposeLimboResolution",Wd.oe))}}async function iw(e,t,n){const r=Yh(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Xv.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Yh(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Rd.forEach(t,(t=>Rd.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Rd.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Fd(e))throw e;qh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function sw(e,t){const n=Yh(e);if(!n.currentUser.isEqual(t)){qh("SyncEngine","User change. New user:",t.toKey());const e=await tb(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Jh(Xh.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await iw(n,e.us)}}function ow(e,t){const n=Yh(e),r=n.Fa.get(t);if(r&&r.wa)return xg().add(r.key);{let e=xg();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function aw(e,t){const n=Yh(e),r=await ab(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&tw(n,t.targetId,i.fa),i}async function lw(e,t){const n=Yh(e);return cb(n.localStore,t).then((e=>iw(n,e)))}async function cw(e,t,n,r){const i=Yh(e),s=await function(e,t){const n=Yh(e),r=Yh(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Rd.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await n_(i.remoteStore):"acknowledged"===n||"rejected"===n?($_(i,t,r||null),J_(i,t),function(e,t){Yh(Yh(e).mutationQueue).Mn(t)}(i.localStore,t)):Kh(),await iw(i,s)):qh("SyncEngine","Cannot apply mutation batch with id: "+t)}async function uw(e,t,n){const r=Yh(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await sb(r.localStore,eg(t[0]));for(const e of t){const t=r.ba.get(e),n=await aw(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await lb(r.localStore,o);e=await sb(r.localStore,t),await q_(r,hw(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function hw(e){return Yp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function dw(e){return function(e){return Yh(Yh(e).persistence).Bi()}(Yh(e).localStore)}async function fw(e,t,n,r){const i=Yh(e);if(i.La)return void qh("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await cb(i.localStore,lg(s[0])),r=vm.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Lf.EMPTY_BYTE_STRING);await iw(i,e,r);break}case"rejected":await ob(i.localStore,t,!0),Z_(i,t,r);break;default:Kh()}}async function pw(e,t,n){const r=gw(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){qh("SyncEngine","Adding an already active target "+e);continue}const t=await lb(r.localStore,e),n=await sb(r.localStore,t);await q_(r,hw(t),n.targetId,!1,n.resumeToken),Bb(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await ob(r.localStore,e,!1).then((()=>{qb(r.remoteStore,e),Z_(r,e)})).catch(Pd)}}function gw(e){const t=Yh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ow.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Q_.bind(null,t),t.Sa.h_=E_.bind(null,t.eventManager),t.Sa.ka=I_.bind(null,t.eventManager),t}function mw(e){const t=Yh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Y_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=X_.bind(null,t),t}class yw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Db(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return eb(this.persistence,new $v,e.initialUser,this.serializer)}createPersistence(e){return new Vv(Bv.Hr,this.serializer)}createSharedClientState(e){return new wb}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class vw extends yw{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await mw(this.Qa.syncEngine),await n_(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return eb(this.persistence,new $v,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new mv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new qd(t,this.persistence);return new Bd(e.asyncQueue,n)}createPersistence(e){const t=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tv.withCacheSize(this.cacheSizeBytes):tv.DEFAULT;return new Gv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pb(),Rb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wb}}class bw extends vw{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof _b&&(this.sharedClientState.syncEngine={Zs:cw.bind(null,t),Xs:fw.bind(null,t),eo:pw.bind(null,t),Bi:dw.bind(null,t),Ys:lw.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Yh(e);if(gw(n),mw(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await uw(n,e.toArray());n.La=!0,await d_(n.remoteStore,!0);for(const r of t)Bb(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Z_(n,i),ob(n.localStore,i,!0)))),qb(n.remoteStore,i)})),await t,await uw(n,e),function(e){const t=Yh(e);t.Fa.forEach(((e,n)=>{qb(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new Cf(vd.comparator)}(n),n.La=!1,await d_(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Pb();if(!_b.D(t))throw new Jh(Xh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _b(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class _w{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>K_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sw.bind(null,this.syncEngine),await d_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new w_}createDatastore(e){const t=Db(e.databaseInfo.databaseId),n=function(e){return new Ab(e)}(e.databaseInfo);return function(e,t,n,r){return new Fb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ub(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>K_(this.syncEngine,e,0)),Sb.D()?new Sb:new xb)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new U_(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Yh(e);qh("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await zb(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ww(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Wh("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Sw{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new $h,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new P_(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Ew{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Jh(Xh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Yh(e),r={documents:t.map((e=>Um(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,gd.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Qh(!!t.found),t.found.name,t.found.updateTime;const n=Vm(e,t.found.name),r=Mm(t.found.updateTime),i=t.found.createTime?Mm(t.found.createTime):fd.min(),s=new fp({mapValue:{fields:t.found.fields}});return gp.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Qh(!!t.missing),Qh(!!t.readTime);const n=Vm(e,t.missing),r=Mm(t.readTime);return gp.newNoDocument(n,r)}(e,t):Kh()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Qh(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new tm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=vd.fromPath(t);this.mutations.push(new nm(n,this.precondition(n)))})),await async function(e,t){const n=Yh(e),r={writes:t.map((e=>Km(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,gd.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kh();t=fd.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Jh(Xh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fd.min())?Bg.exists(!1):Bg.updateTime(t):Bg.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fd.min()))throw new Jh(Xh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bg.updateTime(t)}return Bg.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Iw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new Nb(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new Ew(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cm(t)}return!1}}class kw{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Uh.UNAUTHENTICATED,this.clientId=ld.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{qh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(qh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jh(Xh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $h;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=m_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Tw(e,t){e.asyncQueue.verifyOperationInProgress(),qh("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Cw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Pw(e);qh("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>h_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>h_(t.remoteStore,n))),e._onlineComponents=t}function Aw(e){return"FirebaseError"===e.name?e.code===Xh.FAILED_PRECONDITION||e.code===Xh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Pw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qh("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tw(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Aw(n))throw n;Hh("Error using user provided cache. Falling back to memory cache: "+n),await Tw(e,new yw)}}else qh("FirestoreClient","Using default OfflineComponentProvider"),await Tw(e,new yw);return e._offlineComponents}async function Rw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qh("FirestoreClient","Using user provided OnlineComponentProvider"),await Cw(e,e._uninitializedComponentsProvider._online)):(qh("FirestoreClient","Using default OnlineComponentProvider"),await Cw(e,new _w))),e._onlineComponents}function Dw(e){return Pw(e).then((e=>e.persistence))}function Nw(e){return Pw(e).then((e=>e.localStore))}function Ow(e){return Rw(e).then((e=>e.remoteStore))}function Mw(e){return Rw(e).then((e=>e.syncEngine))}function Lw(e){return Rw(e).then((e=>e.datastore))}async function Fw(e){const t=await Rw(e),n=t.eventManager;return n.onListen=V_.bind(null,t.syncEngine),n.onUnlisten=W_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=H_.bind(null,t.syncEngine),n}function jw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new $h;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new xw({next:s=>{t.enqueueAndForget((()=>S_(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Jh(Xh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Jh(Xh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new A_(Xp(n.path),s,{includeMetadataChanges:!0,ra:!0});return x_(e,o)}(await Fw(e),e.asyncQueue,t,n,r))),r.promise}function Uw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new $h;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new xw({next:n=>{t.enqueueAndForget((()=>S_(e,o))),n.fromCache&&"server"===r.source?i.reject(new Jh(Xh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new A_(n,s,{includeMetadataChanges:!0,ra:!0});return x_(e,o)}(await Fw(e),e.asyncQueue,t,n,r))),r.promise}function Vw(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?dm().encode(e):e,function(e,t){return new Sw(e,t)}(function(e,t){if(e instanceof Uint8Array)return ww(e,t);if(e instanceof ArrayBuffer)return ww(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Db(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Yh(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Yh(e),r=Mm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(N_(r));const i=new D_(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await iw(e,o.ca,void 0),await function(e,t){const n=Yh(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return Hh("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Mw(e),i,r)}))}function zw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Bw=new Map;function qw(e,t,n){if(!n)throw new Jh(Xh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ww(e,t,n,r){if(!0===t&&!0===r)throw new Jh(Xh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Hw(e){if(!vd.isDocumentKey(e))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gw(e){if(vd.isDocumentKey(e))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Kh()}function Qw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jh(Xh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kw(e);throw new Jh(Xh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Yw(e,t){if(t<=0)throw new Jh(Xh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Xw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jh(Xh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jh(Xh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ww("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Jh(Xh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Jh(Xh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Jh(Xh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jh(Xh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jh(Xh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ed;switch(e.type){case"firstParty":return new id(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Jh(Xh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bw.get(e);t&&(qh("ComponentProvider","Removing Datastore"),Bw.delete(e),t.terminate())}(this),Promise.resolve()}}function $w(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Qw(e,Jw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Uh.MOCK_USER;else{t=Qr(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Jh(Xh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Uh(s)}e._authCredentials=new td(new Zh(t,n))}}class Zw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zw(this.firestore,e,this._query)}}class ex{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tx(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ex(this.firestore,e,this._key)}}class tx extends Zw{constructor(e,t,n){super(e,t,Xp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ex(this.firestore,null,new vd(e))}withConverter(e){return new tx(this.firestore,e,this._path)}}function nx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=mi(e),qw("collection","path",t),e instanceof Jw){const n=gd.fromString(t,...r);return Gw(n),new tx(e,null,n)}{if(!(e instanceof ex||e instanceof tx))throw new Jh(Xh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gd.fromString(t,...r));return Gw(n),new tx(e.firestore,null,n)}}function rx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=mi(e),1===arguments.length&&(t=ld.newId()),qw("doc","path",t),e instanceof Jw){const n=gd.fromString(t,...r);return Hw(n),new ex(e,null,new vd(n))}{if(!(e instanceof ex||e instanceof tx))throw new Jh(Xh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gd.fromString(t,...r));return Hw(n),new ex(e.firestore,e instanceof tx?e.converter:null,new vd(n))}}function ix(e,t){return e=mi(e),t=mi(t),(e instanceof ex||e instanceof tx)&&(t instanceof ex||t instanceof tx)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sx(e,t){return e=mi(e),t=mi(t),e instanceof Zw&&t instanceof Zw&&e.firestore===t.firestore&&ig(e._query,t._query)&&e.converter===t.converter}class ox{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Nb(this,"async_queue_retry"),this.hu=()=>{const e=Rb();e&&qh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=Rb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Rb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new $h;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(zL){if(!Fd(zL))throw zL;qh("AsyncQueue","Operation failed with retryable error: "+zL)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=g_.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Kh()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function ax(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class lx{constructor(){this._progressObserver={},this._taskCompletionResolver=new $h,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cx extends Jw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ox,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||hx(this),this._firestoreClient.terminate()}}function ux(e){return e._firestoreClient||hx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hx(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zw(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new kw(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function dx(e,t,n){const r=new $h;return e.asyncQueue.enqueue((async()=>{try{await Tw(e,n),await Cw(e,t),r.resolve()}catch(e){const n=e;if(!Aw(n))throw n;Hh("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function fx(e){return function(e){const t=new $h;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Yh(e);Qb(n.remoteStore)||qh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Yh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=m_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Mw(e),t))),t.promise}(ux(e=Qw(e,cx)))}function px(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Dw(e),n=await Ow(e);return t.setNetworkEnabled(!0),function(e){const t=Yh(e);return t.M_.delete(0),Vb(t)}(n)}))}(ux(e=Qw(e,cx)))}function gx(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Dw(e),n=await Ow(e);return t.setNetworkEnabled(!1),async function(e){const t=Yh(e);t.M_.add(0),await zb(t),t.N_.set("Offline")}(n)}))}(ux(e=Qw(e,cx)))}function mx(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Yh(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Nw(e),t)))}(ux(e=Qw(e,cx)),t).then((t=>t?new Zw(e,null,t.query):null))}function yx(e){if(e._initialized||e._terminated)throw new Jh(Xh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vx{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vx(Lf.fromBase64String(e))}catch(e){throw new Jh(Xh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vx(Lf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yd(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _x{constructor(e){this._methodName=e}}class wx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jh(Xh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jh(Xh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cd(this._lat,e._lat)||cd(this._long,e._long)}}const xx=/^__.*__$/;class Sx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Jg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xg(e,this.data,t,this.fieldTransforms)}}class Ex{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Jg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ix(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kh()}}class kx{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new kx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Gx(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(Ix(this.fu)&&xx.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Tx{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Db(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kx({fu:e,methodName:t,vu:n,path:yd.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cx(e){const t=e._freezeSettings(),n=Db(e._databaseId);return new Tx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ax(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Bx("Data must be an object, but it was:",o,r);const a=Vx(r,o);let l,c;if(s.merge)l=new Of(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=qx(t,r,n);if(!o.contains(i))throw new Jh(Xh.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Kx(e,i)||e.push(i)}l=new Of(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Sx(new fp(a),l,c)}class Px extends _x{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Px}}function Rx(e,t,n){return new kx({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Dx extends _x{_toFieldTransform(e){return new Vg(e.path,new Dg)}isEqual(e){return e instanceof Dx}}class Nx extends _x{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Rx(this,e,!0),n=this.Mu.map((e=>Ux(e,t))),r=new Ng(n);return new Vg(e.path,r)}isEqual(e){return e instanceof Nx&&li(this.Mu,e.Mu)}}class Ox extends _x{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Rx(this,e,!0),n=this.Mu.map((e=>Ux(e,t))),r=new Mg(n);return new Vg(e.path,r)}isEqual(e){return e instanceof Ox&&li(this.Mu,e.Mu)}}class Mx extends _x{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Fg(e.serializer,Tg(e.serializer,this.xu));return new Vg(e.path,t)}isEqual(e){return e instanceof Mx&&this.xu===e.xu}}function Lx(e,t,n,r){const i=e.Fu(1,t,n);Bx("Data must be an object, but it was:",i,r);const s=[],o=fp.empty();kf(r,((e,r)=>{const a=Hx(t,e,n);r=mi(r);const l=i.Su(a);if(r instanceof Px)s.push(a);else{const e=Ux(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Of(s);return new Ex(o,a,i.fieldTransforms)}function Fx(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[qx(t,r,n)],l=[i];if(s.length%2!=0)throw new Jh(Xh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(qx(t,s[d])),l.push(s[d+1]);const c=[],u=fp.empty();for(let d=a.length-1;d>=0;--d)if(!Kx(c,a[d])){const e=a[d];let t=l[d];t=mi(t);const n=o.Su(e);if(t instanceof Px)c.push(e);else{const r=Ux(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Of(c);return new Ex(u,h,o.fieldTransforms)}function jx(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ux(n,e.Fu(r?4:3,t))}function Ux(e,t){if(zx(e=mi(e)))return Bx("Unsupported field value:",t,e),Vx(e,t);if(e instanceof _x)return function(e,t){if(!Ix(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ux(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=mi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Tg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=dd.fromDate(e);return{timestampValue:Dm(t.serializer,n)}}if(e instanceof dd){const n=new dd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dm(t.serializer,n)}}if(e instanceof wx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vx)return{bytesValue:Nm(t.serializer,e._byteString)};if(e instanceof ex){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Lm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Kw(e)))}(e,t)}function Vx(e,t){const n={};return Tf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kf(e,((e,r)=>{const i=Ux(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof dd||e instanceof wx||e instanceof vx||e instanceof ex||e instanceof _x)}function Bx(e,t,n){if(!zx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Kw(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function qx(e,t,n){if((t=mi(t))instanceof bx)return t._internalPath;if("string"==typeof t)return Hx(e,t);throw Gx("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wx=new RegExp("[~\\*/\\[\\]]");function Hx(e,t,n){if(t.search(Wx)>=0)throw Gx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new bx(...t.split("."))._internalPath}catch(r){throw Gx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Gx(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Jh(Xh.INVALID_ARGUMENT,a+e+l)}function Kx(e,t){return e.some((e=>e.isEqual(t)))}class Qx{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ex(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yx extends Qx{data(){return super.data()}}function Xx(e,t){return"string"==typeof t?Hx(e,t):t instanceof bx?t._internalPath:t._delegate._internalPath}function Jx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Jh(Xh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class Zx extends $x{}function eS(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof $x&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof nS)).length,n=e.filter((e=>e instanceof tS)).length;if(t>1||t>0&&n>0)throw new Jh(Xh.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class tS extends Zx{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new tS(e,t,n)}_apply(e){const t=this._parse(e);return uS(e._query,t),new Zw(e.firestore,e.converter,ng(e._query,t))}_parse(e){const t=Cx(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){cS(o,s);const t=[];for(const n of o)t.push(lS(r,e,n));a={arrayValue:{values:t}}}else a=lS(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cS(o,s),a=jx(n,t,o,"in"===s||"not-in"===s);return xp.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class nS extends $x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nS(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Sp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)uS(n,i),n=ng(n,i)}(e._query,t),new Zw(e.firestore,e.converter,ng(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rS extends Zx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rS(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bp(t,n)}(e._query,this._field,this._direction);return new Zw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class iS extends Zx{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new iS(e,t,n)}_apply(e){return new Zw(e.firestore,e.converter,rg(e._query,this._limit,this._limitType))}}class sS extends Zx{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new sS(e,t,n)}_apply(e){const t=aS(e,this.type,this._docOrFields,this._inclusive);return new Zw(e.firestore,e.converter,function(e,t){return new Qp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class oS extends Zx{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new oS(e,t,n)}_apply(e){const t=aS(e,this.type,this._docOrFields,this._inclusive);return new Zw(e.firestore,e.converter,function(e,t){return new Qp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function aS(e,t,n,r){if(n[0]=mi(n[0]),n[0]instanceof Qx)return function(e,t,n,r,i){if(!r)throw new Jh(Xh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Zp(e))if(o.field.isKeyField())s.push(tp(t,r.key));else{const e=r.data.field(o.field);if(zf(e))throw new Jh(Xh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new mp(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Cx(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Jh(Xh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!$p(e)&&-1!==s.indexOf("/"))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(gd.fromString(s));if(!vd.isDocumentKey(n))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new vd(n);a.push(tp(t,i))}else{const e=jx(n,r,s);a.push(e)}}return new mp(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function lS(e,t,n){if("string"==typeof(n=mi(n))){if(""===n)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$p(t)&&-1!==n.indexOf("/"))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(gd.fromString(n));if(!vd.isDocumentKey(r))throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tp(e,new vd(r))}if(n instanceof ex)return tp(e,n._key);throw new Jh(Xh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Kw(n),"."))}function cS(e,t){if(!Array.isArray(e)||0===e.length)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function uS(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Jh(Xh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Jh(Xh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class hS{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Uf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kh()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return kf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new wx(Uf(e.latitude),Uf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qf(e));default:return null}}convertTimestamp(e){const t=jf(e);return new dd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gd.fromString(e);Qh(oy(n));const r=new Hf(n.get(1),n.get(3)),i=new vd(n.popFirst(5));return r.isEqual(t)||Wh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function dS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class fS extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vx(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ex(this.firestore,null,t)}}class pS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gS extends Qx{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new mS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Xx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class mS extends gS{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yS{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mS(this._firestore,this._userDataWriter,n.key,n,new pS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jh(Xh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new mS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new mS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:vS(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kh()}}function bS(e,t){return e instanceof gS&&t instanceof gS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yS&&t instanceof yS&&e._firestore===t._firestore&&sx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class _S extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vx(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ex(this.firestore,null,t)}}function wS(e){e=Qw(e,ex);const t=Qw(e.firestore,cx),n=ux(t),r=new _S(t);return function(e,t){const n=new $h;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Yh(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Jh(Xh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=m_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Nw(e),t,n))),n.promise}(n,e._key).then((n=>new gS(t,r,e._key,n,new pS(null!==n&&n.hasLocalMutations,!0),e.converter)))}function xS(e){e=Qw(e,Zw);const t=Qw(e.firestore,cx),n=ux(t),r=new _S(t);return function(e,t){const n=new $h;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await ab(e,t,!0),i=new L_(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=m_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Nw(e),t,n))),n.promise}(n,e._query).then((n=>new yS(t,r,e,n)))}function SS(e,t,n){e=Qw(e,ex);const r=Qw(e.firestore,cx),i=dS(e.converter,t,n);return TS(r,[Ax(Cx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bg.none())])}function ES(e,t,n){e=Qw(e,ex);const r=Qw(e.firestore,cx),i=Cx(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=mi(t))||t instanceof bx?Fx(i,"updateDoc",e._key,t,n,a):Lx(i,"updateDoc",e._key,t),TS(r,[s.toMutation(e._key,Bg.exists(!0))])}function IS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=mi(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ax(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ax(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof ex)h=Qw(e.firestore,cx),d=Xp(e._key.path),u={next:t=>{n[l]&&n[l](CS(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Qw(e,Zw);h=Qw(t.firestore,cx),d=t._query;const r=new _S(h);u={next:e=>{n[l]&&n[l](new yS(h,r,t,e))},error:n[l+1],complete:n[l+2]},Jx(e._query)}return function(e,t,n,r){const i=new xw(r),s=new A_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>x_(await Fw(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>S_(await Fw(e),s)))}}(ux(h),d,c,u)}function kS(e,t){return function(e,t){const n=new xw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Yh(e).z_.add(t),t.next()}(await Fw(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Yh(e).z_.delete(t)}(await Fw(e),n)))}}(ux(e=Qw(e,cx)),ax(t)?t:{next:t})}function TS(e,t){return function(e,t){const n=new $h;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=mw(e);try{const e=await function(e,t){const n=Yh(e),r=dd.now(),i=t.reduce(((e,t)=>e.add(t.key)),xg());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=fg(),l=xg();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Qg(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Jg(e.key,t,pp(t.value.mapValue),Bg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:mg(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Cf(cd)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await iw(r,e.changes),await n_(r.remoteStore)}catch(e){const t=m_(e,"Failed to persist write");n.reject(t)}}(await Mw(e),t,n))),n.promise}(ux(e),t)}function CS(e,t,n){const r=n.docs.get(t._key),i=new _S(e);return new gS(e,i,t._key,r,new pS(n.hasPendingWrites,n.fromCache),t.converter)}const AS={maxAttempts:5};class PS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cx(e)}set(e,t,n){this._verifyNotCommitted();const r=RS(e,this._firestore),i=dS(r.converter,t,n),s=Ax(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Bg.none())),this}update(e,t,n){this._verifyNotCommitted();const r=RS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=mi(t))||t instanceof bx?Fx(this._dataReader,"WriteBatch.update",r._key,t,n,o):Lx(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Bg.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=RS(e,this._firestore);return this._mutations=this._mutations.concat(new tm(t._key,Bg.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jh(Xh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function RS(e,t){if((e=mi(e)).firestore!==t)throw new Jh(Xh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class DS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cx(e)}get(e){const t=RS(e,this._firestore),n=new fS(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Kh();const r=e[0];if(r.isFoundDocument())return new Qx(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Qx(this._firestore,n,t._key,null,t.converter);throw Kh()}))}set(e,t,n){const r=RS(e,this._firestore),i=dS(r.converter,t,n),s=Ax(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=RS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=mi(t))||t instanceof bx?Fx(this._dataReader,"Transaction.update",r._key,t,n,o):Lx(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=RS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=RS(e,this._firestore),n=new _S(this._firestore);return super.get(e).then((e=>new gS(this._firestore,n,t._key,e._document,new pS(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vh=e}(Bs),Ns(new yi("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new cx(new nd(e.getProvider("auth-internal")),new od(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jh(Xh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hf(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Qs(jh,"4.6.4",e),Qs(jh,"4.6.4","esm2017")}();function NS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Jh("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function OS(){if("undefined"===typeof Uint8Array)throw new Jh("unimplemented","Uint8Arrays are not available in this environment.")}function MS(){if("undefined"==typeof atob)throw new Jh("unimplemented","Blobs are unavailable in Firestore in this environment.")}class LS{constructor(e){this._delegate=e}static fromBase64String(e){return MS(),new LS(vx.fromBase64String(e))}static fromUint8Array(e){return OS(),new LS(vx.fromUint8Array(e))}toBase64(){return MS(),this._delegate.toBase64()}toUint8Array(){return OS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jS{enableIndexedDbPersistence(e,t){return function(e,t){yx(e=Qw(e,cx));const n=ux(e);if(n._uninitializedComponentsProvider)throw new Jh(Xh.FAILED_PRECONDITION,"SDK cache is already specified.");Hh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new _w;return dx(n,i,new vw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){yx(e=Qw(e,cx));const t=ux(e);if(t._uninitializedComponentsProvider)throw new Jh(Xh.FAILED_PRECONDITION,"SDK cache is already specified.");Hh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new _w;return dx(t,r,new bw(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Jh(Xh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new $h;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Nd.D())return Promise.resolve();const t=e+"main";await Nd.delete(t)}(Yv(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class US{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Hh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$w(this._delegate,e,t,n)}enableNetwork(){return px(this._delegate)}disableNetwork(){return gx(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ww("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return fx(this._delegate)}onSnapshotsInSync(e){return kS(this._delegate,e)}get app(){if(!this._appCompat)throw new Jh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ZS(this,nx(this._delegate,e))}catch(zL){throw HS(zL,"collection()","Firestore.collection()")}}doc(e){try{return new WS(this,rx(this._delegate,e))}catch(zL){throw HS(zL,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new XS(this,function(e,t){if(e=Qw(e,Jw),qw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Jh(Xh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Zw(e,null,function(e){return new Qp(gd.emptyPath(),e)}(t))}(this._delegate,e))}catch(zL){throw HS(zL,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Qw(e,cx);const r=Object.assign(Object.assign({},AS),n);return function(e){if(e.maxAttempts<1)throw new Jh(Xh.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new $h;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Lw(e);new Iw(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(ux(e),(n=>t(new DS(e,n))),r)}(this._delegate,(t=>e(new zS(this,t))))}batch(){return ux(this._delegate),new BS(new PS(this._delegate,(e=>TS(this._delegate,e))))}loadBundle(e){return function(e,t){const n=ux(e=Qw(e,cx)),r=new lx;return Vw(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return mx(this._delegate,e).then((e=>e?new XS(this,e):null))}}class VS extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new LS(new vx(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return WS.forKey(t,this.firestore,null)}}class zS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}get(e){const t=eE(e);return this._delegate.get(t).then((e=>new QS(this._firestore,new gS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=eE(e);return n?(NS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=eE(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=eE(e);return this._delegate.delete(t),this}}class BS{constructor(e){this._delegate=e}set(e,t,n){const r=eE(e);return n?(NS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=eE(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=eE(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qS{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new mS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new YS(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=qS.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new qS(e,new VS(e),t),r.set(t,i)),i}}qS.INSTANCES=new WeakMap;class WS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Jh("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new WS(t,new ex(t._delegate,n,new vd(e)))}static forKey(e,t,n){return new WS(t,new ex(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ZS(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ZS(this.firestore,nx(this._delegate,e))}catch(zL){throw HS(zL,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=mi(e))instanceof ex&&ix(this._delegate,e)}set(e,t){t=NS("DocumentReference.set",t);try{return t?SS(this._delegate,e,t):SS(this._delegate,e)}catch(zL){throw HS(zL,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ES(this._delegate,e):ES(this._delegate,e,t,...r)}catch(zL){throw HS(zL,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return TS(Qw(e.firestore,cx),[new tm(e._key,Bg.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=GS(t),i=KS(t,(e=>new QS(this.firestore,new gS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return IS(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?wS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qw(e,ex);const t=Qw(e.firestore,cx);return jw(ux(t),e._key,{source:"server"}).then((n=>CS(t,e,n)))}(this._delegate):function(e){e=Qw(e,ex);const t=Qw(e.firestore,cx);return jw(ux(t),e._key).then((n=>CS(t,e,n)))}(this._delegate),t.then((e=>new QS(this.firestore,new gS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new WS(this.firestore,e?this._delegate.withConverter(qS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function HS(e,t,n){return e.message=e.message.replace(t,n),e}function GS(e){for(const t of e)if("object"===typeof t&&!FS(t))return t;return{}}function KS(e,t){var n,r;let i;return i=FS(e[0])?e[0]:FS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class QS{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new WS(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class YS extends QS{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Kh()}(void 0!==t),t}}class XS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}where(e,t,n){try{return new XS(this.firestore,eS(this._delegate,function(e,t,n){const r=t,i=Xx("where",e);return tS._create(i,r,n)}(e,t,n)))}catch(zL){throw HS(zL,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new XS(this.firestore,eS(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Xx("orderBy",e);return rS._create(n,t)}(e,t)))}catch(zL){throw HS(zL,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new XS(this.firestore,eS(this._delegate,function(e){return Yw("limit",e),iS._create("limit",e,"F")}(e)))}catch(zL){throw HS(zL,"limit()","Query.limit()")}}limitToLast(e){try{return new XS(this.firestore,eS(this._delegate,function(e){return Yw("limitToLast",e),iS._create("limitToLast",e,"L")}(e)))}catch(zL){throw HS(zL,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new XS(this.firestore,eS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sS._create("startAt",t,!0)}(...arguments)))}catch(zL){throw HS(zL,"startAt()","Query.startAt()")}}startAfter(){try{return new XS(this.firestore,eS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sS._create("startAfter",t,!1)}(...arguments)))}catch(zL){throw HS(zL,"startAfter()","Query.startAfter()")}}endBefore(){try{return new XS(this.firestore,eS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oS._create("endBefore",t,!1)}(...arguments)))}catch(zL){throw HS(zL,"endBefore()","Query.endBefore()")}}endAt(){try{return new XS(this.firestore,eS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oS._create("endAt",t,!0)}(...arguments)))}catch(zL){throw HS(zL,"endAt()","Query.endAt()")}}isEqual(e){return sx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?xS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qw(e,Zw);const t=Qw(e.firestore,cx),n=ux(t),r=new _S(t);return Uw(n,e._query,{source:"server"}).then((n=>new yS(t,r,e,n)))}(this._delegate):function(e){e=Qw(e,Zw);const t=Qw(e.firestore,cx),n=ux(t),r=new _S(t);return Jx(e._query),Uw(n,e._query).then((n=>new yS(t,r,e,n)))}(this._delegate),t.then((e=>new $S(this.firestore,new yS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=GS(t),i=KS(t,(e=>new $S(this.firestore,new yS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return IS(this._delegate,r,i)}withConverter(e){return new XS(this.firestore,e?this._delegate.withConverter(qS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class JS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new YS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $S{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new XS(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new YS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new JS(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new YS(this._firestore,n))}))}isEqual(e){return bS(this._delegate,e._delegate)}}class ZS extends XS{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new WS(this.firestore,e):null}doc(e){try{return new WS(this.firestore,void 0===e?rx(this._delegate):rx(this._delegate,e))}catch(zL){throw HS(zL,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Qw(e.firestore,cx),r=rx(e),i=dS(e.converter,t);return TS(n,[Ax(Cx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bg.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new WS(this.firestore,e)))}isEqual(e){return ix(this._delegate,e._delegate)}withConverter(e){return new ZS(this.firestore,e?this._delegate.withConverter(qS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function eE(e){return Qw(e,ex)}class tE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new bx(...t)}static documentId(){return new tE(yd.keyField().canonicalString())}isEqual(e){return(e=mi(e))instanceof bx&&this._delegate._internalPath.isEqual(e._internalPath)}}class nE{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Dx("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new nE(e)}static delete(){const e=new Px("deleteField");return e._methodName="FieldValue.delete",new nE(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nx("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new nE(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ox("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new nE(e)}static increment(e){const t=function(e){return new Mx("increment",e)}(e);return t._methodName="FieldValue.increment",new nE(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rE={Firestore:US,GeoPoint:wx,Timestamp:dd,Blob:LS,Transaction:zS,WriteBatch:BS,DocumentReference:WS,DocumentSnapshot:QS,Query:XS,QueryDocumentSnapshot:YS,QuerySnapshot:$S,CollectionReference:ZS,FieldPath:tE,FieldValue:nE,setLogLevel:function(e){!function(e){zh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new yi("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},rE)))}(e,((e,t)=>new US(e,t,new jS))),e.registerVersion("@firebase/firestore-compat","0.3.33")}(po);const iE=po.initializeApp({apiKey:"AIzaSyDH3qshxflWjxEFxTdGvSevkYTO9Aydks8",authDomain:"seniorproject-1d18b.firebaseapp.com",projectId:"seniorproject-1d18b",storageBucket:"seniorproject-1d18b.appspot.com",messagingSenderId:"878480848725",appId:"1:878480848725:web:5fe52003678ec98794e1dc"}).firestore();var sE;const oE=pr.div(sE||(sE=we(["\n    width:fit-content;\n    padding:16px 24px;\n    background-color:white;\n    border:1px solid white;\n    border-radius:56px;\n    font-size:18px;\n    font-weight:bold;\n    color:#15191C;\n\n    transition: .3s;\n    cursor: pointer;\n\n    &:hover {\n        background-color:var(--main-color);\n        border:1px solid var(--main-color);\n        color:white;\n    }\n"])));const aE=function(e){const{buttonName:t}=e;return(0,yr.jsx)(oE,{children:t})};var lE;const cE=pr.div(lE||(lE=we(["\n    width:fit-content;\n    padding:16px 24px;\n    background-color:#2B3034;\n    border:1px solid #2B3034;\n    border-radius:56px;\n\n    font-size:18px;\n    font-weight:bold;\n    color:white;\n\n    transition: .3s;\n    cursor: pointer;\n\n    &:hover {\n        background-color:var(--main-color);\n        border:1px solid var(--main-color);\n        color:white;\n    }\n"])));const uE=function(e){const{buttonName:t}=e;return(0,yr.jsx)(cE,{children:t})};var hE;const dE=pr.textarea(hE||(hE=we(["\n    width:100%;\n    min-height:300px;\n    max-height:300px;\n    overflow-y: scroll;\n    resize:none;\n    margin:24px 12px;\n\n    border:none;\n    border-radius: 8px;\n    \n    font-size:16px;\n    font-weight:400;\n    line-height:1.6;\n    color:#DDDDDD;\n    background-color:transparent;\n\n    scrollbar-width: none;\n\n    &:focus {\n        outline: none; /* \uae30\ubcf8 \ube0c\ub77c\uc6b0\uc800 \uc544\uc6c3\ub77c\uc778 \uc81c\uac70 */\n        border: none; /* \uc6d0\ud558\ub294 \ud3ec\ucee4\uc2a4 \uc2a4\ud0c0\uc77c \ucd94\uac00 */\n        background-color: none;\n    }\n"])));const fE=function(e){const{value:t,onChange:n}=e,i=(0,r.useRef)(null);return(0,yr.jsx)(dE,{onChange:n,ref:i,placeholder:"ex) \uc624\ub298\uc740 \uc878\uc5c5 \uc804\uc2dc\ud68c\ub0a0\uc774\ub2e4. \uce5c\ud55c \uce5c\uad6c\uac00 \uc878\uc5c5\ud55c\ub2e4\uace0 \ud574\uc11c \uad6c\uacbd\uc654\ub294\ub370 \ub2e4\ub4e4 \uba4b\uc9c0\uac8c \uc798 \ud55c \uac83 \uac19\ub2e4. \uc804\uc2dc\ud68c\uac00 \ub05d\ub098\uace0 \uce5c\ud55c \uce5c\uad6c\uc640 \ub9e5\uc8fc \ud55c \uc794 \ud558\ub7ec \uac08 \uc608\uc815\uc774\ub2e4. \uc77c\uae30\ub97c \uc4f0\uba74 \uac10\uc815\uc744 \ubd84\uc11d \ud574\uc8fc\uace0, \ud0c0\ub85c \uce74\ub4dc\ub97c \ub9cc\ub4e4\uc5b4\uc900\ub2e4\ub2c8 \uc2e0\uae30\ud558\ub2e4.",value:t,onKeyUp:e=>((e,t)=>{e.keyCode,t.current.style.height="auto",t.current.style.height="".concat(i.current.scrollHeight,"px")})(e,i)})};var pE;const gE=pr.textarea(pE||(pE=we(["\n    width:100%;\n    height:76px;\n    padding:24px 12px;\n\n    border-radius: 8px;\n    \n    font-size:28px;\n    font-weight:700;\n    line-height:1;\n    color:white;\n    background-color:transparent;\n    border:none;\n    resize:none; \n\n    &:focus {\n    outline: none;\n    border: none;\n    background-color: none;\n  }\n"])));const mE=function(e){const{value:t,onChange:n}=e;return(0,yr.jsx)(gE,{onChange:n,value:t,maxLength:"50",placeholder:"\ubcf8\uc778\uc758 \uc774\ub984\uc744 \uc801\uc5b4\uc8fc\uc138\uc694"})};var yE,vE,bE,_E,wE,xE,SE,EE,IE,kE,TE,CE,AE,PE,RE,DE,NE,OE,ME;const LE=pr.div(yE||(yE=we(["\n    width:100%;\n    min-height:100vh;\n    padding:0px 11.54%;\n    background-color:var(--main-bcColor);\n\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    justify-content: center;\n"]))),FE=pr.div(vE||(vE=we(["\n    width:100%;\n"]))),jE=pr.div(bE||(bE=we(["\n    width: 100%;\n    height:1px;\n    background-color:white;\n    margin:12px 0px 0px 0px;\n"]))),UE=pr.div(_E||(_E=we(["\n    width: 100%;\n    display:flex;\n    flex-direction: column;\n"]))),VE=pr.div(wE||(wE=we(["\n    display:flex;\n    align-items:flex-start;\n    border-bottom:2px solid #333;\n"]))),zE=pr(VE)(xE||(xE=we(["\n    display:flex;\n    align-items:center;\n"]))),BE=pr.div(SE||(SE=we(["\n    width: 100%;\n    display:flex;\n    align-items:center;\n    justify-content:space-between;\n\n    margin-top:60px;    \n"]))),qE=pr.div(EE||(EE=we(["\n    display:flex;\n    width:fit-content;\n"]))),WE=pr.div(IE||(IE=we(["\n    width:fit-content;\n"]))),HE=pr.div(kE||(kE=we(["\n    display:flex;\n    gap:20px;\n"]))),GE=pr.div(TE||(TE=we(["\n    display:flex;\n"]))),KE=pr.div(CE||(CE=we(["\n    width:100vw;    \n    height:100vh;\n    position:fixed;\n    top:0;\n    left:0;\n    z-index:99;\n    background-color:rgba(0, 0, 0, 0.7);\n    \n    display:flex;\n    align-items:center;\n    justify-content:center;\n"]))),QE=gr(AE||(AE=we(["\n  0% {\n    opacity: 0;\n    transform: translateX(-50%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n"]))),YE=pr.p(PE||(PE=we(["\n    font-size:24px;\n    color:white;\n    display: inline-block;\n    span {\n        display: inline-block;\n        opacity: 0;\n        animation: "," 2s infinite;\n        animation-delay: calc(0.1s * var(--i));\n    }\n"])),QE),XE=pr.div(RE||(RE=we(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.7);\n    backdrop-filter:blur(4px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100;\n"]))),JE=pr.div(DE||(DE=we(["\n    background-color: var(--main-bcColor);\n    padding:40px 20px;\n    border-radius: 24px;\n    width: 40%;\n    color:white;\n    \n    display:flex;\n    flex-direction:column;\n    align-items: center;\n"]))),$E=pr.p(NE||(NE=we(["\n    font-size: 24px;\n    font-weight: bold;\n    color:var(--main-color);\n\n    margin-bottom:24px;\n"]))),ZE=pr.p(OE||(OE=we(["\n    font-size: 16px;\n    line-height:1.4;\n    margin-bottom:4px;\n    color:white;\n"]))),eI=pr.div(ME||(ME=we(["\n    margin-top:40px;\n"])));const tI=function(e){const t=ee(),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,_]=(0,r.useState)(!1),[w,x]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),I=()=>E(!0),k=e=>o(e.target.value),T=e=>i(e.target.value),C=(0,r.useCallback)((()=>{let e=(new Date).getTime().toString(),r=(new Date).getFullYear(),i=(new Date).getMonth(),o=(new Date).getDate(),l="".concat(r,".").concat(i+1,".").concat(o);iE.collection("daily").doc(e).set({id:e,title:n,prompt:s,keyword:a,date:l,score:c,reason:h,solution:f,tarot:g}),c>=80&&iE.collection("tarot").doc(e).set({id:e,title:n,prompt:s,date:l,tarot:g}),t("/choicePicture",{state:{timestamp:e,results:a}})}),[n,s,a,c,h,f,g,t]),A=async e=>{if(n&&s)try{await function(e){return x(!0),fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"".concat(e,"\ub77c\ub294 \ub0b4\uc6a9\uc758 \uc77c\uae30\ub97c \uc694\uc57d\ud560 \uc218 \uc788\ub294 \ud0a4\uc6cc\ub4dc 5\uac1c\ub97c \uc21c\uc11c\uc5c6\uc774 \ud55c\uc904\uc5d0 \ub098\uc5f4\ud574\uc918. \uc5f0\uacb0\uc740 \ucf64\ub9c8\ub85c \ud574\uc918")}]})}).then((e=>e.json())).then((e=>{console.log("Keyword API Response:",e),l(e.choices[0].message.content)})).catch((e=>{console.error("Error in callGPTKeyword:",e)})).finally((()=>{x(!1)}))}(s),await function(e){return x(!0),fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"".concat(e,'\ub77c\ub294 \uc77c\uae30\uc5d0 \ub300\ud574\uc11c \uc77c\uae30\uc18d \ub4dc\ub7ec\ub098\ub294 \uac10\uc815\uc5d0 \ub300\ud574\uc11c \uc810\uc218\ub85c \ub0b4\uc918. \ubd80\uc815\uc801\uc778 \uac10\uc815\uc774 \ub9ce\uc73c\uba74 \uc810\uc218\ub97c \ub0ae\uac8c \uc918\ub3c4 \ub3fc 100\uc810 \ub9cc\uc810\uc774\uace0 \uc810\uc218 \uac04\uaca9\uc740 1\uc529\uc774\uc57c \uacb0\uacfc\ubb3c\uc740"82"\ucc98\ub7fc \uc22b\uc790\ub9cc \ucd9c\ub825\ud574\uc8fc\uba74 \ub3fc.')}]})}).then((e=>e.json())).then((e=>{console.log("Analysis API Response:",e),u(e.choices[0].message.content)})).catch((e=>{console.error("Error in callGPTAnalysis:",e)})).finally((()=>{x(!1)}))}(s),await function(e){return x(!0),fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"".concat(e,"\ub77c\ub294 \uc77c\uae30\uc758 \uac10\uc815 \uc810\uc218\ub97c \ub9e4\uae38\uac74\ub370 \uc77c\uae30\uc18d \ub4dc\ub7ec\ub098\ub294 \uac10\uc815\uc801\uc778 \ubd80\ubd84\uc5d0\uc11c \uc77c\uae30\ub97c \ubd84\uc11d\ud558\uace0 \uc810\uc218\ub97c \ucc45\uc815\ud574\uc918 \uae0d\uc801\uc801\uc778 \uac10\uc815\uacfc \ubd80\uc815\uc801\uc778 \uac10\uc815\uc774 \uc5b4\ub514\uc11c \ub098\ud0c0\ub0ac\ub294\uc9c0 \uc124\uba85\ud574\uc918, \ub300\uc2e0 \uc810\uc218\ub294 \uc0dd\ub7b5\ud558\uace0 \uc77c\uae30 \uc810\uc218\ub97c \ucc45\uc815\ud55c \uadfc\uac70\ub97c 100\uc790 \uc544\ub798\ub85c \uc904 \uae00\ub85c \ubcf4\uc5ec\uc918. \ub9d0\ud22c\ub294 ~\ub2c8\ub2e4\ub85c \ud574\uc918")}]})}).then((e=>e.json())).then((e=>{console.log("AnalysisReason API Response:",e),d(e.choices[0].message.content)})).catch((e=>{console.error("Error in AnalysisReason:",e)})).finally((()=>{x(!1)}))}(s),await function(e){return x(!0),fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"".concat(e,"\ub77c\ub294 \uc77c\uae30 \uc18d\uc5d0\uc11c \ubd80\uc815\uc801\uc778 \uac10\uc815\uc744 \ud574\uc18c\ud558\ub824\uba74 \uc5b4\ub5bb\uac8c \ud574\uc57c\ud558\ub294\uc9c0, \uae0d\uc815\uc801\uc778 \uac10\uc815\uc744 \uac15\ud654\ud558\ub824\uba74 \uc5b4\ub5bb\uac8c \ud574\uc57c\ud558\ub294\uc9c0 \uc77c\uae30 \uc18d\uc758 \ub0b4\uc6a9\uc744 \uadfc\uac70\ub85c \uac10\uc815\uc801\uc778 \ubd80\ubd84\uc5d0\uc11c \ud53c\ub4dc\ubc31 \ud574\uc918. \uae00\uc740 100\uc790 \uc544\ub798\ub85c \uc904 \uae00\ub85c \ubcf4\uc5ec\uc918\uc8fc\uace0 \ub9d0\ud22c\ub294 ~\ub2c8\ub2e4\ub85c \ud574\uc918")}]})}).then((e=>e.json())).then((e=>{console.log("AnalysisSolution API Response:",e),p(e.choices[0].message.content)})).catch((e=>{console.error("Error in AnalysisSolution:",e)})).finally((()=>{x(!1)}))}(s),await function(e){return x(!0),fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"".concat(e,'\ub77c\ub294 \uc77c\uae30\ub97c \uac00\uc9c0\uace0 \ud0c0\ub85c\uce74\ub4dc\ub97c \ub9cc\ub4e4\uac70\uc57c. \ub108\uac00 \ud574\uc904 \uc77c\uc740 \ud574\ub2f9 \uc77c\uae30\uc758 \uc774\ub984\uc744 \uc9c0\uc5b4\uc8fc\uace0 \uc77c\uae30\uc5d0\uc11c \uae0d\uc815\uc801\uc778 \ubd80\ubd84\uc744 \uac15\ud654\uc2dc\ud0ac\uc218 \uc788\ub294 \uc0c9\ub2e4\ub978 \ub300\ucc45\uc548\uc744 1\uac1c\ub9cc \uc791\uc131\ud574\uc918. \ud0c0\ub85c\uce74\ub4dc \uc774\ub984\uc740 "**\uc758 \uce74\ub4dc"\ucc98\ub7fc **\uc5d0 \ud0a4\uc6cc\ub4dc\ub97c \ub123\uc5b4\uc8fc\uace0 \ub300\ucc45\uc548\uc740 50\uc790\uc815\ub3c4\uc758 \uc904\uae00\uc774\uc5b4\uc57c \ud574. \ub610\ud55c, \ud0c0\ub85c \uce74\ub4dc \uc774\ub984\uacfc \ub300\ucc45\uc548\uc740 ,\ub85c \uad6c\ubd84\ud574\uc918. \ub300\uc2e0 \ud0c0\ub85c \uce74\ub4dc\uc774\ub984\uacfc \ub300\ucc45\uc548\uc744 \uad6c\ubd84 \uc9d3\ub294\uac70 \uc678\uc5d0\ub294 ,\ub97c \uc4f0\uc9c0\ub9d0\uc544\uc918')}]})}).then((e=>e.json())).then((e=>{console.log("Tarot API Response:",e),m(e.choices[0].message.content)})).catch((e=>{console.error("Error in Tarot:",e)})).finally((()=>{x(!1)}))}(s),_(!0)}catch(t){console.error("Error:",t)}else alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.")};(0,r.useEffect)((()=>{b&&(C(),_(!1))}),[b,C]);const P=async e=>{try{const e=await fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:"\ubb34\uc2a8 \uc8fc\uc81c\uc774\ub4e0 \uc0c1\uad00\uc5c6\uc73c\ub2c8\uae4c \ucc38\uc2e0\ud55c \uc8fc\uc81c\uc758 60\uc790\uc815\ub3c4\uc758 \uc77c\uae30\ub97c \uc904\uae00\ub85c \uc368\uc918, \ubd80\uc815\uc801\uc774\uac70\ub098 \uae0d\uc815\uc801\uc778\uac70 \uc544\ubb34\uac70\ub098 \uad1c\ucc2e\uc544 "}]})}).then((e=>e.json())).then((e=>{const t=e.choices[0].message.content;return v(t),console.log("Generated random daily:",y),t})).catch((e=>{console.error("Error in RandomDaily Creating:",e)}));o(e)}catch(t){console.error("Error:",t)}},R="https://api.openai.com/v1/chat/completions",D="sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX",N="\uc77c\uae30\ub97c \ubd84\uc11d \uc911\uc785\ub2c8\ub2e4.".split("").map(((e,t)=>(0,yr.jsx)("span",{style:{"--i":t},children:" "===e?"\xa0":e},t)));return(0,yr.jsx)("div",{children:!0===w?(0,yr.jsxs)(LE,{children:[(0,yr.jsx)(KE,{children:(0,yr.jsx)(YE,{children:N})}),(0,yr.jsx)(FE,{children:(0,yr.jsx)(br,{text:"\uc624\ub298 \ud558\ub8e8\ub97c \uac04\ub2e8\ud788 \uc801\uc5b4\ubcf4\uc138\uc694."})}),(0,yr.jsx)(jE,{}),(0,yr.jsxs)(UE,{children:[(0,yr.jsx)(zE,{children:(0,yr.jsx)(mE,{onChange:T,value:n})}),(0,yr.jsx)(VE,{children:(0,yr.jsx)(fE,{onChange:k,value:s})})]}),(0,yr.jsxs)(BE,{children:[(0,yr.jsxs)(HE,{children:[(0,yr.jsx)(GE,{onClick:I,children:(0,yr.jsx)(uE,{buttonName:"\uc774\uac8c \ubb50\ud558\ub294\uac70\uc5d0\uc694?"})}),(0,yr.jsx)(WE,{onClick:P,children:(0,yr.jsx)(uE,{buttonName:"\ub79c\ub364 \uc77c\uae30 \uc0dd\uc131\ud558\uae30"})})]}),(0,yr.jsxs)(HE,{children:[(0,yr.jsx)(qE,{onClick:e=>{t(-1)},children:(0,yr.jsx)(uE,{buttonName:"\ucc98\uc74c\uc73c\ub85c"})}),(0,yr.jsx)(qE,{disabled:!n||!s,onClick:A,children:(0,yr.jsx)(aE,{buttonName:"\ub2e4\uc74c\uc73c\ub85c"})})]})]})]}):(0,yr.jsxs)(LE,{children:[(0,yr.jsx)(FE,{children:(0,yr.jsx)(br,{text:"\uc624\ub298 \ud558\ub8e8\ub97c \uac04\ub2e8\ud788 \uc801\uc5b4\ubcf4\uc138\uc694."})}),(0,yr.jsx)(jE,{}),(0,yr.jsxs)(UE,{children:[(0,yr.jsx)(zE,{children:(0,yr.jsx)(mE,{onChange:T,value:n})}),(0,yr.jsx)(VE,{children:(0,yr.jsx)(fE,{onChange:k,value:s})})]}),(0,yr.jsxs)(BE,{children:[(0,yr.jsxs)(HE,{children:[(0,yr.jsx)(GE,{onClick:I,children:(0,yr.jsx)(uE,{buttonName:"\uc774\uac8c \ubb50\ud558\ub294\uac70\uc5d0\uc694?"})}),(0,yr.jsx)(WE,{onClick:P,children:(0,yr.jsx)(uE,{buttonName:"\ub79c\ub364 \uc77c\uae30 \uc0dd\uc131\ud558\uae30"})})]}),(0,yr.jsxs)(HE,{children:[(0,yr.jsx)(qE,{onClick:e=>{t(-1)},children:(0,yr.jsx)(uE,{buttonName:"\ucc98\uc74c\uc73c\ub85c"})}),(0,yr.jsx)(qE,{disabled:!n||!s,onClick:A,children:(0,yr.jsx)(aE,{buttonName:"\ub2e4\uc74c\uc73c\ub85c"})})]})]}),S&&(0,yr.jsx)(XE,{children:(0,yr.jsxs)(JE,{children:[(0,yr.jsx)($E,{children:"\uc77c\uae30\ub97c \uc791\uc131\ud574\ubcf4\uc138\uc694."}),(0,yr.jsx)(ZE,{children:"AI\uac00 \uc791\uc131\ud55c \uc77c\uae30\ub97c \uac10\uc815\uc744 \ubd84\uc11d\ud574\uc8fc\uace0 \uc2dc\uac01\ud654\ud574\uc90d\ub2c8\ub2e4."}),(0,yr.jsx)(ZE,{children:"\ubb34\uc2a8 \uc77c\uae30\ub97c \uc368\uc57c\ud560\uc9c0 \ubaa8\ub974\uaca0\ub2e4\uba74 \ub79c\ub364 \uc77c\uae30 \uc0dd\uc131\ud558\uae30\ub97c \ub20c\ub7ec\ubcf4\uc138\uc694."}),(0,yr.jsx)(eI,{onClick:()=>E(!1),children:(0,yr.jsx)(uE,{buttonName:"\ud655\uc778\ud588\uc5b4\uc694",children:"\ud655\uc778\ud588\uc5b4\uc694"})})]})})]})})},nI="firebasestorage.googleapis.com",rI="storageBucket";class iI extends ii{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(aI(e),"Firebase Storage: ".concat(t," (").concat(aI(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,iI.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return aI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var sI,oI;function aI(e){return"storage/"+e}function lI(){return new iI(sI.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cI(){return new iI(sI.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uI(){return new iI(sI.CANCELED,"User canceled the upload/download.")}function hI(){return new iI(sI.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dI(e){return new iI(sI.INVALID_ARGUMENT,e)}function fI(){return new iI(sI.APP_DELETED,"The Firebase app was deleted.")}function pI(e,t){return new iI(sI.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function gI(e){throw new iI(sI.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(sI||(sI={}));class mI{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mI.makeFromUrl(e,t)}catch(zL){return new mI(e,"")}if(""===n.path)return n;throw r=e,new iI(sI.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===nI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new mI(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new iI(sI.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class yI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function vI(e){return"string"===typeof e||e instanceof String}function bI(e){return _I()&&e instanceof Blob}function _I(){return"undefined"!==typeof Blob}function wI(e,t,n,r){if(r<t)throw dI("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw dI("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function xI(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function SI(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function EI(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oI||(oI={}));class II{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new kI(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===oI.NO_ERROR,i=n.getStatus();if(!t||EI(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===oI.ABORT;return void e(!1,new kI(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new kI(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(zL){r(zL)}else if(null!==i){const e=lI();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?fI():uI())}else{r(cI())}};this.canceled_?t(0,new kI(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kI{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function TI(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function CI(){const e=TI();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(_I())return new Blob(n);throw new iI(sI.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function AI(e){if("undefined"===typeof atob)throw t="base-64",new iI(sI.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const PI={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RI{constructor(e,t){this.data=e,this.contentType=t||null}}function DI(e,t){switch(e){case PI.RAW:return new RI(NI(t));case PI.BASE64:case PI.BASE64URL:return new RI(OI(e,t));case PI.DATA_URL:return new RI(function(e){const t=new MI(e);return t.base64?OI(PI.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(zL){throw pI(PI.DATA_URL,"Malformed data URL.")}return NI(t)}(t.rest)}(t),new MI(t).contentType)}throw lI()}function NI(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function OI(e,t){switch(e){case PI.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw pI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case PI.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw pI(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AI(t)}catch(zL){if(zL.message.includes("polyfill"))throw zL;throw pI(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class MI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw pI(PI.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class LI{constructor(e,t){let n=0,r="";bI(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(bI(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new LI(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new LI(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(_I()){const e=t.map((e=>e instanceof LI?e.data_:e));return new LI(CI.apply(null,e))}{const e=t.map((e=>vI(e)?DI(PI.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new LI(r,!0)}}uploadData(){return this.data_}}function FI(e){let t;try{t=JSON.parse(e)}catch(zL){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function jI(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function UI(e,t){return t}class VI{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||UI}}let zI=null;function BI(){if(zI)return zI;const e=[];e.push(new VI("bucket")),e.push(new VI("generation")),e.push(new VI("metageneration")),e.push(new VI("name","fullPath",!0));const t=new VI("name");t.xform=function(e,t){return function(e){return!vI(e)||e.length<2?e:jI(e)}(t)},e.push(t);const n=new VI("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new VI("timeCreated")),e.push(new VI("updated")),e.push(new VI("md5Hash",null,!0)),e.push(new VI("cacheControl",null,!0)),e.push(new VI("contentDisposition",null,!0)),e.push(new VI("contentEncoding",null,!0)),e.push(new VI("contentLanguage",null,!0)),e.push(new VI("contentType",null,!0)),e.push(new VI("metadata","customMetadata",!0)),zI=e,zI}function qI(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new mI(n,r);return t._makeStorageReference(i)}})}(r,e),r}function WI(e,t,n){const r=FI(t);if(null===r)return null;return qI(e,r,n)}function HI(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const GI="prefixes",KI="items";function QI(e,t,n){const r=FI(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[GI])for(const i of n[GI]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new mI(t,n));r.prefixes.push(s)}if(n[KI])for(const i of n[KI]){const n=e._makeStorageReference(new mI(t,i.name));r.items.push(n)}return r}(e,t,r)}class YI{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function XI(e){if(!e)throw lI()}function JI(e,t){return function(n,r){const i=WI(e,r,t);return XI(null!==i),i}}function $I(e,t){return function(n,r){const i=WI(e,r,t);return XI(null!==i),function(e,t,n,r){const i=FI(t);if(null===i)return null;if(!vI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent,a=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return xI("/b/"+o(i)+"/o/"+o(s),n,r)+SI({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function ZI(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new iI(sI.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new iI(sI.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new iI(sI.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new iI(sI.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ek(e){const t=ZI(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new iI(sI.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function tk(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=xI(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new YI(o,"GET",function(e,t){return function(n,r){const i=QI(e,t,r);return XI(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=ZI(t),l}function nk(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function rk(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=nk(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+HI(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=LI.getBlob(c,r,u);if(null===h)throw hI();const d={name:l.fullPath},f=xI(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new YI(f,"POST",JI(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=ZI(t),g}let ik=null;class sk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oI.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=oI.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=oI.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw gI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(zL){return-1}}getResponse(){if(!this.sent_)throw gI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ok extends sk{initXhr(){this.xhr_.responseType="text"}}function ak(){return ik?ik():new ok}class lk{constructor(e,t){this._service=e,this._location=t instanceof mI?t:mI.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lk(e,t)}get root(){const e=new mI(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jI(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new mI(this._location.bucket,e);return new lk(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new iI(sI.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ck(e,t,n){e._throwIfRoot("uploadBytes");const r=rk(e.storage,e._location,BI(),new LI(t,!0),n);return e.storage.makeRequestWithTokens(r,ak).then((t=>({metadata:t,ref:e})))}function uk(e){const t={prefixes:[],items:[]};return hk(e,t).then((()=>t))}async function hk(e,t,n){const r={pageToken:n},i=await dk(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await hk(e,t,i.nextPageToken)}function dk(e,t){null!=t&&"number"===typeof t.maxResults&&wI("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=tk(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ak)}function fk(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=xI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new YI(r,"GET",$I(e,n),i);return s.errorHandler=ek(t),s}(e.storage,e._location,BI());return e.storage.makeRequestWithTokens(t,ak).then((e=>{if(null===e)throw new iI(sI.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function pk(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mI(e._location.bucket,n);return new lk(e.storage,r)}function gk(e,t){if(e instanceof vk){const n=e;if(null==n._bucket)throw new iI(sI.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rI+"' property when initializing the app?");const r=new lk(n,n._bucket);return null!=t?gk(r,t):r}return void 0!==t?pk(e,t):e}function mk(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof vk)return new lk(e,t);throw dI("To use ref(service, url), the first argument must be a Storage instance.")}return gk(e,t)}function yk(e,t){const n=null===t||void 0===t?void 0:t[rI];return null==n?null:mI.makeFromBucketSpec(n,e)}class vk{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=nI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mI.makeFromBucketSpec(r,this._host):yk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=mI.makeFromBucketSpec(this._url,e):this._bucket=yk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lk(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new yI(fI());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=SI(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new II(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const bk="@firebase/storage",_k="0.12.6",wk="storage";function xk(e,t,n,r){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PI.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");const i=DI(n,t),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),ck(e,i.data,s)}(e=mi(e),t,n,r)}function Sk(e){return uk(e=mi(e))}function Ek(e){return fk(e=mi(e))}function Ik(e,t){return mk(e=mi(e),t)}function kk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs(),t=arguments.length>1?arguments[1]:void 0;e=mi(e);const n=Os(e,wk).getImmediate({identifier:t}),r=Hr("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Qr(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function Tk(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new vk(r,i,s,n,Bs)}var Ck;Ns(new yi(wk,Tk,"PUBLIC").setMultipleInstances(!0)),Qs(bk,_k,""),Qs(bk,_k,"esm2017");const Ak=pr.img(Ck||(Ck=we(["\n    width:100%;\n    height:auto;\n    border-radius:36px;\n    box-shadow: 4px 4px 16px rgba(0, 0, 0, 0.15);\n\n    object-fit:cover;\n    overflow:hidden;\n    transition:.3s;\n\n    opacity: ",";\n    filter: ",";\n"])),(e=>{let{isSelected:t}=e;return t?"1":"0.5"}),(e=>{let{isSelected:t}=e;return t?"none":"grayscale(1)"}));const Pk=function(e){const{imgURL:t,isSelected:n}=e;return(0,yr.jsx)(Ak,{src:t,isSelected:n})};var Rk,Dk,Nk,Ok,Mk,Lk,Fk,jk,Uk,Vk,zk,Bk,qk,Wk,Hk,Gk,Kk;const Qk=pr.div(Rk||(Rk=we(["\n    width:100%;\n    min-height:100vh;   \n    padding:0px 11.54%;\n\n    display:flex;\n    flex-direction:column;\n    justify-content:center;\n    align-items:center;\n\n    background-color:var(--main-bcColor);\n"]))),Yk=pr.div(Dk||(Dk=we(["\n    text-align:center;\n"]))),Xk=pr.p(Nk||(Nk=we(["\n    font-size:20px;\n    font-weight:400;\n    color:white;\n\n    margin-top:12px;\n    margin-bottom:60px;\n"]))),Jk=pr.div(Ok||(Ok=we(["\n    display:flex;\n    align-items:center;\n    justify-content: space-between;\n\n    width:100%;\n    gap:24px;\n"]))),$k=pr.div(Mk||(Mk=we(["\n    display:flex;\n    align-items:center;\n    justify-content: center;\n\n    margin-top:60px;    \n"]))),Zk=pr.div(Lk||(Lk=we(["\n    display:flex;\n    width:fit-content;\n\n    margin-right:20px;\n\n    &:last-child {\n        margin-right:0px;\n    }\n"]))),eT=pr.div(Fk||(Fk=we(["    \n    display:flex;\n    flex-direction:column;\n    align-items:center;\n\n    width:100%;\n    height: fit-content;\n\n    position:relative;\n"]))),tT=pr.input(jk||(jk=we(["\n    width:fit-content;\n    display:none;\n"]))),nT=pr.label(Uk||(Uk=we(["\n    width:inherit;\n    height:100%;\n\n    position:absolute;\n    cursor:pointer;\n"]))),rT=pr.div(Vk||(Vk=we(["\n    width:100vw;    \n    height:100vh;\n    position:fixed;\n    top:0;\n    left:0;\n    z-index:99;\n    background-color:rgba(0, 0, 0, 0.7);\n    \n    display:flex;\n    align-items:center;\n    justify-content:center;\n"]))),iT=gr(zk||(zk=we(["\n  0% {\n    opacity: 0;\n    transform: translateX(-50%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n"]))),sT=pr.p(Bk||(Bk=we(["\n    font-size:24px;\n    color:white;\n    display: inline-block;\n    span {\n        display: inline-block;\n        opacity: 0;\n        animation: "," 2s infinite;\n        animation-delay: calc(0.1s * var(--i));\n    }\n"])),iT),oT=pr.div(qk||(qk=we(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.7);\n    backdrop-filter:blur(4px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100;\n"]))),aT=pr.div(Wk||(Wk=we(["\n    background-color: var(--main-bcColor);\n    padding:40px 20px;\n    border-radius: 24px;\n    width: 40%;\n    color:white;\n    \n    display:flex;\n    flex-direction:column;\n    align-items: center;\n"]))),lT=pr.p(Hk||(Hk=we(["\n    font-size: 24px;\n    font-weight: bold;\n    color:var(--main-color);\n\n    margin-bottom:24px;\n"]))),cT=pr.p(Gk||(Gk=we(["\n    font-size: 16px;\n    line-height:1.4;\n    margin-bottom:4px;\n    color:white;\n"]))),uT=pr.div(Kk||(Kk=we(["\n    margin-top:40px;\n"])));const hT=function(){const e=ee(),t=$(),n=Ik(kk(),"images/".concat(t.state.timestamp)),[i,s]=(0,r.useState)(!1),o="sk-None-PGcLGcnYLo0tRNb3GT52T3BlbkFJjRRoaoDXVoJ1tejU6XVX",[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),f=(0,r.useCallback)((async e=>{try{const n=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({model:"dall-e-3",prompt:"".concat(t.state.results,"\ub97c \ub300\ud45c\ud558\ub294 \uadf8\ub9bc\uc744 ").concat(e," \uc2a4\ud0c0\uc77c\ub85c \ucef7 \uc5c6\uc774 \ud55c \uc7a5\uc73c\ub85c \uadf8\ub824\uc918"),n:1,size:"1024x1024",response_format:"b64_json"})}),r=await n.json();return"data:image/jpeg;base64,".concat(r.data[0].b64_json)}catch(n){throw console.error("Error generating image:",n),new Error("Image generation failed")}}),[t.state.results,o]);(0,r.useEffect)((()=>{(async()=>{s(!0);const[e,t,n]=await Promise.all([f("\uc0ac\uc2e4\uc801\uc778"),f("\uc77c\ub7ec\uc2a4\ud2b8"),f("\ucc3d\uc758\uc801\uc778")]);l(e),u(t),d(n),v(t),s(!1)})()}),[f]);const[p,g]=(0,r.useState)(!1),m=()=>g(!0),[y,v]=(0,r.useState)(c),b=e=>()=>{v(e)},_=async()=>{try{const r=(e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""))(y.replace(/^data:image\/[a-zA-Z]+;base64,/,""));await xk(n,r,"base64url"),e("/post/".concat(t.state.timestamp))}catch(r){console.error("Error submitting image:",r)}},w="\uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131 \uc911\uc785\ub2c8\ub2e4.".split("").map(((e,t)=>(0,yr.jsx)("span",{style:{"--i":t},children:" "===e?"\xa0":e},t)));return(0,yr.jsx)("div",{children:!0===i?(0,yr.jsxs)(Qk,{children:[(0,yr.jsx)(rT,{children:(0,yr.jsx)(sT,{children:w})}),(0,yr.jsxs)(Yk,{children:[(0,yr.jsx)(br,{text:"\ub4f1\ub85d\ud560 \ub300\ud45c \uc774\ubbf8\uc9c0\ub97c \uc120\ud0dd\ud558\uc138\uc694."}),(0,yr.jsx)(Xk,{children:"\uc791\uc131\ud55c \uc77c\uae30\ub97c \ubc14\ud0d5\uc73c\ub85c \uc0dd\uc131\ub41c \uc774\ubbf8\uc9c0\uc785\ub2c8\ub2e4."})]}),(0,yr.jsxs)(Jk,{children:[(0,yr.jsxs)(eT,{onClick:b(a),children:[(0,yr.jsx)(Pk,{imgURL:a,isSelected:y===a}),(0,yr.jsx)(nT,{htmlFor:"imgA"}),(0,yr.jsx)(tT,{name:"img",id:"imgA",value:a,type:"radio"})]}),(0,yr.jsxs)(eT,{onClick:b(c),children:[(0,yr.jsx)(Pk,{imgURL:c,isSelected:y===c}),(0,yr.jsx)(nT,{htmlFor:"imgB"}),(0,yr.jsx)(tT,{name:"img",id:"imgB",value:c,type:"radio"})]}),(0,yr.jsxs)(eT,{onClick:b(h),children:[(0,yr.jsx)(Pk,{imgURL:h,isSelected:y===h}),(0,yr.jsx)(nT,{htmlFor:"imgC"}),(0,yr.jsx)(tT,{name:"img",id:"imgC",value:h,type:"radio"})]})]}),(0,yr.jsxs)($k,{children:[(0,yr.jsx)(Zk,{onClick:m,children:(0,yr.jsx)(uE,{buttonName:"\uc774\ubbf8\uc9c0\ub294 \uc5b4\ub514\uc5d0 \uc4f0\uc774\ub098\uc694?"})}),(0,yr.jsx)(Zk,{onClick:_,children:(0,yr.jsx)(aE,{buttonName:"\ub2e4\uc74c\uc73c\ub85c"})})]})]}):(0,yr.jsxs)(Qk,{children:[(0,yr.jsxs)(Yk,{children:[(0,yr.jsx)(br,{text:"\ub4f1\ub85d\ud560 \ub300\ud45c \uc774\ubbf8\uc9c0\ub97c \uc120\ud0dd\ud558\uc138\uc694."}),(0,yr.jsx)(Xk,{children:"\uc791\uc131\ud55c \uc77c\uae30\ub97c \ubc14\ud0d5\uc73c\ub85c \uc0dd\uc131\ub41c \uc774\ubbf8\uc9c0\uc785\ub2c8\ub2e4."})]}),(0,yr.jsxs)(Jk,{children:[(0,yr.jsxs)(eT,{onClick:b(a),children:[(0,yr.jsx)(Pk,{imgURL:a,isSelected:y===a}),(0,yr.jsx)(nT,{htmlFor:"imgA"}),(0,yr.jsx)(tT,{name:"img",id:"imgA",value:a,type:"radio"})]}),(0,yr.jsxs)(eT,{onClick:b(c),children:[(0,yr.jsx)(Pk,{imgURL:c,isSelected:y===c}),(0,yr.jsx)(nT,{htmlFor:"imgB"}),(0,yr.jsx)(tT,{name:"img",id:"imgB",value:c,type:"radio"})]}),(0,yr.jsxs)(eT,{onClick:b(h),children:[(0,yr.jsx)(Pk,{imgURL:h,isSelected:y===h}),(0,yr.jsx)(nT,{htmlFor:"imgC"}),(0,yr.jsx)(tT,{name:"img",id:"imgC",value:h,type:"radio"})]})]}),(0,yr.jsxs)($k,{children:[(0,yr.jsx)(Zk,{onClick:m,children:(0,yr.jsx)(uE,{buttonName:"\uc774\ubbf8\uc9c0\ub294 \uc5b4\ub514\uc5d0 \uc4f0\uc774\ub098\uc694?"})}),(0,yr.jsx)(Zk,{onClick:_,children:(0,yr.jsx)(aE,{buttonName:"\ub2e4\uc74c\uc73c\ub85c"})})]}),p&&(0,yr.jsx)(oT,{children:(0,yr.jsxs)(aT,{children:[(0,yr.jsx)(lT,{children:"\ub300\ud45c \uc774\ubbf8\uc9c0\ub97c \uc120\ud0dd\ud574\ubcf4\uc138\uc694."}),(0,yr.jsx)(cT,{children:"\uc120\ud0dd\ud55c \uc774\ubbf8\uc9c0\ub294 \uc791\uc131\ud55c \uc77c\uae30\ub97c \ub300\ud45c\ud569\ub2c8\ub2e4."}),(0,yr.jsx)(cT,{children:"\ub610\ud55c, \uc77c\uae30\ub85c \uc0dd\uc131\ub418\ub294 \ud0c0\ub85c\uc758 \ub300\ud45c \uc774\ubbf8\uc9c0\ub85c\ub3c4 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."}),(0,yr.jsx)(uT,{onClick:()=>g(!1),children:(0,yr.jsx)(uE,{buttonName:"\ud655\uc778\ud588\uc5b4\uc694",children:"\ud655\uc778\ud588\uc5b4\uc694"})})]})})]})})};function dT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fT(e){return e+.5|0}const pT=(e,t,n)=>Math.max(Math.min(e,n),t);function gT(e){return pT(fT(2.55*e),0,255)}function mT(e){return pT(fT(255*e),0,255)}function yT(e){return pT(fT(e/2.55)/100,0,1)}function vT(e){return pT(fT(100*e),0,100)}const bT={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_T=[..."0123456789ABCDEF"],wT=e=>_T[15&e],xT=e=>_T[(240&e)>>4]+_T[15&e],ST=e=>(240&e)>>4===(15&e);function ET(e){var t=(e=>ST(e.r)&&ST(e.g)&&ST(e.b)&&ST(e.a))(e)?wT:xT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const IT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function kT(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function TT(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function CT(e,t,n){const r=kT(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function AT(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function PT(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(mT)}function RT(e,t,n){return PT(kT,e,t,n)}function DT(e){return(e%360+360)%360}function NT(e){const t=IT.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?gT(+t[5]):mT(+t[5]));const i=DT(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return PT(CT,e,t,n)}(i,s,o):"hsv"===t[1]?function(e,t,n){return PT(TT,e,t,n)}(i,s,o):RT(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const OT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},MT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let LT;function FT(e){LT||(LT=function(){const e={},t=Object.keys(MT),n=Object.keys(OT);let r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,OT[s]);s=parseInt(MT[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),LT.transparent=[0,0,0,0]);const t=LT[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const jT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const UT=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,VT=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function zT(e,t,n){if(e){let r=AT(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=RT(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function BT(e,t){return e?Object.assign(t||{},e):e}function qT(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=mT(e[3]))):(t=BT(e,{r:0,g:0,b:0,a:1})).a=mT(t.a),t}function WT(e){return"r"===e.charAt(0)?function(e){const t=jT.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?gT(e):pT(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?gT(n):pT(n,0,255)),r=255&(t[4]?gT(r):pT(r,0,255)),i=255&(t[6]?gT(i):pT(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):NT(e)}class HT{constructor(e){if(e instanceof HT)return e;const t=typeof e;let n;"object"===t?n=qT(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*bT[e[1]],g:255&17*bT[e[2]],b:255&17*bT[e[3]],a:5===n?17*bT[e[4]]:255}:7!==n&&9!==n||(t={r:bT[e[1]]<<4|bT[e[2]],g:bT[e[3]]<<4|bT[e[4]],b:bT[e[5]]<<4|bT[e[6]],a:9===n?bT[e[7]]<<4|bT[e[8]]:255})),t}(e)||FT(e)||WT(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=BT(this._rgb);return e&&(e.a=yT(e.a)),e}set rgb(e){this._rgb=qT(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(yT(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?ET(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=AT(e),n=t[0],r=vT(t[1]),i=vT(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(yT(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=VT(yT(e.r)),i=VT(yT(e.g)),s=VT(yT(e.b));return{r:mT(UT(r+n*(VT(yT(t.r))-r))),g:mT(UT(i+n*(VT(yT(t.g))-i))),b:mT(UT(s+n*(VT(yT(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new HT(this.rgb)}alpha(e){return this._rgb.a=mT(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=fT(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zT(this._rgb,2,e),this}darken(e){return zT(this._rgb,2,-e),this}saturate(e){return zT(this._rgb,1,e),this}desaturate(e){return zT(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=AT(e);n[0]=DT(n[0]+t),n=RT(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function GT(){}const KT=(()=>{let e=0;return()=>e++})();function QT(e){return null===e||"undefined"===typeof e}function YT(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function XT(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function JT(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function $T(e,t){return JT(e)?e:t}function ZT(e,t){return"undefined"===typeof e?t:e}const eC=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function tC(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function nC(e,t,n,r){let i,s,o;if(YT(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(XT(e))for(o=Object.keys(e),s=o.length,i=0;i<s;i++)t.call(n,e[o[i]],o[i])}function rC(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function iC(e){if(YT(e))return e.map(iC);if(XT(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=iC(e[n[i]]);return t}return e}function sC(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function oC(e,t,n,r){if(!sC(e))return;const i=t[e],s=n[e];XT(i)&&XT(s)?aC(i,s,r):t[e]=iC(s)}function aC(e,t,n){const r=YT(t)?t:[t],i=r.length;if(!XT(e))return e;const s=(n=n||{}).merger||oC;let o;for(let a=0;a<i;++a){if(o=r[a],!XT(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)s(t[r],e,o,n)}return e}function lC(e,t){return aC(e,t,{merger:cC})}function cC(e,t,n){if(!sC(e))return;const r=t[e],i=n[e];XT(r)&&XT(i)?lC(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=iC(i))}const uC={"":e=>e,x:e=>e.x,y:e=>e.y};function hC(e,t){const n=uC[t]||(uC[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function dC(e){return e.charAt(0).toUpperCase()+e.slice(1)}const fC=e=>"undefined"!==typeof e,pC=e=>"function"===typeof e,gC=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const mC=Math.PI,yC=2*mC,vC=yC+mC,bC=Number.POSITIVE_INFINITY,_C=mC/180,wC=mC/2,xC=mC/4,SC=2*mC/3,EC=Math.log10,IC=Math.sign;function kC(e,t,n){return Math.abs(e-t)<n}function TC(e){const t=Math.round(e);e=kC(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(EC(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function CC(e){return!isNaN(parseFloat(e))&&isFinite(e)}function AC(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function PC(e){return e*(mC/180)}function RC(e){return e*(180/mC)}function DC(e){if(!JT(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function NC(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*mC&&(s+=yC),{angle:s,distance:i}}function OC(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function MC(e,t){return(e-t+vC)%yC-mC}function LC(e){return(e%yC+yC)%yC}function FC(e,t,n,r){const i=LC(e),s=LC(t),o=LC(n),a=LC(s-i),l=LC(o-i),c=LC(i-s),u=LC(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function jC(e,t,n){return Math.max(t,Math.min(n,e))}function UC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function VC(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const zC=(e,t,n,r)=>VC(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),BC=(e,t,n)=>VC(e,n,(r=>e[r][t]>=n));const qC=["push","pop","shift","splice","unshift"];function WC(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(qC.forEach((t=>{delete e[t]})),delete e._chartjs)}function HC(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const GC="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function KC(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n=s,r||(r=!0,GC.call(window,(()=>{r=!1,e.apply(t,n)})))}}const QC=e=>"start"===e?"left":"end"===e?"right":"center",YC=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function XC(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=jC(Math.min(zC(a,l,c).lo,n?r:zC(t,l,o.getPixelForValue(c)).lo),0,r-1)),s=d?jC(Math.max(zC(a,o.axis,u,!0).hi+1,n?0:zC(t,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function JC(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const $C=e=>0===e||1===e,ZC=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*yC/n),eA=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*yC/n)+1,tA={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*wC),easeOutSine:e=>Math.sin(e*wC),easeInOutSine:e=>-.5*(Math.cos(mC*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>$C(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>$C(e)?e:ZC(e,.075,.3),easeOutElastic:e=>$C(e)?e:eA(e,.075,.3),easeInOutElastic(e){const t=.1125;return $C(e)?e:e<.5?.5*ZC(2*e,t,.45):.5+.5*eA(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-tA.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*tA.easeInBounce(2*e):.5*tA.easeOutBounce(2*e-1)+.5};function nA(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function rA(e){return nA(e)?e:new HT(e)}function iA(e){return nA(e)?e:new HT(e).saturate(.5).darken(.1).hexString()}const sA=["x","y","borderWidth","radius","tension"],oA=["color","borderColor","backgroundColor"];const aA=new Map;function lA(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=aA.get(n);return r||(r=new Intl.NumberFormat(e,t),aA.set(n,r)),r}(t,n).format(e)}const cA={values:e=>YT(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=EC(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lA(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(EC(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?cA.numeric.call(this,e,t,n):""}};var uA={formatters:cA};const hA=Object.create(null),dA=Object.create(null);function fA(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function pA(e,t,n){return"string"===typeof t?aC(fA(e,t),n):aC(fA(e,""),t)}class gA{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>iA(t.backgroundColor),this.hoverBorderColor=(e,t)=>iA(t.borderColor),this.hoverColor=(e,t)=>iA(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return pA(this,e,t)}get(e){return fA(this,e)}describe(e,t){return pA(dA,e,t)}override(e,t){return pA(hA,e,t)}route(e,t,n,r){const i=fA(this,e),s=fA(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[r];return XT(e)?Object.assign({},t,e):ZT(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var mA=new gA({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:oA},numbers:{type:"number",properties:sA}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function yA(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function vA(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||YT(h)){if(YT(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||YT(d)||(o=yA(e,i,s,o,d))}else o=yA(e,i,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function bA(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function _A(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function wA(e,t,n,r){xA(e,t,n,r,null)}function xA(e,t,n,r,i){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*_C;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,g,0,0,yC):e.arc(n,r,g,0,yC),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=SC,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=SC,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+xC)*l,h=Math.cos(m+xC)*(i?i/2-c:l),a=Math.sin(m+xC)*l,d=Math.sin(m+xC)*(i?i/2-c:l),e.arc(n-h,r-a,c,m-mC,m-wC),e.arc(n+d,r-o,c,m-wC,m),e.arc(n+h,r+a,c,m,m+wC),e.arc(n-d,r+o,c,m+wC,m+mC),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}m+=xC;case"rectRot":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+d,r-o),e.lineTo(n+h,r+a),e.lineTo(n-d,r+o),e.closePath();break;case"crossRot":m+=xC;case"cross":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"star":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o),m+=xC,h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,r-a),e.lineTo(n+o,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function SA(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function EA(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function IA(e){e.restore()}function kA(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function TA(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function CA(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function AA(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function PA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=YT(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),QT(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&AA(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),QT(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),CA(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function RA(e,t){const{x:n,y:r,w:i,h:s,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*mC,mC,!0),e.lineTo(n,r+s-o.bottomLeft),e.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,mC,wC,!0),e.lineTo(n+i-o.bottomRight,r+s),e.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,wC,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-wC,!0),e.lineTo(n+o.topLeft,r)}const DA=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,NA=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function OA(e,t){const n=(""+e).match(DA);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const MA=e=>+e||0;function LA(e,t){const n={},r=XT(t),i=r?Object.keys(t):t,s=XT(e)?r?n=>ZT(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=MA(s(o));return n}function FA(e){return LA(e,{top:"y",right:"x",bottom:"y",left:"x"})}function jA(e){return LA(e,["topLeft","topRight","bottomLeft","bottomRight"])}function UA(e){const t=FA(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function VA(e,t){e=e||{},t=t||mA.font;let n=ZT(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=ZT(e.style,t.style);r&&!(""+r).match(NA)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ZT(e.family,t.family),lineHeight:OA(ZT(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:ZT(e.weight,t.weight),string:""};return i.string=function(e){return!e||QT(e.size)||QT(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function zA(e,t,n,r){let i,s,o,a=!0;for(i=0,s=e.length;i<s;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&YT(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function BA(e,t){return Object.assign(Object.create(e),t)}function qA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=eP("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>qA([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>QA(n,r,(()=>function(e,t,n,r){let i;for(const s of t)if(i=eP(GA(s,e),n),"undefined"!==typeof i)return KA(e,i)?$A(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>tP(e).includes(t),ownKeys:e=>tP(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function WA(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:HA(e,r),setContext:t=>WA(e,t,n,r),override:i=>WA(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>QA(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=e;let a=r[t];pC(a)&&o.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);a.delete(e),KA(e,l)&&(l=$A(i._scopes,i,e,l));return l}(t,a,e,n));YT(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(XT(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=$A(r,i,e,l);t.push(WA(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));KA(t,a)&&(a=WA(a,i,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function HA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:pC(n)?n:()=>n,isIndexable:pC(r)?r:()=>r}}const GA=(e,t)=>e?e+dC(t):t,KA=(e,t)=>XT(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function QA(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function YA(e,t,n){return pC(e)?e(t,n):e}const XA=(e,t)=>!0===e?t:"string"===typeof e?hC(t,e):void 0;function JA(e,t,n,r,i){for(const s of t){const t=XA(n,s);if(t){e.add(t);const s=YA(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function $A(e,t,n,r){const i=t._rootScopes,s=YA(t._fallback,n,r),o=[...e,...i],a=new Set;a.add(r);let l=ZA(a,o,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=ZA(a,o,s,l,r),null!==l))&&qA(Array.from(a),[""],i,s,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(YT(i)&&XT(n))return n;return i||{}}(t,n,r))))}function ZA(e,t,n,r,i){for(;n;)n=JA(e,t,n,r,i);return n}function eP(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function tP(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function nP(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={r:i.parse(hC(u,s),c)};return o}const rP=Number.EPSILON||1e-14,iP=(e,t)=>t<e.length&&!e[t].skip&&e[t],sP=e=>"x"===e?"y":"x";function oP(e,t,n,r){const i=e.skip?t:e,s=t,o=n.skip?t:n,a=OC(s,i),l=OC(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function aP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=sP(t),r=e.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=iP(e,0);for(o=0;o<r;++o)if(a=l,l=c,c=iP(e,o+1),l){if(c){const e=c[t]-l[t];i[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?IC(i[o-1])!==IC(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,s,o,a,l,c=iP(e,0);for(let u=0;u<r-1;++u)l=c,c=iP(e,u+1),l&&c&&(kC(t[u],0,rP)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=s*o*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=sP(n),i=e.length;let s,o,a,l=iP(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=iP(e,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a["cp1".concat(n)]=i-s,a["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,a["cp2".concat(n)]=i+s,a["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function lP(e,t,n){return Math.max(Math.min(e,n),t)}function cP(e,t,n,r,i){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)aP(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=oP(n,a,e[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,s,o,a=SA(e[0],t);for(n=0,r=e.length;n<r;++n)o=s,s=a,a=n<r-1&&SA(e[n+1],t),s&&(i=e[n],o&&(i.cp1x=lP(i.cp1x,t.left,t.right),i.cp1y=lP(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=lP(i.cp2x,t.left,t.right),i.cp2y=lP(i.cp2y,t.top,t.bottom)))}(e,n)}function uP(){return"undefined"!==typeof window&&"undefined"!==typeof document}function hP(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function dP(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const fP=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const pP=["top","right","bottom","left"];function gP(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=pP[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const mP=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function yP(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=fP(n),s="border-box"===i.boxSizing,o=gP(i,"padding"),a=gP(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(mP(i,s,e.target))o=i,a=s;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const vP=e=>Math.round(10*e)/10;function bP(e,t,n,r){const i=fP(e),s=gP(i,"margin"),o=dP(i.maxWidth,e,"clientWidth")||bC,a=dP(i.maxHeight,e,"clientHeight")||bC,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&hP(e);if(s){const e=s.getBoundingClientRect(),o=fP(s),a=gP(o,"border","width"),l=gP(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=dP(o.maxWidth,s,"clientWidth"),i=dP(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||bC,maxHeight:i||bC}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=gP(i,"border","width"),t=gP(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=vP(Math.min(c,o,l.maxWidth)),u=vP(Math.min(u,a,l.maxHeight)),c&&!u&&(u=vP(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=vP(Math.floor(u*r))),{width:c,height:u}}function _P(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const wP=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};uP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(zL){}return e}();function xP(e,t){const n=function(e,t){return fP(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function SP(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function EP(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function IP(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=SP(e,i,n),a=SP(i,s,n),l=SP(s,t,n),c=SP(o,a,n),u=SP(a,l,n);return SP(c,u,n)}function kP(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function TP(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function CP(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function AP(e){return"angle"===e?{between:FC,compare:MC,normalize:LC}:{between:UC,compare:(e,t)=>e-t,normalize:e=>e}}function PP(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function RP(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=AP(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=AP(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const _=()=>v||l(i,y,g)&&0!==a(i,y),w=()=>!v||0===a(s,g)||l(s,y,g);for(let x=u,S=u;x<=h;++x)m=t[x%o],m.skip||(g=c(m[r]),g!==y&&(v=l(g,i,s),null===b&&_()&&(b=0===a(g,i)?x:S),null!==b&&w()&&(p.push(PP({start:b,end:x,loop:d,count:o,style:f})),b=null),S=x,y=g));return null!==b&&p.push(PP({start:b,end:h,loop:d,count:o,style:f})),p}function DP(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=RP(r[i],e.points,t);s.length&&n.push(...s)}return n}function NP(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=OP(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=OP(r.setContext(BA(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),MP(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function OP(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function MP(e,t){if(!t)return!1;const n=[],r=function(e,t){return nA(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class LP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=GC.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var FP=new LP;const jP="transparent",UP={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=rA(e||jP),i=r.valid&&rA(t||jP);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class VP{constructor(e,t,n,r){const i=t[n];r=zA([e.to,r,i,e.from]);const s=zA([e.from,i,r]);this._active=!0,this._fn=e.fn||UP[e.type||typeof s],this._easing=tA[e.easing]||tA.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=zA([e.to,t,r,e.from]),this._from=zA([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class zP{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!XT(e))return;const t=Object.keys(mA.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!XT(i))return;const s={};for(const e of t)s[e]=i[e];(YT(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(i[l]=u=new VP(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(FP.add(this._chart,n),!0):void 0}}function BP(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function qP(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function WP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let o,a,l,c;if(null!==t){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=e.values[l],JT(c)&&(s||0===t||IC(t)===IC(c))&&(t+=c)}return t}}function HP(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function GP(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function KP(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function QP(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=GP(i,u,n),d[a]=s,d._top=KP(d,o,!0,r.type),d._bottom=KP(d,o,!1,r.type);(d._visualValues||(d._visualValues={}))[a]=s}}function YP(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function XP(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const JP=e=>"reset"===e||"none"===e,$P=(e,t)=>t?e:Object.assign({},e);class ZP{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=HP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&XP(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=ZT(n.xAxisID,YP(e,"x")),s=t.yAxisID=ZT(n.yAxisID,YP(e,"y")),o=t.rAxisID=ZT(n.rAxisID,YP(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,s,o),c=t.vAxisID=r(a,s,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&WC(this._data,this),e._stacked&&XP(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(XT(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){WC(n,this);const e=this._cachedMeta;XP(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),qC.forEach((e=>{const t="_onData"+dC(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const o=n.apply(this,i);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...i)})),o}})})))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=HP(t.vScale,t),t.stack!==n.stack&&(r=!0,XP(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&QP(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=YT(r[e])?this.parseArrayData(n,r,e,t):XT(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&QP(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:c||i.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(hC(d,o),h),y:s.parse(hC(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return WP({keys:qP(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,s=WP(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:qP(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=r[h];const t=d[o.axis];return!JT(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],JT(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return XT(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(ZT(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=BP(e,n),i=BP(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,a),c=o;c<o+a;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return BA(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return BA(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,o=i[s],a=this.enableOptionSharing&&fC(n);if(o)return $P(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(mA.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze($P(f,a))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(e,n,t))}const l=new zP(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||JP(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){JP(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!JP(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&XP(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function eR(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=HC(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(fC(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return a}function tR(e,t,n,r){return YT(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function nR(e,t,n,r){const i=e.iScale,s=e.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(tR(d,h,s,c));return l}function rR(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function iR(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[sR(u,o,a,l)]=!0,i=c)),s[sR(i,o,a,l)]=!0,e.borderSkipped=s}function sR(e,t,n,r){var i,s,o;return r?(o=n,e=oR(e=(i=e)===(s=t)?o:i===o?s:i,n,t)):e=oR(e,t,n),e}function oR(e,t,n){return"start"===e?t:"end"===e?n:e}function aR(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}Ri(ZP,"defaults",{}),Ri(ZP,"datasetElementType",null),Ri(ZP,"dataElementType",null);class lR extends ZP{parsePrimitiveData(e,t,n,r){return nR(e,t,n,r)}parseArrayData(e,t,n,r){return nR(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(hC(p,l),h),u.push(tR(hC(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,o=rR(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||QT(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||rR(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const m=g.options||e[d].options;iR(g,m,p,s),aR(g,m,c.ratio),this.updateElement(e[d],d,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===a)),r=t&&t[e.vScale.axis];if(QT(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||eR(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(e),l=a._custom,c=rR(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&IC(d)!==IC(l.barEnd)&&(f=0),f+=d);const g=QT(i)||c?f:i;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?IC(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(m-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=IC(h)*t.getLineWidthForValue(o)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=ZT(r.maxBarThickness,1/0);let o,a;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let s,o;return QT(i)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:t.pixels[e]-s/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}Ri(lR,"id","bar"),Ri(lR,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ri(lR,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class cR extends ZP{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=ZT(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=ZT(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=ZT(n&&n._custom,i),r}}Ri(cR,"id","bubble"),Ri(cR,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ri(cR,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class uR extends ZP{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=e=>+n[e];if(XT(n[e])){const{key:e="value"}=this._parsing;o=t=>+hC(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return PC(this.options.rotation-90)}_getCircumference(){return PC(this.options.circumference)}_getRotationExtents(){let e=yC,t=-yC;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,o=0;if(t<yC){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>FC(e,a,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>FC(e,a,l,!0)?-1:Math.min(t,t*n,r,r*n),g=f(0,c,h),m=f(wC,u,d),y=p(mC,c,h),v=p(mC+wC,u,d);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),_=eC(this.options.radius,b),w=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,r.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/yC)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,i);for(g=t;g<t+n;++g){const t=this._circumference(g,i),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?yC*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=lA(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,o,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,o=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(ZT(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ri(uR,"id","doughnut"),Ri(uR,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ri(uR,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ri(uR,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class hR extends ZP{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=XC(t,r,s);this._drawStart=o,this._drawCount=a,JC(t)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,o,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=CC(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let _=0;_<v;++_){const n=e[_],f=m?n:{};if(_<t||_>=y){f.skip=!0;continue}const v=this.getParsed(_),w=QT(v[d]),x=f[h]=s.getPixelForValue(v[h],_),S=f[d]=i||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],_);f.skip=isNaN(x)||isNaN(S)||w,f.stop=_>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":r)),m||this.updateElement(n,_,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ri(hR,"id","line"),Ri(hR,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ri(hR,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class dR extends ZP{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=lA(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return nP.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*mC;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?PC(this.resolveDataElementOptions(e,t).angle||n):0}}Ri(dR,"id","polarArea"),Ri(dR,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ri(dR,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class fR extends uR{}Ri(fR,"id","pie"),Ri(fR,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class pR extends ZP{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return nP.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,r)}}}Ri(pR,"id","radar"),Ri(pR,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ri(pR,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class gR extends ZP{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=XC(t,n,r);if(this._drawStart=i,this._drawCount=s,JC(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=CC(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=QT(n[f]),_=c[d]=s.getPixelForValue(n[d],b),w=c[f]=i||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(_)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}Ri(gR,"id","scatter"),Ri(gR,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ri(gR,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function mR(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yR{static override(e){Object.assign(yR.prototype,e)}constructor(e){Ri(this,"options",void 0),this.options=e||{}}init(){}formats(){return mR()}parse(){return mR()}format(){return mR()}add(){return mR()}diff(){return mR()}startOf(){return mR()}endOf(){return mR()}}var vR=yR;function bR(e,t,n,r){const{controller:i,data:s,_sorted:o}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?BC:zC;if(!r)return e(s,t,n);if(i._sharedOptions){const r=s[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(s,t,n-i),o=e(s,t,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function _R(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=bR(s[a],t,o,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function wR(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return _R(e,n,t,(function(n,o,a){(i||SA(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function xR(e,t,n,r,i,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return _R(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function SR(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?xR(e,t,n,r,i,s):function(e,t,n,r){let i=[];return _R(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=NC(e,{x:t.x,y:t.y});FC(l,o,a)&&i.push({element:e,datasetIndex:n,index:s})})),i}(e,t,n,i):[]}function ER(e,t,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return _R(e,n,t,((e,r,l)=>{e[o]&&e[o](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:s}var IR={evaluateInteractionItems:_R,modes:{index(e,t,n,r){const i=yP(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wR(e,i,s,r,o):SR(e,i,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=yP(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wR(e,i,s,r,o):SR(e,i,s,!1,r,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>wR(e,yP(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=yP(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return SR(e,i,s,n.intersect,r,o)},x:(e,t,n,r)=>ER(e,yP(t,e),"x",n.intersect,r),y:(e,t,n,r)=>ER(e,yP(t,e),"y",n.intersect,r)}};const kR=["left","top","right","bottom"];function TR(e,t){return e.filter((e=>e.pos===t))}function CR(e,t){return e.filter((e=>-1===kR.indexOf(e.pos)&&e.box.axis===t))}function AR(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function PR(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!kR.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&t.availableHeight)}return n}function RR(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function DR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function NR(e,t,n,r){const{pos:i,box:s}=n,o=e.maxPadding;if(!XT(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&DR(o,s.getPadding());const a=Math.max(0,t.outerWidth-RR(o,e,"left","right")),l=Math.max(0,t.outerHeight-RR(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function OR(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function MR(e,t,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,OR(a.horizontal,t));const{same:o,other:h}=NR(t,n,a,r);c|=o&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&MR(i,t,n,r)||u}function LR(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function FR(e,t,n,r){const i=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,s=l.size||e.height;fC(l.start)&&(o=l.start),e.fullSize?LR(e,i.left,o,n.outerWidth-i.right-i.left,s):LR(e,t.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;fC(l.start)&&(s=l.start),e.fullSize?LR(e,s,i.top,o,n.outerHeight-i.bottom-i.top):LR(e,s,t.top+l.placed,o,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=o}var jR={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=UA(e.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,s,o,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=AR(t.filter((e=>e.box.fullSize)),!0),r=AR(TR(t,"left"),!0),i=AR(TR(t,"right")),s=AR(TR(t,"top"),!0),o=AR(TR(t,"bottom")),a=CR(t,"x"),l=CR(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:TR(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;nC(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);DR(d,UA(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=PR(l.concat(c),h);MR(a.fullSize,f,h,p),MR(l,f,h,p),MR(c,f,h,p)&&MR(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),FR(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,FR(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},nC(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class UR{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class VR extends UR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zR="$chartjs",BR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qR=e=>null===e||""===e;const WR=!!wP&&{passive:!0};function HR(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,WR)}function GR(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function KR(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||GR(n.addedNodes,r),t=t&&!GR(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function QR(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||GR(n.removedNodes,r),t=t&&!GR(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const YR=new Map;let XR=0;function JR(){const e=window.devicePixelRatio;e!==XR&&(XR=e,YR.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function $R(e,t,n){const r=e.canvas,i=r&&hP(r);if(!i)return;const s=KC(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)}));return o.observe(i),function(e,t){YR.size||window.addEventListener("resize",JR),YR.set(e,t)}(e,s),o}function ZR(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){YR.delete(e),YR.size||window.removeEventListener("resize",JR)}(e)}function eD(e,t,n){const r=e.canvas,i=KC((t=>{null!==e.ctx&&n(function(e,t){const n=BR[e.type]||e.type,{x:r,y:i}=yP(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,WR)}(r,t,i),i}class tD extends UR{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[zR]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qR(i)){const t=xP(e,"width");void 0!==t&&(e.width=t)}if(qR(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=xP(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[zR])return!1;const n=t[zR].initial;["height","width"].forEach((e=>{const r=n[e];QT(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[zR],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:KR,detach:QR,resize:$R}[t]||eD;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:ZR,detach:ZR,resize:ZR}[t]||HR)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return bP(e,t,n,r)}isAttached(e){const t=e&&hP(e);return!(!t||!t.isConnected)}}class nD{constructor(){Ri(this,"x",void 0),Ri(this,"y",void 0),Ri(this,"active",!1),Ri(this,"options",void 0),Ri(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return CC(this.x)&&CC(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function rD(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(e,t,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),s++,o=n[s*r])}(t,c,s,o/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(iD(t,c,u,QT(r)?0:a-r,a),e=0,n=o-1;e<n;e++)iD(t,c,u,s[e],s[e+1]);return iD(t,c,u,l,QT(r)?t.length:l+r),c}return iD(t,c,u),c}function iD(e,t,n,r,i){const s=ZT(r,0),o=Math.min(ZT(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}Ri(nD,"defaults",{}),Ri(nD,"defaultRoutes",void 0);const sD=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,oD=(e,t)=>Math.min(t||e,e);function aD(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function lD(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-a||c>o+a)))return c}function cD(e){return e.drawTicks?e.tickLength:0}function uD(e,t){if(!e.display)return 0;const n=VA(e.font,t),r=UA(e.padding);return(YT(e.text)?e.text.length:1)*n.lineHeight+r.height}function hD(e,t,n){let r=QC(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class dD extends nD{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=$T(e,Number.POSITIVE_INFINITY),t=$T(t,Number.NEGATIVE_INFINITY),n=$T(n,Number.POSITIVE_INFINITY),r=$T(r,Number.NEGATIVE_INFINITY),{min:$T(e,n),max:$T(t,r),minDefined:JT(e),maxDefined:JT(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:$T(n,$T(r,n)),max:$T(r,$T(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tC(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=eC(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?aD(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=rD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tC(this.options.afterUpdate,[this])}beforeSetDimensions(){tC(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tC(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),tC(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tC(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=tC(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){tC(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tC(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=oD(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=jC(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-cD(e.grid)-t.padding-uD(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=RC(Math.min(Math.asin(jC((c.highest.height+6)/s,-1,1)),Math.asin(jC(o/a,-1,1))-Math.asin(jC(h/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){tC(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tC(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=uD(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=cD(i)+s):(e.height=this.maxHeight,e.width=cD(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=PC(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tC(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)QT(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=aD(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(t/oD(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,_=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,QT(h)||YT(h)){if(YT(h))for(c=0,u=h.length;c<u;++c)v=h[c],QT(v)||YT(v)||(m=yA(r,p.data,p.gc,m,v),y+=g)}else m=yA(r,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),_=Math.max(y,_)}!function(e,t){nC(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=s.indexOf(b),x=o.indexOf(_),S=e=>({width:s[e]||0,height:o[e]||0});return{first:S(0),last:S(t-1),widest:S(w),highest:S(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return jC(this._alignToPixels?bA(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return BA(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=BA(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=PC(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=cD(i),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return bA(n,e,f)};let m,y,v,b,_,w,x,S,E,I,k,T;if("top"===s)m=g(this.bottom),w=this.bottom-u,S=m-p,I=g(e.top)+p,T=e.bottom;else if("bottom"===s)m=g(this.top),I=e.top,T=g(e.bottom)-p,w=m+p,S=this.top+u;else if("left"===s)m=g(this.right),_=this.right-u,x=m-p,E=g(e.left)+p,k=e.right;else if("right"===s)m=g(this.left),E=e.left,k=g(e.right)-p,_=m+p,x=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(XT(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}I=e.top,T=e.bottom,w=m+p,S=w+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(XT(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}_=m-p,x=_-u,E=e.left,k=e.right}const C=ZT(r.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=A){const e=this.getContext(y),t=i.setContext(e),r=o.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=lD(this,y,a),void 0!==v&&(b=bA(n,v,s),l?_=x=E=k=b:w=S=I=T=b,h.push({tx1:_,ty1:w,tx2:x,ty2:S,x1:E,y1:I,x2:k,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,h=cD(n.grid),d=h+c,f=u?-c:d,p=-PC(this.labelRotation),g=[];let m,y,v,b,_,w,x,S,E,I,k,T,C="middle";if("top"===r)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,_=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,_=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+d;else if(XT(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)_=(e.left+e.right)/2-d;else if(XT(r)){const e=Object.keys(r)[0],t=r[e];_=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const e=i.setContext(this.getContext(m));S=this.getPixelForTick(m)+i.labelOffset,E=this._resolveTickFontOptions(m),I=E.lineHeight,k=YT(b)?b.length:1;const t=k/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(_=S,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===l||0!==p?-k*I+I/2:"center"===l?-A.highest.height/2-t*I+I:-A.highest.height+I/2:"near"===l||0!==p?I/2:"center"===l?A.highest.height/2-t*I:A.highest.height-k*I,u&&(T*=-1),0===p||e.showLabelBackdrop||(_+=I/2*Math.sin(p))):(w=S,T=(1-k)*I/2),e.showLabelBackdrop){const t=UA(e.backdropPadding),n=A.heights[m],r=A.widths[m];let i=T-t.top,s=0-t.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(x){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:E,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:C,translation:[_,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-PC(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=bA(e,this.left,s)-s/2,c=bA(e,this.right,o)+o/2,u=h=a):(u=bA(e,this.top,s)-s/2,h=bA(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&EA(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;PA(t,i.label,0,i.textOffset,n,e)}n&&IA(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=VA(n.font),s=UA(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||XT(t)?(a+=s.bottom,YT(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-i,m=a-s;if(e.isHorizontal()){if(d=YC(r,s,a),XT(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:sD(e,n,t);h=a-s}else{if(XT(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:sD(e,n,t);f=YC(r,o,i),p="left"===n?-wC:wC}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);PA(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:hD(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=ZT(e.grid&&e.grid.z,-1),r=ZT(e.border&&e.border.z,0);return this._isVisible()&&this.draw===dD.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return VA(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fD{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=aC(Object.create(null),[n?mA.get(n):{},mA.get(t),e.defaults]);mA.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");mA.route(s,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&mA.describe(t,e.descriptors)}(e,s,n),this.override&&mA.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in mA[r]&&(delete mA[r][n],this.override&&delete hA[n])}}class pD{constructor(){this.controllers=new fD(ZP,"datasets",!0),this.elements=new fD(nD,"elements"),this.plugins=new fD(Object,"plugins"),this.scales=new fD(dD,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):nC(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=dC(e);tC(n["before"+r],[],n),t[e](n),tC(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var gD=new pD;class mD{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===tC(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){QT(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=ZT(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(gD.plugins.items);for(let s=0;s<r.length;s++)n.push(gD.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const o=[],a=e.getContext();for(const l of i){const t=l.id,i=yD(n[t],r);null!==i&&o.push({plugin:l,options:vD(e.config,{plugin:l,local:s[t]},i,a)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function yD(e,t){return t||!1!==e?!0===e?{}:e:null}function vD(e,t,n,r){let{plugin:i,local:s}=t;const o=e.pluginScopeKeys(i),a=e.getOptionScopes(n,o);return s&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bD(e,t){const n=mA.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function _D(e){if("x"===e||"y"===e||"r"===e)return e}function wD(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function xD(e){if(_D(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||wD(i.position)||e.length>1&&_D(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function SD(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function ED(e,t){const n=hA[e.type]||{scales:{}},r=t.scales||{},i=bD(e.type,t),s=Object.create(null);return Object.keys(r).forEach((t=>{const o=r[t];if(!XT(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=xD(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return SD(e,"x",n[0])||SD(e,"y",n[0])}return{}}(t,e),mA.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};s[t]=lC(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,o=n.indexAxis||bD(i,t),a=(hA[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),lC(s[i],[{axis:t},r[i],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];lC(t,[mA.scales[t.type],mA.scale])})),s}function ID(e){const t=e.options||(e.options={});t.plugins=ZT(t.plugins,{}),t.scales=ED(e,t)}function kD(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const TD=new Map,CD=new Set;function AD(e,t){let n=TD.get(e);return n||(n=t(),TD.set(e,n),CD.add(n)),n}const PD=(e,t,n)=>{const r=hC(t,n);void 0!==r&&e.add(r)};class RD{constructor(e){this._config=function(e){return(e=e||{}).data=kD(e.data),ID(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ID(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return AD(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return AD("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return AD("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return AD("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>PD(a,e,t)))),t.forEach((e=>PD(a,r,e))),t.forEach((e=>PD(a,hA[i]||{},e))),t.forEach((e=>PD(a,mA,e))),t.forEach((e=>PD(a,dA,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),CD.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,hA[t]||{},mA.datasets[t]||{},{type:t},mA,dA]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:o}=DD(this._resolverCache,e,r);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=HA(e);for(const i of t){const t=n(i),s=r(i),o=(s||t)&&e[i];if(t&&(pC(o)||ND(o))||s&&YT(o))return!0}return!1}(s,t)){i.$shared=!1;a=WA(s,n=pC(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=DD(this._resolverCache,e,n);return XT(t)?WA(i,t,void 0,r):i}}function DD(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:qA(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,s)}return s}const ND=e=>XT(e)&&Object.getOwnPropertyNames(e).some((t=>pC(e[t])));const OD=["top","bottom","left","right","chartArea"];function MD(e,t){return"top"===e||"bottom"===e||-1===OD.indexOf(e)&&"x"===t}function LD(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function FD(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),tC(n&&n.onComplete,[e],t)}function jD(e){const t=e.chart,n=t.options.animation;tC(n&&n.onProgress,[e],t)}function UD(e){return uP()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const VD={},zD=e=>{const t=UD(e);return Object.values(VD).filter((e=>e.canvas===t)).pop()};function BD(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}function qD(e,t,n){return e.options.clip?e[n]:t[n]}class WD{static register(){gD.add(...arguments),HD()}static unregister(){gD.remove(...arguments),HD()}constructor(e,t){const n=this.config=new RD(t),r=UD(e),i=zD(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!uP()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?VR:tD}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=KT(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],VD[this.id]=this,o&&a?(FP.listen(this,"complete",FD),FP.listen(this,"progress",jD),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return QT(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gD}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_P(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _A(this.canvas,this.ctx),this}stop(){return FP.stop(this),this}resize(e,t){FP.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,_P(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),tC(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){nC(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=xD(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),nC(i,(t=>{const i=t.options,s=i.id,o=xD(s,i),a=ZT(i.type,t.dtype);void 0!==i.position&&MD(i.position,o)===MD(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(gD.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),nC(r,((e,t)=>{e||delete n[t]})),nC(n,(e=>{jR.configure(this,e,e.options),jR.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(LD("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||bD(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=gD.getController(s),{datasetElementType:r,dataElementType:o}=mA.datasets[s];Object.assign(t,{dataElementType:gD.getElement(o),datasetElementType:r&&gD.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){nC(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||nC(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(LD("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){nC(this.scales,(e=>{jR.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);gC(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){BD(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!gC(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jR.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],nC(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,pC(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(FP.has(this)?this.attached&&!FP.running(this)&&FP.start(this):(this.draw(),FD({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:qD(n,t,"left"),right:qD(n,t,"right"),top:qD(r,t,"top"),bottom:qD(r,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&EA(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&IA(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return SA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=IR.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=BA(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);fC(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),FP.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),_A(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete VD[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};nC(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){nC(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},nC(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!rC(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=i(t,e),o=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,o=this._getActiveElements(e,r,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,tC(i.onHover,[e,o,this],this),a&&tC(i.onClick,[e,o,this],this));const c=!rC(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function HD(){return nC(WD.instances,(e=>e._plugins.invalidate()))}function GD(e,t,n,r){const i=LA(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,r*t/2),a=e=>{const t=(n-Math.min(s,e))*r/2;return jC(e,0,Math.min(s,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:jC(i.innerStart,0,o),innerEnd:jC(i.innerEnd,0,o)}}function KD(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function QD(e,t,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*h-n/mC)/h)/2,m=l+g+f,y=i-g-f,{outerStart:v,outerEnd:b,innerStart:_,innerEnd:w}=GD(t,d,h,y-m),x=h-v,S=h-b,E=m+v/x,I=y-b/S,k=d+_,T=d+w,C=m+_/k,A=y-w/T;if(e.beginPath(),s){const t=(E+I)/2;if(e.arc(o,a,h,E,t),e.arc(o,a,h,t,I),b>0){const t=KD(S,I,o,a);e.arc(t.x,t.y,b,I,y+wC)}const n=KD(T,y,o,a);if(e.lineTo(n.x,n.y),w>0){const t=KD(T,A,o,a);e.arc(t.x,t.y,w,y+wC,A+Math.PI)}const r=(y-w/d+(m+_/d))/2;if(e.arc(o,a,d,y-w/d,r,!0),e.arc(o,a,d,r,m+_/d,!0),_>0){const t=KD(k,C,o,a);e.arc(t.x,t.y,_,C+Math.PI,m-wC)}const i=KD(x,m,o,a);if(e.lineTo(i.x,i.y),v>0){const t=KD(x,E,o,a);e.arc(t.x,t.y,v,m-wC,E)}}else{e.moveTo(o,a);const t=Math.cos(E)*h+o,n=Math.sin(E)*h+a;e.lineTo(t,n);const r=Math.cos(I)*h+o,i=Math.sin(I)*h+a;e.lineTo(r,i)}e.closePath()}function YD(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){QD(e,t,n,r,p,i);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%yC||yC))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(s,o,a,r-c,n+c),l>i?(c=i/l,e.arc(s,o,l,n+c,r-c,!0)):e.arc(s,o,i,n+wC,r-wC),e.closePath(),e.clip()}(e,t,p),s||(QD(e,t,n,r,p,i),e.stroke())}Ri(WD,"defaults",mA),Ri(WD,"instances",VD),Ri(WD,"overrides",hA),Ri(WD,"registry",gD),Ri(WD,"version","4.4.4"),Ri(WD,"getChart",zD);class XD extends nD{constructor(e){super(),Ri(this,"circumference",void 0),Ri(this,"endAngle",void 0),Ri(this,"fullCircles",void 0),Ri(this,"innerRadius",void 0),Ri(this,"outerRadius",void 0),Ri(this,"pixelMargin",void 0),Ri(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=NC(r,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=ZT(u,a-o),f=FC(i,o,a)&&o!==a,p=d>=yC||f,g=UC(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>yC?Math.floor(n/yC):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(mC,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){QD(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%yC||yC))}QD(e,t,n,r,l,i),e.fill()}(e,this,a,i,s),YD(e,this,a,i,s),e.restore()}}function JD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=ZT(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ZT(n.borderDash,t.borderDash)),e.lineDashOffset=ZT(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ZT(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ZT(n.borderWidth,t.borderWidth),e.strokeStyle=ZT(n.borderColor,t.borderColor)}function $D(e,t,n){e.lineTo(n.x,n.y)}function ZD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function eN(e,t,n,r){const{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=ZD(i,n,r),u=function(e){return e.stepped?kA:e.tension||"monotone"===e.cubicInterpolationMode?TA:$D}(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(a+(g?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=i[(a+(g?c:0))%o],u(e,f,d,g,s.stepped)),!!l}function tN(e,t,n,r){const i=t.points,{count:s,start:o,ilen:a}=ZD(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(o+(c?a-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=i[v(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=i[v(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),d=r,y=0,f=p=n),g=n}b()}function nN(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?tN:eN}Ri(XD,"id","arc"),Ri(XD,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ri(XD,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ri(XD,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const rN="function"===typeof Path2D;function iN(e,t,n,r){rN&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),JD(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,o=nN(t);for(const a of i)JD(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class sN extends nD{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;cP(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return NP(e,!0===r?[{start:o,end:a,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(o-1)%i,loop:r}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!e._fullLoop&&0===o&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=DP(this,{property:t,start:r,end:r});if(!s.length)return;const o=[],a=function(e){return e.stepped?EP:e.tension||"monotone"===e.cubicInterpolationMode?IP:SP}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return nN(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=nN(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)s&=i(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),iN(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function oN(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}Ri(sN,"id","line"),Ri(sN,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ri(sN,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ri(sN,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class aN extends nD{constructor(e){super(),Ri(this,"parsed",void 0),Ri(this,"skip",void 0),Ri(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return oN(this,e,"x",t)}inYRange(e,t){return oN(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!SA(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,wA(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function lN(e,t){const{x:n,y:r,base:i,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function cN(e,t,n,r){return e?0:jC(t,n,r)}function uN(e){const t=lN(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=FA(r);return{t:cN(i.top,s.top,0,n),r:cN(i.right,s.right,0,t),b:cN(i.bottom,s.bottom,0,n),l:cN(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=jA(i),o=Math.min(t,n),a=e.borderSkipped,l=r||XT(i);return{topLeft:cN(!l||a.top||a.left,s.topLeft,0,o),topRight:cN(!l||a.top||a.right,s.topRight,0,o),bottomLeft:cN(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:cN(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function hN(e,t,n,r){const i=null===t,s=null===n,o=e&&!(i&&s)&&lN(e,r);return o&&(i||UC(t,o.left,o.right))&&(s||UC(n,o.top,o.bottom))}function dN(e,t){e.rect(t.x,t.y,t.w,t.h)}function fN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+o,radius:e.radius}}Ri(aN,"id","point"),Ri(aN,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ri(aN,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class pN extends nD{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=uN(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?RA:dN;var a;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),o(e,fN(s,t,i)),e.clip(),o(e,fN(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,fN(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return hN(this,e,t,n)}inXRange(e,t){return hN(this,e,null,t)}inYRange(e,t){return hN(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Ri(pN,"id","bar"),Ri(pN,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ri(pN,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const gN=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class mN extends nD{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=tC(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=VA(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=gN(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=yN(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,i,e,r);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=kP(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=YC(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,o=YC(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=YC(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,o=YC(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;EA(e,this),this._draw(),IA(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,o=mA.color,a=kP(e.rtl,this.left,this.width),l=VA(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=gN(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:YC(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:YC(i,this.top+y+c,this.bottom-t[0].height),line:0},TP(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,_)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,x=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),S=f+h+w;let E=d.x,I=d.y;a.setWidth(this.width),m?_>0&&E+S+c>this.right&&(I=d.y+=v,d.line++,E=d.x=YC(i,this.left+c,this.right-n[d.line])):_>0&&I+v>this.bottom&&(E=d.x=E+t[d.line].width+c,d.line++,I=d.y=YC(i,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=ZT(n.lineWidth,1);if(r.fillStyle=ZT(n.fillStyle,o),r.lineCap=ZT(n.lineCap,"butt"),r.lineDashOffset=ZT(n.lineDashOffset,0),r.lineJoin=ZT(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=ZT(n.strokeStyle,o),r.setLineDash(ZT(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);xA(r,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=jA(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?RA(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(E),I,b),E=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(x,E+f+h,m?E+S:this.right,e.rtl),function(e,t,n){PA(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),I,b),m)d.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=yN(b,e)+c}else d.y+=v})),CP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=VA(t.font),r=UA(t.padding);if(!t.display)return;const i=kP(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=YC(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+YC(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=YC(o,u,u+h);s.textAlign=i.textAlign(QC(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,PA(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=VA(e.font),n=UA(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(UC(e,this.left,this.right)&&UC(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],UC(e,r.left,r.left+r.width)&&UC(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&tC(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&tC(t.onHover,[e,n,this],this)}else n&&tC(t.onClick,[e,n,this],this)}}function yN(e,t){return t*(e.text?e.text.length:0)}var vN={id:"legend",_element:mN,start(e,t,n){const r=e.legend=new mN({ctx:e.ctx,options:n,chart:e});jR.configure(e,r,n),jR.addBox(e,r)},stop(e){jR.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;jR.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=UA(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class bN extends nD{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=YT(n.text)?n.text.length:1;this._padding=UA(n.padding);const i=r*VA(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=YC(o,n,i),c=t+e,a=i-n):("left"===s.position?(l=n+e,c=YC(o,r,t),u=-.5*mC):(l=i-e,c=YC(o,t,r),u=.5*mC),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=VA(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);PA(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:QC(t.align),textBaseline:"middle",translation:[i,s]})}}var _N={id:"title",_element:bN,start(e,t,n){!function(e,t){const n=new bN({ctx:e.ctx,options:t,chart:e});jR.configure(e,n,t),jR.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;jR.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;jR.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const wN={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;const o=[...r].reduce(((e,t)=>e+t))/r.size;return{x:o,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=OC(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function xN(e,t){return t&&(YT(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function SN(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function EN(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:e,label:o,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function IN(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=VA(t.bodyFont),c=VA(t.titleFont),u=VA(t.footerFont),h=s.length,d=i.length,f=r.length,p=UA(t.padding);let g=p.height,m=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,nC(e.title,b),n.font=l.string,nC(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,nC(r,(e=>{nC(e.before,b),nC(e.lines,b),nC(e.after,b)})),v=0,n.font=u.string,nC(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function kN(e,t,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+s+o>t.width||"right"===e&&i-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function TN(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||kN(e,t,n,r),yAlign:r}}function CN(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=jA(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const g=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+i:"right"===a&&(p+=Math.max(h,f)+i),{x:jC(p,0,r.width-t.width),y:jC(g,0,r.height-t.height)}}function AN(e,t,n){const r=UA(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function PN(e){return xN([],SN(e))}function RN(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const DN={beforeTitle:GT,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:GT,beforeBody:GT,beforeLabel:GT,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return QT(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:GT,afterBody:GT,beforeFooter:GT,footer:GT,afterFooter:GT};function NN(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?DN[t].call(n,r):i}class ON extends nD{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new zP(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,BA(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=NN(n,"beforeTitle",this,e),i=NN(n,"title",this,e),s=NN(n,"afterTitle",this,e);let o=[];return o=xN(o,SN(r)),o=xN(o,SN(i)),o=xN(o,SN(s)),o}getBeforeBody(e,t){return PN(NN(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return nC(e,(e=>{const t={before:[],lines:[],after:[]},i=RN(n,e);xN(t.before,SN(NN(i,"beforeLabel",this,e))),xN(t.lines,NN(i,"label",this,e)),xN(t.after,SN(NN(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return PN(NN(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=NN(n,"beforeFooter",this,e),i=NN(n,"footer",this,e),s=NN(n,"afterFooter",this,e);let o=[];return o=xN(o,SN(r)),o=xN(o,SN(i)),o=xN(o,SN(s)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(EN(this.chart,t[o]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),nC(l,(t=>{const n=RN(e.callbacks,t);r.push(NN(n,"labelColor",this,t)),i.push(NN(n,"labelPointStyle",this,t)),s.push(NN(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=wN[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=IN(this,n),o=Object.assign({},e,t),a=TN(this.chart,n,o),l=CN(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=jA(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,_;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-s,v=b+s,_=b-s):(g=h+f,m=g+s,v=b-s,_=b+s),y=g):(m="left"===r?h+Math.max(a,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),_=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:_}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=kP(n.rtl,this.x,this.width);for(e.x=AN(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=VA(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=VA(i.bodyFont),u=AN(this,"left",i),h=r.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,wA(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,wA(e,t,n,c)}else{e.lineWidth=XT(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),o=jA(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,RA(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),RA(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=VA(n.bodyFont);let h=u.lineHeight,d=0;const f=kP(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},g=f.textAlign(s);let m,y,v,b,_,w,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=AN(this,g,n),t.fillStyle=n.bodyColor,nC(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,nC(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,a)),_=0,x=v.length;_<x;++_)p(v[_]),h=u.lineHeight;nC(m.after,p)}d=0,h=u.lineHeight,nC(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,o;if(i){const a=kP(n.rtl,this.x,this.width);for(e.x=AN(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=VA(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=jA(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=wN[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=IN(this,e),o=Object.assign({},n,this._size),a=TN(t,e,o),l=CN(e,o,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=UA(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),TP(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),CP(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!rC(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),o=this._positionChanged(s,e),a=t||!rC(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=wN[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}Ri(ON,"positioners",wN);var MN={id:"tooltip",_element:ON,positioners:wN,afterInit(e,t,n){n&&(e.tooltip=new ON({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Ni(Ni({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:DN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function LN(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function FN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class jN extends dD{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(QT(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:jC(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:LN(n,e,ZT(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return FN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function UN(e,t){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:g}=t,m=!QT(s),y=!QT(o),v=!QT(l),b=(g-p)/(u+1);let _,w,x,S,E=TC((g-p)/f/d)*d;if(E<1e-14&&!m&&!y)return[{value:p},{value:g}];S=Math.ceil(g/E)-Math.floor(p/E),S>f&&(E=TC(S*E/f/d)*d),QT(a)||(_=Math.pow(10,a),E=Math.ceil(E*_)/_),"ticks"===r?(w=Math.floor(p/E)*E,x=Math.ceil(g/E)*E):(w=p,x=g),m&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/i,E/1e3)?(S=Math.round(Math.min((o-s)/E,c)),E=(o-s)/S,w=s,x=o):v?(w=m?s:w,x=y?o:x,S=l-1,E=(x-w)/S):(S=(x-w)/E,S=kC(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const I=Math.max(DC(E),DC(w));_=Math.pow(10,QT(a)?I:a),w=Math.round(w*_)/_,x=Math.round(x*_)/_;let k=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&k++,kC(Math.round((w+k*E)*_)/_,s,VN(s,b,e))&&k++):w<s&&k++);k<S;++k){const e=Math.round((w+k*E)*_)/_;if(y&&e>o)break;n.push({value:e})}return y&&h&&x!==o?n.length&&kC(n[n.length-1].value,o,VN(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function VN(e,t,n){let{horizontal:r,minRotation:i}=n;const s=PC(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}Ri(jN,"id","category"),Ri(jN,"defaults",{ticks:{callback:FN}});class zN extends dD{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return QT(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=IC(r),t=IC(i);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=UN({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&AC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return lA(e,this.chart.options.locale,this.options.ticks.format)}}class BN extends zN{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=JT(e)?e:0,this.max=JT(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=PC(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ri(BN,"id","linear"),Ri(BN,"defaults",{ticks:{callback:uA.formatters.numeric}});const qN=e=>Math.floor(EC(e)),WN=(e,t)=>Math.pow(10,qN(e)+t);function HN(e){return 1===e/Math.pow(10,qN(e))}function GN(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function KN(e,t){let{min:n,max:r}=t;n=$T(e.min,n);const i=[],s=qN(n);let o=function(e,t){let n=qN(t-e);for(;GN(e,t,n)>10;)n++;for(;GN(e,t,n)<10;)n--;return Math.min(n,qN(e))}(n,r),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=$T(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<r;)i.push({value:f,major:HN(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=$T(e.max,f);return i.push({value:p,major:HN(p),significand:d}),i}class QN extends dD{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=zN.prototype.parse.apply(this,[e,t]);if(0!==n)return JT(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=JT(e)?Math.max(0,e):null,this.max=JT(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!JT(this._userMin)&&(this.min=e===WN(this.min,0)?WN(this.min,-1):WN(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(WN(n,-1)),s(WN(r,1)))),n<=0&&i(WN(r,-1)),r<=0&&s(WN(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=KN({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&AC(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":lA(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=EC(e),this._valueRange=EC(this.max)-EC(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(EC(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function YN(e){const t=e.ticks;if(t.display&&e.display){const e=UA(t.backdropPadding);return ZT(t.font&&t.font.size,mA.font.size)+e.height}return 0}function XN(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function JN(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?mC/s:0;for(let h=0;h<s;h++){const s=o.setContext(e.getPointLabelContext(h));i[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+i[h],a),f=VA(s.font),p=(l=e.ctx,c=f,u=YT(u=e._pointLabels[h])?u:[u],{w:vA(l,c.string,u),h:u.length*c.lineHeight});r[h]=p;const g=LC(e.getIndexAngle(h)+a),m=Math.round(RC(g));$N(n,t,g,XN(m,d.x,p.w,0,180),XN(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:YN(s)/2,additionalAngle:o?mC/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=ZN(e,u,l);r.push(i),"auto"===a&&(i.visible=eO(i,c),i.visible&&(c=i))}return r}(e,r,i)}function $N(e,t,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function ZN(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,r+i+o,s),c=Math.round(RC(LC(l.angle+wC))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function eO(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(SA({x:n,y:r},t)||SA({x:n,y:s},t)||SA({x:i,y:r},t)||SA({x:i,y:s},t))}function tO(e,t,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=t;if(!QT(a)){const n=jA(t.borderRadius),l=UA(t.backdropPadding);e.fillStyle=a;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=o-i+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),RA(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function nO(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,yC);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}Ri(QN,"id","logarithmic"),Ri(QN,"defaults",{ticks:{callback:uA.formatters.logarithmic,major:{enabled:!0}}});class rO extends zN{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=UA(YN(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=JT(e)&&!isNaN(e)?e:0,this.max=JT(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/YN(this.options))}generateTickLabels(e){zN.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=tC(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?JN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return LC(e*(yC/(this._pointLabels.length||1))+PC(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(QT(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(QT(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return BA(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-wC+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),nO(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));tO(n,s,t);const o=VA(s.font),{x:a,y:l,textAlign:c}=t;PA(n,e._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),nO(e,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=VA(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=UA(a.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}PA(e,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}Ri(rO,"id","radialLinear"),Ri(rO,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:uA.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Ri(rO,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ri(rO,"descriptors",{angleLines:{_fallback:"grid"}});const iO={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sO=Object.keys(iO);function oO(e,t){return e-t}function aO(e,t){if(QT(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof r&&(o=r(o)),JT(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!CC(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function lO(e,t,n,r){const i=sO.length;for(let s=sO.indexOf(e);s<i-1;++s){const e=iO[sO[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return sO[s]}return sO[i-1]}function cO(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=VC(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function uO(e,t,n){const r=[],i={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class hO extends dD{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new vR(e.adapters.date);r.init(t),lC(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:aO(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(i=Math.max(i,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=JT(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=JT(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?lO(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=sO.length-1;s>=sO.indexOf(n);s--){const n=sO[s];if(iO[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return sO[n?sO.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=sO.indexOf(e)+1,n=sO.length;t<n;++t)if(iO[sO[t]].common)return sO[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),uO(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=jC(r,0,s),i=jC(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||lO(i.minUnit,t,n,this._getLabelCapacity(t)),o=ZT(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=CC(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)cO(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||cO(c,u,f),Object.keys(c).sort(oO).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return tC(s,[e,t,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=PC(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,uO(this,[e],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(aO(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return HC(e.sort(oO))}}function dO(e,t,n){let r,i,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=zC(e,"pos",t)),({pos:r,time:s}=e[a]),({pos:i,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=zC(e,"time",t)),({time:r,pos:s}=e[a]),({time:i,pos:o}=e[l]));const c=i-r;return c?s+(o-s)*(t-r)/c:s}Ri(hO,"id","time"),Ri(hO,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class fO extends hO{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=dO(t,this.min),this._tableRange=dO(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(dO(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return dO(this._table,n*this._tableRange+this._minPos,!0)}}Ri(fO,"id","timeseries"),Ri(fO,"defaults",hO.defaults);const pO=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],gO="label";function mO(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function yO(e,t){e.labels=t}function vO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gO;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):Ni({},t)}))}function bO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gO;const n={labels:[],datasets:[]};return yO(n,e.labels),vO(n,e.datasets,t),n}function _O(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,f=dT(e,pO),p=(0,r.useRef)(null),g=(0,r.useRef)(),m=()=>{p.current&&(g.current=new WD(p.current,{type:a,data:bO(l,o),options:c&&Ni({},c),plugins:u}),mO(t,g.current))},y=()=>{mO(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,r.useEffect)((()=>{!s&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)}),[s,c]),(0,r.useEffect)((()=>{!s&&g.current&&yO(g.current.config.data,l.labels)}),[s,l.labels]),(0,r.useEffect)((()=>{!s&&g.current&&l.datasets&&vO(g.current.config.data,l.datasets,o)}),[s,l.datasets]),(0,r.useEffect)((()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))}),[s,c,l.labels,l.datasets,d]),(0,r.useEffect)((()=>{g.current&&(y(),setTimeout(m))}),[a]),(0,r.useEffect)((()=>(m(),()=>y())),[]),r.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:i},f),h)}const wO=(0,r.forwardRef)(_O);function xO(e,t){return WD.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(wO,Object.assign({},t,{ref:n,type:e}))))}const SO=xO("bar",lR);var EO,IO,kO,TO,CO,AO;const PO=pr.div(EO||(EO=we(["\n    display:flex;\n\n    width:49%;\n    max-height:200px;\n    min-height:200px;\n    padding:24px;\n    margin-top: 24px;\n\n    background-color:#2B3034;\n    border-radius:8px;\n    cursor:pointer;\n    transition:.3s;\n\n    &:hover {\n        background-color:#444;\n    }\n"]))),RO=pr.div(IO||(IO=we(["\n    width:100%;\n    display:flex;\n    flex-direction:column;\n"]))),DO=pr.img(kO||(kO=we(["\n    width: 160px;\n    height: 160px;\n    object-fit: cover;\n    border-radius:4px;\n\n    margin-right:32px;\n"]))),NO=pr.p(TO||(TO=we(["\n    font-size:24px;\n    color:white;\n    font-weight:bold;\n"]))),OO=pr.p(CO||(CO=we(["\n    font-size:14px;\n    color:#888;\n    margin-top:auto;\n"]))),MO=pr.p(AO||(AO=we(["\n    width:100%;\n    font-size:14px;\n    line-height:1.4;\n    color:#CCC;\n    margin-top: 8px;\n"])));const LO=function(e){const{post:t,imgUrl:n}=e,r=ee(),i=t.prompt.length>100?t.prompt.slice(0,100)+"...":t.prompt;return(0,yr.jsxs)(PO,{onClick:()=>{r("/post/"+t.id)},children:[(0,yr.jsx)(DO,{loading:"lazy",src:n}),(0,yr.jsxs)(RO,{children:[(0,yr.jsx)(NO,{children:t.title}),(0,yr.jsx)(MO,{children:i}),(0,yr.jsx)(OO,{children:t.date})]})]})};var FO;const jO=pr.div(FO||(FO=we(["\n    width:100%;\n\n    display:flex;\n    flex-wrap:wrap;\n\n    align-items:center;\n    justify-content:space-between;\n"])));const UO=function(e){const{posts:t,onClickItem:n,imgUrl:r}=e;return(0,yr.jsx)(jO,{children:t.map(((e,t)=>(0,yr.jsx)(LO,{post:e,imgUrl:r[t],onClick:()=>n(e)},e.id)))})};var VO,zO,BO,qO,WO,HO,GO,KO,QO,YO,XO;WD.register(jN,BN,pN,_N,MN,vN);const JO=pr.div(VO||(VO=we(["\n    width:100%;\n    min-height:100vh;\n    padding:0px 11.54% 100px 11.54%;\n    background-color:var(--main-bcColor);\n"]))),$O=pr.div(zO||(zO=we(["\n    padding-top:100px;\n    width:100%;\n"]))),ZO=pr.span(BO||(BO=we(["\n    color: var(--main-color);\n    font-weight: bold;\n    font-size: 32px;\n"]))),eM=pr.div(qO||(qO=we(["\n    height:1px;\n    background-color:white;\n    margin:12px 0px 0px 0px;\n"]))),tM=pr.div(WO||(WO=we(["\n    width:100%;\n"]))),nM=pr.div(HO||(HO=we(["\n    display:flex;\n    gap:20px;\n    padding-top: 40px;\n"]))),rM=pr.div(GO||(GO=we(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.7);\n    backdrop-filter:blur(4px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100;\n"]))),iM=pr.div(KO||(KO=we(["\n    background-color: var(--main-bcColor);\n    padding:40px 20px;\n    border-radius: 24px;\n    width: 40%;\n    color:white;\n    \n    display:flex;\n    flex-direction:column;\n    align-items: center;\n"]))),sM=pr.p(QO||(QO=we(["\n    font-size: 24px;\n    font-weight: bold;\n    color:var(--main-color);\n\n    margin-bottom:24px;\n"]))),oM=pr.p(YO||(YO=we(["\n    font-size: 16px;\n    line-height:1.4;\n    margin-bottom:4px;\n    color:white;\n"]))),aM=pr.div(XO||(XO=we(["\n    margin-top:40px;\n"])));const lM=function(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(0),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(!1),f=ee(),p=Ik(kk(),"images/");return(0,r.useEffect)((()=>{Sk(p).then((e=>{const t=e.items.map((e=>Ek(e)));Promise.all(t).then((e=>{i(e.reverse())}))})).catch((e=>{console.error("Error listing images: ",e)}))}),[]),(0,r.useEffect)((function(){let e=[];iE.collection("daily").get().then((function(n){n.forEach((function(t){e.push(t.data())})),e.reverse(),t(e);const r=e.reduce(((e,t)=>e+(t.score?parseInt(t.score,10):0)),0),i=e.length>0?(r/e.length).toFixed(0):0;o(i);const s=e.map((e=>e.score?parseInt(e.score,10):0)),a=e.map((e=>e.title||"No Title")),c=s.map(((e,t)=>({score:e,label:a[t]})));c.sort(((e,t)=>e.score-t.score));const u=c.map((e=>e.score)),h=c.map((e=>e.label));l({labels:h,datasets:[{label:"\uac10\uc815 \uc810\uc218",data:u,backgroundColor:"rgba(255, 165, 0, 0.2)",borderColor:"rgba(255, 165, 0, 1)",borderWidth:1}]})}))}),[]),(0,yr.jsxs)(JO,{children:[(0,yr.jsxs)(nM,{children:[(0,yr.jsx)("div",{onClick:()=>{f("/")},children:(0,yr.jsx)(aE,{buttonName:"\ucc98\uc74c\uc73c\ub85c"})}),(0,yr.jsx)("div",{onClick:()=>u(!0),children:(0,yr.jsx)(uE,{buttonName:"\uc774\uac8c \ubb50\ud558\ub294\uac70\uc5d0\uc694?"})}),(0,yr.jsx)("div",{onClick:()=>{d(!0),document.body.style.overflowY="hidden"},children:(0,yr.jsx)(uE,{buttonName:"\uad00\ub78c\uac1d \uac10\uc815 \uc810\uc218 \ubd84\ud3ec \ubcf4\uae30"})})]}),(0,yr.jsx)($O,{children:(0,yr.jsx)(br,{text:(0,yr.jsxs)(yr.Fragment,{children:["\uad00\ub78c\uac1d\uc758 \ud3c9\uade0 \uac10\uc815 \uc810\uc218\ub294 ",(0,yr.jsx)(ZO,{children:s}),"\uc810\uc785\ub2c8\ub2e4."]})})}),(0,yr.jsx)(eM,{}),(0,yr.jsx)(tM,{children:(0,yr.jsx)(UO,{imgUrl:n,posts:e,onClickItem:e=>{f("/post/"+e.id)}})}),h&&(0,yr.jsx)(rM,{children:(0,yr.jsxs)(iM,{children:[(0,yr.jsx)("h2",{style:{color:"white",marginBottom:"20px"},children:"\uac10\uc815 \uc810\uc218 \ubd84\ud3ec \ucc28\ud2b8"}),a?(0,yr.jsx)("div",{style:{width:"100%",marginBottom:"20px"},children:(0,yr.jsx)(SO,{data:a,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"\uad00\ub78c\uac1d\ub4e4\uc758 \uc810\uc218 \ubd84\ud3ec\uc785\ub2c8\ub2e4. \ubcf8\uc778\uc758 \uc810\uc218\uc640 \ube44\uad50\ud574\ubcf4\uc138\uc694.",color:"white",font:{size:16,weight:400}}},scales:{x:{ticks:{color:"white"}},y:{ticks:{color:"white"}}}}})}):(0,yr.jsx)("p",{style:{color:"white"},children:"\ucc28\ud2b8 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}),(0,yr.jsx)("div",{onClick:()=>{d(!1),document.body.style.overflowY="auto"},children:(0,yr.jsx)(uE,{buttonName:"\ub2eb\uae30"})})]})}),c&&(0,yr.jsx)(rM,{children:(0,yr.jsxs)(iM,{children:[(0,yr.jsx)(sM,{children:"\ubaa8\ub4e0 \uae30\ub85d\uc744 \ubcfc \uc218 \uc788\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4."}),(0,yr.jsx)(oM,{children:"\uc77c\uae30\ub97c \uc791\uc131\ud588\ub358 \uad00\ub78c\uac1d\ub4e4\uacfc\uc758 \ub0b4 \uac10\uc815 \uc810\uc218\ub97c \ube44\uad50\ud574\ubcfc \uc218 \uc788\uc73c\uba70,"}),(0,yr.jsx)(oM,{children:"\ub0b4\uac00 \uc791\uc131\ud55c \uc77c\uae30\ub97c \ud655\uc778\ud558\uace0, \ud0c0\ub85c \uce74\ub4dc\ub97c \ubf51\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,yr.jsx)(aM,{onClick:()=>u(!1),children:(0,yr.jsx)(uE,{buttonName:"\ud655\uc778\ud588\uc5b4\uc694",children:"\ud655\uc778\ud588\uc5b4\uc694"})})]})})]})};var cM,uM,hM,dM,fM,pM,gM,mM,yM,vM,bM,_M,wM,xM,SM,EM,IM,kM,TM,CM;const AM=pr.div(cM||(cM=we(["\n    width:100%;\n    min-height:100vh;\n    padding:100px 11.54%;\n    background-color:var(--main-bcColor);\n"]))),PM=pr.div(uM||(uM=we(["\n    width:fit-content;\n"]))),RM=pr.div(hM||(hM=we(["\n    width:100%;\n    display:flex;\n"]))),DM=pr.p(dM||(dM=we(["\n    font-size: 32px;\n    font-weight:700;\n    color:var(--main-color);\n    margin-bottom:8px;\n    margin-right:8px;\n"]))),NM=pr.div(fM||(fM=we(["\n    height:1px;\n    background-color:white;\n    margin:12px 0px 0px 0px;\n"]))),OM=pr.div(pM||(pM=we(["\n    width:100%;\n    margin-top:24px;\n    display:flex;\n    flex-wrap:wrap;\n    gap:24px;\n"]))),MM=pr.div(gM||(gM=we(["\n    width:30%;\n    height:fit-content;\n    border-radius:8px;\n    background-color:#2B3034;\n    padding:20px;\n"]))),LM=pr.p(mM||(mM=we(["\n    font-size: 24px;\n    font-weight: 700;\n    color:white;\n"]))),FM=pr.p(yM||(yM=we(["\n    font-size:16px;\n    font-weight: 400;\n    line-height:1.8;\n    color:#DDDDDD;\n    margin:12px 0px 0px 0px;\n"]))),jM=pr.img(vM||(vM=we(["\n    width:100%;\n    border-radius:8px;\n    margin-top:12px;\n"]))),UM=pr.div(bM||(bM=we(["\n    width:calc(70% - 24px);\n    height:fit-content;\n    border-radius:8px;\n    background-color:#2B3034;\n    padding:20px;\n"]))),VM=pr.div(_M||(_M=we(["\n    width:100%;\n    margin-bottom:40px;\n\n    &:last-child {\n        margin-bottom:0px;\n    }\n"]))),zM=pr.p(wM||(wM=we(["\n    width:100%;\n    color:white;\n    font-size: 16px;\n    text-align: center;\n    font-weight: bold;\n    padding:16px 0px;\n    margin-top:24px;\n    border-radius:8px;\n    background-color:var(--main-bcColor);\n    transition: .3s;\n\n    &:hover {\n        background-color:white;\n        color:#333;\n    }\n"]))),BM=pr.div(xM||(xM=we(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.7);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100;\n"]))),qM=pr.div(SM||(SM=we(["\n    background-color: var(--main-bcColor);\n    padding: 40px 20px;\n    border-radius: 24px;\n    width: 40%;\n    color: white;\n     \n    display:flex;\n    flex-direction:column;\n    align-items: center;\n"]))),WM=pr.p(EM||(EM=we(["\n    font-size: 20px;\n    line-height:1.4;\n    margin-bottom:4px;\n    color:white;\n"]))),HM=pr.span(IM||(IM=we(["\n    color: var(--main-color);\n    font-weight: bold;\n    font-size: 24px;\n"]))),GM=pr.div(kM||(kM=we(["\n    margin-top:40px;\n"]))),KM=pr.div(TM||(TM=we(["\n    width: 100%;\n    height: 100%;\n    background-color: #2B3034;\n    border-radius: 8px;\n"]))),QM=pr.p(CM||(CM=we(["\n    font-size: ",";\n    line-height: 1.4;\n    margin-top: ",";\n    text-align: center; \n    color: ",";\n    font-weight: ",";\n\n    &:last-child {\n        margin-bottom:0px;  \n    }\n"])),(e=>{let{isFirst:t}=e;return t?"20px":"14px"}),(e=>{let{isFirst:t}=e;return t?"20px":"8px"}),(e=>{let{isFirst:t}=e;return t?"white":"#CCC"}),(e=>{let{isFirst:t}=e;return t?"bold":"normal"}));const YM=function(){const e=function(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}().id,t=ee(),[n,i]=(0,r.useState)({id:"",date:"",choosedImage:"",keyword:"",prompt:"",title:"",score:"",reason:"",solution:"",tarot:""}),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)({title:"",rank:"",total:""}),c=n.tarot.split(",").map((e=>e.trim())),[u,h]=(0,r.useState)(""),d=Ik(kk(),"images/");return(0,r.useEffect)((()=>{Sk(d).then((t=>{t.items.forEach((t=>{t.name==="".concat(e)&&Ek(t).then((e=>{h(e)})).catch((e=>{console.error("Error getting download URL: ",e)}))}))})).catch((e=>{console.error("Error listing images: ",e)}))}),[d,e]),(0,r.useEffect)((()=>{iE.collection("daily").doc(e).get().then((function(e){i(e.data()),iE.collection("daily").get().then((t=>{const n=[];t.forEach((e=>{n.push(e.data().score)})),n.sort(((e,t)=>t-e));const r=n.indexOf(e.data().score)+1;l({title:e.data().title,rank:r,total:n.length}),o(!0)})).catch((e=>{console.error("Error fetching scores: ",e)}))})).catch((e=>{console.error("Error fetching post data: ",e)}))}),[e]),(0,yr.jsxs)(AM,{children:[(0,yr.jsxs)(RM,{children:[(0,yr.jsxs)(DM,{children:["[",n.score,"\uc810]"]}),(0,yr.jsx)(br,{text:n.title})]}),(0,yr.jsx)(NM,{}),(0,yr.jsxs)(OM,{children:[(0,yr.jsxs)(MM,{children:[(0,yr.jsx)(LM,{children:"\uac10\uc815 \uce74\ub4dc"}),(0,yr.jsxs)(KM,{children:[(0,yr.jsx)(jM,{src:u}),c.map(((e,t)=>(0,yr.jsx)(QM,{isFirst:0===t,children:e},t)))]}),(0,yr.jsx)(zM,{onClick:()=>{t("/tarot")},children:"\ud0c0\ub85c \ubf51\uae30"})]}),(0,yr.jsxs)(UM,{children:[(0,yr.jsxs)(VM,{children:[(0,yr.jsx)(LM,{children:"\uc77c\uae30 \ub0b4\uc6a9"}),(0,yr.jsx)(FM,{children:n.prompt})]}),(0,yr.jsxs)(VM,{children:[(0,yr.jsx)(LM,{children:"\ubd84\uc11d \uadfc\uac70"}),(0,yr.jsx)(FM,{children:n.reason})]}),(0,yr.jsxs)(VM,{children:[(0,yr.jsx)(LM,{children:"\uac10\uc815 \ud53c\ub4dc\ubc31"}),(0,yr.jsx)(FM,{children:n.solution})]}),(0,yr.jsx)(PM,{onClick:()=>{t("/viewDaily")},children:(0,yr.jsx)(aE,{buttonName:"\ub3cc\uc544\uac00\uae30"})})]})]}),s&&(0,yr.jsx)(BM,{children:(0,yr.jsxs)(qM,{children:[(0,yr.jsxs)(WM,{children:[(0,yr.jsx)(HM,{children:a.title}),"\ub2d8\uc758 \uc77c\uae30\ub294"," ",(0,yr.jsx)(HM,{children:a.total}),"\uba85\uc758 \uad00\ub78c\uac1d \uc911"," ",(0,yr.jsx)(HM,{children:a.rank}),"\ubc88\uc9f8\ub85c \uae0d\uc815\uc801\uc785\ub2c8\ub2e4."]}),(0,yr.jsx)(GM,{onClick:()=>{o(!1)},children:(0,yr.jsx)(uE,{buttonName:"\ud655\uc778\ud588\uc5b4\uc694",children:"\ud655\uc778\ud588\uc5b4\uc694"})})]})})]})},XM=n.p+"static/media/logo-icon.40d1ebb9a4e743ac1787.png";var JM,$M,ZM,eL;const tL=gr(JM||(JM=we(["\n    0% { transform: translateX(0); }\n    25% { transform: translateX(-10px); }\n    50% { transform: translateX(10px); }\n    75% { transform: translateX(-10px); }\n    100% { transform: translateX(0); }\n"])));const nL=pr.div($M||($M=we(["\n    perspective: 1000px;\n    width: 180px;\n    height: 240px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    border: ",";\n    background-color: #2B3034;\n    border-radius: 12px;\n    box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.12);\n    cursor: pointer;\n    transition: transform 0.2s ease;\n\n    ","; // \ud754\ub4e4\ub9ac\ub294 \uc560\ub2c8\uba54\uc774\uc158 \uc870\uac74\ubd80 \uc801\uc6a9\n"])),(e=>{let{isSelected:t}=e;return t?"1px solid #FFDD57":"1px solid #2B3034"}),(e=>{let{isShaking:t}=e;return t&&hr(ZM||(ZM=we(["\n            animation: "," 0.5s ease;\n        "])),tL)})),rL=pr.img(eL||(eL=we(["\n    width: 30%;\n"]))),iL=function(e){const{onSelect:t,isSelected:n,isShaking:r}=e;return(0,yr.jsx)(nL,{onClick:t,isSelected:n,isShaking:r,children:(0,yr.jsx)(rL,{src:XM})})};var sL,oL;const aL=pr.div(sL||(sL=we(["\n    width: 100%;\n    overflow: scroll;\n    padding: 40px;\n"]))),lL=pr.div(oL||(oL=we(["\n    width: fit-content;\n    display: flex;\n    gap: 16px;\n"]))),cL=function(e){let{posts:t,selectedCards:n,onCardSelect:i}=e;const[s,o]=(0,r.useState)(!1);return(0,yr.jsx)(aL,{children:(0,yr.jsx)(lL,{children:t.map((e=>(0,yr.jsx)(iL,{post:e,onSelect:()=>(e=>{n.includes(e.id)||n.length<3?i(e.id):(o(!0),setTimeout((()=>o(!1)),500)),2!==n.length||n.includes(e.id)||console.log("\ub2e4 \uc815\ud588\uc5b4\uc694")})(e),isSelected:n.includes(e.id),isShaking:s&&n.length>=3},e.id)))})})};var uL,hL,dL,fL,pL,gL,mL,yL,vL,bL,_L,wL,xL,SL,EL;const IL=pr.div(uL||(uL=we(["\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n"]))),kL=pr.div(hL||(hL=we(["\n    display: flex;\n    width: 200vw;\n    height: 100%;\n    transition: transform 0.5s ease-in-out;\n    transform: ","; /* \uc774\ub3d9 */\n"])),(e=>{let{showViewCard:t}=e;return t?"translateX(-100vw)":"translateX(0)"})),TL=pr.div(dL||(dL=we(["\n    width: 100vw;\n    height: 100vh;\n    padding: 0px 6%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--main-bcColor);\n"]))),CL=pr.div(fL||(fL=we(["\n    margin-bottom: 8px;\n    font-size: 24px;\n    color: white;\n"]))),AL=pr.div(pL||(pL=we(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin-top: 60px;\n"]))),PL=pr.div(gL||(gL=we(["\n    display: flex;\n    width: fit-content;\n    margin-right: 20px;\n\n    &:last-child {\n        margin-right: 0px;\n    }\n"]))),RL=pr.div(mL||(mL=we(["\n    width: 100vw;\n    height: 100vh;\n    padding: 0px 6%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--main-bcColor);\n"]))),DL=pr.div(yL||(yL=we(["\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    margin-top: 40px;\n"]))),NL=pr.div(vL||(vL=we(["\n    width: 300px;\n    min-height: 440px;\n    perspective: 1000px; /* 3D \ud6a8\uacfc\ub97c \uc704\ud55c \uc6d0\uadfc\uac10 */\n    cursor: pointer;\n"]))),OL=pr.div(bL||(bL=we(["\n    position: relative;\n    width: 100%;\n    height: 440px;\n    transform-style: preserve-3d;\n    transition: transform 0.8s;\n    transform: ",";\n"])),(e=>{let{isFlipped:t}=e;return t?"rotateY(180deg)":"rotateY(0)"})),ML=pr.div(_L||(_L=we(["\n    position: absolute;\n    width: 100%;\n    height: 440px;\n    backface-visibility: hidden; /* \uc55e\uba74\uc5d0 \ub4b7\uba74\uc774 \ubcf4\uc774\uc9c0 \uc54a\ub3c4\ub85d \uc124\uc815 */\n    background-color: #2B3034;\n    border-radius: 8px;\n    padding:20px;\n\n    display:flex;\n    align-items:center;\n    justify-content:center;\n"]))),LL=pr.div(wL||(wL=we(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    backface-visibility: hidden;\n    background-color: #2B3034; /* \uac80\uc740\uc0c9 \ubc30\uacbd */\n    border-radius: 8px;\n    padding:20px;\n    transform: rotateY(180deg);\n"]))),FL=pr.img(xL||(xL=we(["\n    width: 30%;\n"]))),jL=pr.p(SL||(SL=we(["\n    font-size: ",";\n    line-height: 1.4;\n    margin-bottom: 8px;\n    text-align: center;\n    color: ",";\n    font-weight: ",";\n\n    &:last-child {\n        margin-bottom:0px;  \n    }\n"])),(e=>{let{isFirst:t}=e;return t?"16px":"14px"}),(e=>{let{isFirst:t}=e;return t?"white":"#CCC"}),(e=>{let{isFirst:t}=e;return t?"bold":"normal"})),UL=pr.img(EL||(EL=we(["\n    width: 100%;\n    height: auto;\n    margin-bottom: 24px;\n    border-radius: 8px;\n"]))),VL=function(e){const[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)({}),[u,h]=(0,r.useState)(!1),d=ee(),f=kk();return(0,r.useEffect)((()=>{let e=[];iE.collection("tarot").get().then((function(t){t.forEach((function(t){e.push(Ni({id:t.id},t.data()))})),a(e.sort((()=>Math.random()-.5)))}))}),[]),(0,r.useEffect)((()=>{t.length>0&&t.forEach((e=>{Ek(Ik(f,"images/".concat(e))).then((t=>{c((n=>Ni(Ni({},n),{},{[e]:t})))})).catch((e=>{console.error("Error getting download URL: ",e)}))}))}),[t,f]),(0,yr.jsx)(IL,{children:(0,yr.jsxs)(kL,{showViewCard:u,children:[(0,yr.jsxs)(TL,{children:[(0,yr.jsxs)(CL,{children:["(",t.length,"/3)"]}),(0,yr.jsx)(br,{text:"\uce74\ub4dc 3\uc7a5\uc744 \uace8\ub77c\uc8fc\uc138\uc694!"}),(0,yr.jsx)(cL,{posts:o,selectedCards:t,onCardSelect:e=>{if(t.includes(e)){const r=t.filter((t=>t!==e));n(r)}else t.length<3&&n([...t,e])}}),(0,yr.jsxs)(AL,{children:[(0,yr.jsx)(PL,{onClick:()=>d(-1),children:(0,yr.jsx)(uE,{buttonName:"\uc774\uc804\uc73c\ub85c"})}),(0,yr.jsx)(PL,{onClick:()=>h(!0),children:(0,yr.jsx)(aE,{buttonName:"\ud0c0\ub85c\ubcf4\uae30"})})]})]}),(0,yr.jsxs)(RL,{children:[(0,yr.jsx)(br,{text:"AI\uac00 \uc81c\uc548\ud558\ub294 \uc2a4\ud2b8\ub808\uc2a4 \uc644\ud654\ubc29\ubc95\uc785\ub2c8\ub2e4"}),(0,yr.jsx)(xr,{mt:"8px",text:"\uc81c\uc548\ud558\ub294 \uc644\ud654\ubc29\ubc95\uc740 \uacfc\uac70\uc758 \uae0d\uc815\uc801\uc778 \uc77c\uae30\ub97c \ubc14\ud0d5\uc73c\ub85c \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),(0,yr.jsx)(DL,{children:t.map((e=>{const t=o.find((t=>t.id===e));if(t){const n=t.tarot.split(",").map((e=>e.trim())),r=i.includes(e),o=l[t.id];return(0,yr.jsx)(NL,{onClick:()=>(e=>{s((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))})(e),isFlipped:r,children:(0,yr.jsxs)(OL,{isFlipped:r,children:[(0,yr.jsx)(ML,{children:(0,yr.jsx)(FL,{src:XM})}),(0,yr.jsxs)(LL,{children:[o&&(0,yr.jsx)(UL,{src:o,alt:t.title}),n.map(((e,t)=>(0,yr.jsx)(jL,{isFirst:0===t,children:e},t)))]})]})},e)}return null}))}),(0,yr.jsx)(AL,{children:(0,yr.jsx)(PL,{onClick:()=>d("/"),children:(0,yr.jsx)(aE,{buttonName:"\ud655\uc778\ud588\uc5b4\uc694"})})})]})]})})};s.createRoot(document.getElementById("root")).render((0,yr.jsx)(ve,{basename:"",children:(0,yr.jsxs)(ge,{children:[(0,yr.jsx)(fe,{index:!0,element:(0,yr.jsx)(Lr,{})}),(0,yr.jsx)(fe,{path:"/write",element:(0,yr.jsx)(tI,{})}),(0,yr.jsx)(fe,{path:"/choicePicture",element:(0,yr.jsx)(hT,{})}),(0,yr.jsx)(fe,{path:"/viewDaily",element:(0,yr.jsx)(lM,{})}),(0,yr.jsx)(fe,{path:"/post/:id",element:(0,yr.jsx)(YM,{})}),(0,yr.jsx)(fe,{path:"/tarot",element:(0,yr.jsx)(VL,{})})]})}))})()})();
//# sourceMappingURL=main.7505ff4c.js.map